[{"D:\\dev-projects\\telmo-academy-v3\\client\\src\\index.js":"1","D:\\dev-projects\\telmo-academy-v3\\client\\src\\App.js":"2","D:\\dev-projects\\telmo-academy-v3\\client\\src\\store.js":"3","D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\auth.js":"4","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Home.js":"5","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Footer.js":"6","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Course.js":"7","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Register.js":"8","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\CourseLessons.js":"9","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Courses.js":"10","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Logout.js":"11","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Login.js":"12","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\MembershipSuccess.js":"13","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Membership.js":"14","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\CheckoutSuccess.js":"15","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Checkout.js":"16","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\ForgotPassword.js":"17","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\ResetPassword.js":"18","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\ActivateEmail.js":"19","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Privacy.js":"20","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Activate.js":"21","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\utils\\CookiePolicy.js":"22","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\AdminCtn.js":"23","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\ProfileCtn.js":"24","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\MembershipCheckout.js":"25","D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\types.js":"26","D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\authConstants.js":"27","D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\userConstants.js":"28","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\CourseCard.js":"29","D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\courses.js":"30","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\utils\\MessageDisplay.js":"31","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\ProfileCourses.js":"32","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\ProfileSidebar.js":"33","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\Profile.js":"34","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\EditCoupon.js":"35","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\Coupons.js":"36","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\NewCoupon.js":"37","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\ActiveMemberships.js":"38","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\ProfileBilling.js":"39","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\FeatureCourses.js":"40","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\AllUsers.js":"41","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\CourseUpdate.js":"42","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\Sales.js":"43","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\CourseCreate.js":"44","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\UserProfile.js":"45","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\AdminSidebar.js":"46","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\Courses.js":"47","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\utils\\Loader.js":"48","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\partials\\Header.js":"49","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\partials\\SecondHeader.js":"50","D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\couponConstants.js":"51","D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\payments.js":"52","D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\index.js":"53","D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\courseConstants.js":"54","D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\membership.js":"55","D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\admin.js":"56","D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\membershipConstants.js":"57","D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\paymentConstants.js":"58","D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\admin.js":"59","D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\auth.js":"60","D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\courses.js":"61","D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\payment.js":"62","D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\adminConstants.js":"63","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Terms.js":"64"},{"size":154,"mtime":1588368838947,"results":"65","hashOfConfig":"66"},{"size":3784,"mtime":1620424749260,"results":"67","hashOfConfig":"66"},{"size":393,"mtime":1587241502709,"results":"68","hashOfConfig":"66"},{"size":8710,"mtime":1615499466023,"results":"69","hashOfConfig":"66"},{"size":5570,"mtime":1616023041670,"results":"70","hashOfConfig":"66"},{"size":1483,"mtime":1620424749262,"results":"71","hashOfConfig":"66"},{"size":7430,"mtime":1616799307640,"results":"72","hashOfConfig":"66"},{"size":7231,"mtime":1620767947486,"results":"73","hashOfConfig":"66"},{"size":7923,"mtime":1616799307642,"results":"74","hashOfConfig":"66"},{"size":3960,"mtime":1618351439348,"results":"75","hashOfConfig":"66"},{"size":594,"mtime":1605527533139,"results":"76","hashOfConfig":"66"},{"size":3246,"mtime":1617053872535,"results":"77","hashOfConfig":"66"},{"size":896,"mtime":1601506704235,"results":"78","hashOfConfig":"66"},{"size":5172,"mtime":1620251070779,"results":"79","hashOfConfig":"66"},{"size":2170,"mtime":1617053872503,"results":"80","hashOfConfig":"66"},{"size":12953,"mtime":1618351439300,"results":"81","hashOfConfig":"66"},{"size":3020,"mtime":1614548717466,"results":"82","hashOfConfig":"66"},{"size":5200,"mtime":1614548717540,"results":"83","hashOfConfig":"66"},{"size":1422,"mtime":1605730944904,"results":"84","hashOfConfig":"66"},{"size":4367,"mtime":1620424749262,"results":"85","hashOfConfig":"66"},{"size":1756,"mtime":1620251070759,"results":"86","hashOfConfig":"66"},{"size":999,"mtime":1615057835209,"results":"87","hashOfConfig":"66"},{"size":2395,"mtime":1618436952218,"results":"88","hashOfConfig":"66"},{"size":1204,"mtime":1612304148021,"results":"89","hashOfConfig":"66"},{"size":4094,"mtime":1620334368793,"results":"90","hashOfConfig":"66"},{"size":1751,"mtime":1617391816221,"results":"91","hashOfConfig":"66"},{"size":600,"mtime":1614548717708,"results":"92","hashOfConfig":"66"},{"size":575,"mtime":1609332017239,"results":"93","hashOfConfig":"66"},{"size":2479,"mtime":1620424749261,"results":"94","hashOfConfig":"66"},{"size":9833,"mtime":1620251070705,"results":"95","hashOfConfig":"66"},{"size":554,"mtime":1620767738596,"results":"96","hashOfConfig":"66"},{"size":2120,"mtime":1620424749266,"results":"97","hashOfConfig":"66"},{"size":1471,"mtime":1614808201815,"results":"98","hashOfConfig":"66"},{"size":14095,"mtime":1617053872577,"results":"99","hashOfConfig":"66"},{"size":10656,"mtime":1612384591824,"results":"100","hashOfConfig":"66"},{"size":16735,"mtime":1615030852593,"results":"101","hashOfConfig":"66"},{"size":7146,"mtime":1609421170957,"results":"102","hashOfConfig":"66"},{"size":15981,"mtime":1620251070738,"results":"103","hashOfConfig":"66"},{"size":5117,"mtime":1618351439528,"results":"104","hashOfConfig":"66"},{"size":9323,"mtime":1606343967047,"results":"105","hashOfConfig":"66"},{"size":14654,"mtime":1620251070756,"results":"106","hashOfConfig":"66"},{"size":12612,"mtime":1616799307614,"results":"107","hashOfConfig":"66"},{"size":12713,"mtime":1615030852595,"results":"108","hashOfConfig":"66"},{"size":4143,"mtime":1615030852594,"results":"109","hashOfConfig":"66"},{"size":9208,"mtime":1615030852595,"results":"110","hashOfConfig":"66"},{"size":2183,"mtime":1618436952218,"results":"111","hashOfConfig":"66"},{"size":5705,"mtime":1619387153301,"results":"112","hashOfConfig":"66"},{"size":332,"mtime":1605369245325,"results":"113","hashOfConfig":"66"},{"size":573,"mtime":1614548717574,"results":"114","hashOfConfig":"66"},{"size":9324,"mtime":1620424749264,"results":"115","hashOfConfig":"66"},{"size":264,"mtime":1610319588780,"results":"116","hashOfConfig":"66"},{"size":4786,"mtime":1620251070718,"results":"117","hashOfConfig":"66"},{"size":257,"mtime":1606423583344,"results":"118","hashOfConfig":"66"},{"size":697,"mtime":1620251070789,"results":"119","hashOfConfig":"66"},{"size":1877,"mtime":1617391816204,"results":"120","hashOfConfig":"66"},{"size":9401,"mtime":1620251070704,"results":"121","hashOfConfig":"66"},{"size":311,"mtime":1620251070790,"results":"122","hashOfConfig":"66"},{"size":189,"mtime":1615030852678,"results":"123","hashOfConfig":"66"},{"size":3674,"mtime":1620251070790,"results":"124","hashOfConfig":"66"},{"size":4972,"mtime":1620768555149,"results":"125","hashOfConfig":"66"},{"size":3401,"mtime":1620251070791,"results":"126","hashOfConfig":"66"},{"size":3250,"mtime":1617391816224,"results":"127","hashOfConfig":"66"},{"size":2383,"mtime":1620251070789,"results":"128","hashOfConfig":"66"},{"size":5061,"mtime":1620424749263,"results":"129","hashOfConfig":"66"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},"ps6lgt",{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"141","usedDeprecatedRules":"132"},{"filePath":"142","messages":"143","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"144","messages":"145","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"146","usedDeprecatedRules":"132"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"149","messages":"150","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"151","usedDeprecatedRules":"132"},{"filePath":"152","messages":"153","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"154","usedDeprecatedRules":"132"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"157","usedDeprecatedRules":"132"},{"filePath":"158","messages":"159","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"162","usedDeprecatedRules":"132"},{"filePath":"163","messages":"164","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"165","usedDeprecatedRules":"132"},{"filePath":"166","messages":"167","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"168","usedDeprecatedRules":"132"},{"filePath":"169","messages":"170","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"171","usedDeprecatedRules":"132"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"174","usedDeprecatedRules":"132"},{"filePath":"175","messages":"176","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"177","usedDeprecatedRules":"132"},{"filePath":"178","messages":"179","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"180","usedDeprecatedRules":"132"},{"filePath":"181","messages":"182","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"183","messages":"184","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"185","usedDeprecatedRules":"132"},{"filePath":"186","messages":"187","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"188","messages":"189","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"190","usedDeprecatedRules":"132"},{"filePath":"191","messages":"192","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"193","usedDeprecatedRules":"132"},{"filePath":"194","messages":"195","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"196","usedDeprecatedRules":"132"},{"filePath":"197","messages":"198","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"199","messages":"200","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"201","messages":"202","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"203","messages":"204","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"205","messages":"206","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"207","messages":"208","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"209","messages":"210","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"211","messages":"212","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"213","messages":"214","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"215","usedDeprecatedRules":"132"},{"filePath":"216","messages":"217","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"218","usedDeprecatedRules":"132"},{"filePath":"219","messages":"220","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"221","usedDeprecatedRules":"132"},{"filePath":"222","messages":"223","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"224","usedDeprecatedRules":"132"},{"filePath":"225","messages":"226","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"227","usedDeprecatedRules":"132"},{"filePath":"228","messages":"229","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"230","usedDeprecatedRules":"132"},{"filePath":"231","messages":"232","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"233","usedDeprecatedRules":"132"},{"filePath":"234","messages":"235","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"236","usedDeprecatedRules":"132"},{"filePath":"237","messages":"238","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"239","usedDeprecatedRules":"132"},{"filePath":"240","messages":"241","errorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"242","usedDeprecatedRules":"132"},{"filePath":"243","messages":"244","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"245","usedDeprecatedRules":"132"},{"filePath":"246","messages":"247","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"248","usedDeprecatedRules":"132"},{"filePath":"249","messages":"250","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"251","messages":"252","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"253","usedDeprecatedRules":"132"},{"filePath":"254","messages":"255","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"256","messages":"257","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"258","messages":"259","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"260","messages":"261","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"262","messages":"263","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"264","usedDeprecatedRules":"132"},{"filePath":"265","messages":"266","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"267","messages":"268","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"269","messages":"270","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"271","messages":"272","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"273","messages":"274","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"275","messages":"276","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"277","messages":"278","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"279","messages":"280","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"281","messages":"282","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"283","messages":"284","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"285","messages":"286","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"132"},{"filePath":"287","messages":"288","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\dev-projects\\telmo-academy-v3\\client\\src\\index.js",[],["289","290"],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\App.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\store.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\auth.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Home.js",["291"],"import React, { Fragment, useEffect } from 'react';\r\nimport Header from '../partials/Header';\r\nimport CourseCard from './CourseCard';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getCourses } from '../../actions/courses';\r\nimport styles from './Home.module.css';\r\n\r\nconst Home = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const courses = useSelector((state) => state.courses);\r\n  const { coursesLoaded, all } = courses;\r\n\r\n  useEffect(() => {\r\n    if (!coursesLoaded) {\r\n      dispatch(getCourses());\r\n    }\r\n  }, []);\r\n\r\n  console.log(courses);\r\n\r\n  const coursesFiltered =\r\n    all && all.length > 0 &&\r\n    all.filter((course) => {\r\n      return course.featured;\r\n    });\r\n\r\n    coursesFiltered && coursesFiltered.length > 0 &&\r\n    coursesFiltered.sort((a, b) => {\r\n      return a.position - b.position;\r\n    });\r\n\r\n  const allFeatured =\r\n  coursesFiltered && coursesFiltered.length > 0 &&\r\n    coursesFiltered.map((course, i) => {\r\n      return (\r\n        <CourseCard\r\n          name={course.name}\r\n          price={course.price}\r\n          key={i}\r\n          tag={course.tag}\r\n          courseLevel={course.courseLevel}\r\n        />\r\n      );\r\n    });\r\n\r\n  console.log(courses);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Header />\r\n      <div className=\"container\">\r\n        \r\n        <div className={styles.popularCoursesCtn}>\r\n        <Row>\r\n          <Col className=\"offset-1 offset-md-0 col-10\">\r\n            <h3 className={styles.popularCourses}>Popular Courses</h3>\r\n          </Col>\r\n        </Row>\r\n          <div className=\"row\">{allFeatured}</div>\r\n        </div>\r\n      </div>\r\n      <div className={styles.homeCounter}>\r\n        <div className={styles.overlay}></div>\r\n        <div className=\"container\">\r\n          <Row>\r\n            <Col sm={12} md={3} className=\"mb-4\">\r\n              <h1 className={styles.homeCounterTitle}>3057</h1>\r\n              <h5 className={styles.homeCounterSubTitle}>students</h5>\r\n            </Col>\r\n            <Col sm={12} md={3} className=\"mb-4\">\r\n              <h1 className={styles.homeCounterTitle}>22471</h1>\r\n              <h5 className={styles.homeCounterSubTitle}>views</h5>\r\n            </Col>\r\n            <Col sm={12} md={3} className=\"mb-4\">\r\n              <h1 className={styles.homeCounterTitle}>64</h1>\r\n              <h5 className={styles.homeCounterSubTitle}>countries reached</h5>\r\n            </Col>\r\n            <Col sm={12} md={3}>\r\n              <h1 className={styles.homeCounterTitle}>8</h1>\r\n              <h5 className={styles.homeCounterSubTitle}>courses published</h5>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.homeObjectives}>\r\n        <div className=\"container\">\r\n          <h3 className={styles.homeObjectivesMainTitle}>\r\n            Learning Objectives{' '}\r\n          </h3>\r\n          <p className={styles.homeObjectivesMainDescription}>\r\n            The skills you can expect to achieve with us\r\n          </p>\r\n          <Row>\r\n            <Col xs={6} md={4}>\r\n              <i className=\"fas fa-suitcase\"></i>\r\n              <h5 className={styles.homeObjectivesObjTitle}>Get Job Ready</h5>\r\n              <p className={styles.homeObjectivesObjDescription}>\r\n                Gain practical experience as you go by creating portfolio-worthy\r\n                projects that will help you land your next job\r\n              </p>\r\n            </Col>\r\n            <Col xs={6} md={4}>\r\n              <i className=\"fas fa-trophy\"></i>\r\n              <h5 className={styles.homeObjectivesObjTitle}>\r\n                Get in-depth knowledge\r\n              </h5>\r\n              <p className={styles.homeObjectivesObjDescription}>\r\n                Learning to code means more than just memorizing syntax.\r\n                Instead, we help you think like a real programmer\r\n              </p>\r\n            </Col>\r\n            <Col xs={6} md={4}>\r\n              <i className=\"fas fa-globe\"></i>\r\n              <h5 className={styles.homeObjectivesObjTitle}>Freelancing</h5>\r\n              <p className={styles.homeObjectivesObjDescription}>\r\n                All the tips tricks you need to know to start your freelance\r\n                career\r\n              </p>\r\n            </Col>\r\n          \r\n            <Col xs={6} md={4}>\r\n              <i className=\"far fa-handshake\"></i>\r\n              <h5 className={styles.homeObjectivesObjTitle}>Get Hired</h5>\r\n              <p className={styles.homeObjectivesObjDescription}>\r\n                Learn how to build an Online Portfolio, and an Awesome CV that\r\n                will get you hired\r\n              </p>\r\n            </Col>\r\n            <Col xs={6} md={4}>\r\n              <i className=\"fas fa-star\"></i>\r\n              <h5 className={styles.homeObjectivesObjTitle}>\r\n                Responsive Design\r\n              </h5>\r\n              <p className={styles.homeObjectivesObjDescription}>\r\n                Learn how to build websites that will look good on Desktops,\r\n                Tablets and Mobile phones\r\n              </p>\r\n            </Col>\r\n            <Col xs={6} md={4}>\r\n              <i className=\"fas fa-code\"></i>\r\n              <h5 className={styles.homeObjectivesObjTitle}>Clean Code</h5>\r\n              <p className={styles.homeObjectivesObjDescription}>\r\n                Learn to write simple, elegante and bug free code, just like a\r\n                professional\r\n              </p>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Footer.js",["292","293"],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Course.js",["294","295"],"import React, { Fragment, useState, useEffect } from 'react';\r\nimport parse from 'html-react-parser';\r\nimport { useParams, Link, Redirect } from 'react-router-dom';\r\nimport { Button } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getCourse } from '../../actions/courses';\r\nimport { addCheckout, getCoursesOwned } from '../../actions/courses';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport './Course.css';\r\n\r\nconst Course = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const auth = useSelector((state) => state.auth);\r\n  const { user, membership, token } = auth;\r\n  const course = useSelector((state) => state.courses);\r\n  const payment = useSelector((state) => state.payment);\r\n  console.log(course);\r\n\r\n  const [page, setPage] = useState({\r\n    loaded: false,\r\n  });\r\n\r\n  const { courseTag } = useParams();\r\n\r\n  useEffect(() => {\r\n    console.log(\"getting course\");\r\n    dispatch(getCourse(courseTag, user && user._id));\r\n  }, [courseTag, dispatch, user, token]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getCoursesOwned(user && user._id));\r\n    setPage({ loaded: true });\r\n    console.log('after page loaded');\r\n  }, [dispatch, user]);\r\n\r\n  useEffect(() => {\r\n    if (membership && membership.active) {\r\n      setPage({ loaded: true });\r\n    }\r\n  }, [membership]);\r\n\r\n  // useEffect(() => {\r\n  //   store.dispatch(getCourse(courseTag, auth && auth.token));\r\n  // }, [auth && auth.token])\r\n\r\n  console.log(courseTag);\r\n  console.log(course);\r\n  console.log(auth);\r\n  const description = () => {\r\n    if (course && course.data && course.data.description) {\r\n      return course.data.description;\r\n    } else {\r\n      return '';\r\n    }\r\n  };\r\n\r\n  const goCheckout = async () => {\r\n    const selectedCourse = course && course.data;\r\n    const userEmail = auth && auth.user && auth.user.email;\r\n    await dispatch(addCheckout({ selectedCourse, userEmail }));\r\n  };\r\n\r\n  let classes =\r\n    course &&\r\n    course.data &&\r\n    course.data.classes.map((theClass, i) => {\r\n      return (\r\n        <div\r\n          className={\r\n            i % 2 == 0 ? 'courseClassItems bg-light' : 'courseClassItems'\r\n          }\r\n          key={i}\r\n        >\r\n          <div className=\"courseClassLecture\">\r\n            <i className=\"far fa-file\"></i><span className=\"d-none d-sm-block\">Lecture</span> {theClass.lecture}\r\n          </div>\r\n          <div className=\"courseClassTitle\">\r\n            <Link to={`/courses/${course.data.tag}/lessons/1`}>\r\n              {theClass.title}\r\n            </Link>\r\n            <span className=\"d-none d-sm-block\">{theClass.duration} min</span>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n\r\n  const courseId = course && course.data && course.data._id;\r\n\r\n  const userGotCourse =\r\n    auth && auth.coursesOwned &&\r\n    auth.coursesOwned.filter((course) => {\r\n      console.log(course._id);\r\n      console.log(courseId);\r\n      return course._id == courseId;\r\n    });\r\n  console.log(auth && auth.coursesOwned);\r\n  console.log(userGotCourse);\r\n\r\n  if (payment && payment.addingToCheckout) {\r\n    console.log(payment.addingToCheckout);\r\n    return <Redirect to=\"/cart/checkout\" />;\r\n  }\r\n\r\n  if (membership && membership.active) {\r\n    console.log('final check');\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <SecondHeader />\r\n\r\n      <div className=\"courseCtn\">\r\n        <div className=\"container\">\r\n          <div className=\"courseCtnHeader\">\r\n            <h1 className=\"coursePageTitle\">\r\n              {course && course.data && course.data.name}\r\n            </h1>\r\n            {(userGotCourse && userGotCourse.length > 0) ||\r\n            (membership && membership.active) ? (\r\n              <Button variant=\"dark\" className=\"removePadding\">\r\n                <Link\r\n                  className=\"btnStart\"\r\n                  to={`/courses/${\r\n                    course && course.data && course.data.tag\r\n                  }/lessons/1`}\r\n                >\r\n                  <span className=\"buyCoursePrice\">Start Learning</span>\r\n                </Link>\r\n              </Button>\r\n            ) : null}\r\n          </div>\r\n\r\n          <div className=\"courseCtnBody\">\r\n            <div className=\"courseIntro\">\r\n              <iframe\r\n                src={course && course.data && course.data.intro}\r\n                width=\"640\"\r\n                height=\"360\"\r\n                frameBorder=\"0\"\r\n                allow=\"autoplay; fullscreen\"\r\n                allowFullScreen\r\n                title=\"courseIntro\"\r\n              ></iframe>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className={membership && membership.active && userGotCourse && userGotCourse.length > 0 ? \"col-lg-12 col-sm-12\" : \"col-lg-8 col-sm-12\"}col-lg-8 col-sm-12>\r\n                <div className=\"card\">\r\n                  <div className=\"card-header\">Description</div>\r\n                  <div className=\"courseDescription card-body\">\r\n                    {parse(description())}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"curriculumCtn card\">\r\n                  <div className=\"card-body\">\r\n                    <h4 className=\"courseOverview\">Curriculum</h4>\r\n                    {classes}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-4 offset-sm-2 offset-lg-0 col-sm-8\">\r\n                {page.loaded &&\r\n                membership &&\r\n                membership.active ? null : (\r\n                  <div className=\"card purchaseButtons membershipCardCtn\">\r\n                    <div className=\"card-header\">\r\n                      Unlimited access all courses\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <h1>$18/month</h1>\r\n                      <Link\r\n                        className=\"membershipPay\"\r\n                        id=\"membershipButton\"\r\n                        to=\"/membership\"\r\n                      >\r\n                        {' '}\r\n                        <span className=\"buyMembershipPrice\">\r\n                          Buy Membership\r\n                        </span>\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {(!userGotCourse || (userGotCourse && userGotCourse.length < 1)) && (\r\n                  <div className=\"card purchaseButtons\">\r\n                    <div className=\"card-header\">Buy Lifetime Access:</div>\r\n                    <div className=\"card-body\">\r\n                      <h1>${course && course.data && course.data.price} USD</h1>\r\n                      <Link to=\"/cart/checkout\"></Link>\r\n                      {auth && auth.isAuthenticated ? (\r\n                        <button\r\n                          className=\"membershipPay buyLifetime\"\r\n                          onClick={goCheckout}\r\n                        >\r\n                          <span className=\"buyCoursePrice\">Buy Course</span>\r\n                        </button>\r\n                      ) : (\r\n                        <Link to=\"/register\" className=\"membershipPay btn-primary buyLifetime\">\r\n                          Buy Course\r\n                        </Link>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Course;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Register.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\CourseLessons.js",["296","297","298","299","300","301","302"],"import React, { Fragment, useEffect, useState } from 'react';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport styles from './CourseLesson.module.css';\r\nimport { useParams, Link, Redirect } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getCourse, getCoursesOwned, finishLessonAction, lessonsWatchedAction } from '../../actions/courses';\r\n\r\nconst CourseLessons = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst auth = useSelector((state) => state.auth);\r\n  const { user, token } = auth;\r\n  const course = useSelector((state) => state.courses);\r\n\tconst { loading } = course;\r\n\r\n\tconst [page, setPage] = useState({\r\n\t\tloaded: false\r\n\t});\r\n\r\n\tlet { courseTag, lesson } = useParams();\r\n\r\n\tlesson = parseInt(lesson);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet isSubscribed = true;\r\n\t\tif (isSubscribed && token) {\r\n\t\t\tdispatch(getCourse(courseTag, user && user._id));\r\n\t\t}\r\n\r\n\t\treturn () => (isSubscribed = false);\r\n\t}, [courseTag, user && user._id]);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet isSubscribed = true;\r\n\t\tif (isSubscribed) {\r\n\t\t\t\r\n\t\t\tsetCoursesOwned();\r\n\t\t}\r\n\r\n\t\treturn () => (isSubscribed = false);\r\n\t}, [auth && auth.user && auth.user._id]);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet isSubscribed = true;\r\n\t\tif (isSubscribed) {\r\n\t\t\tredirectUser();\r\n\t\t}\r\n\t\treturn () => (isSubscribed = false);\r\n\t}, [auth.coursesOwned])\r\n\r\n\tuseEffect(() => {\r\n\t\t\tconsole.log(\"CALLING LESSONS WATCHED ACTION\")\r\n\t\t\tdispatch(lessonsWatchedAction(courseTag, token));\r\n\t\t\r\n\t}, [dispatch, courseTag, token])\r\n\r\n\t// useEffect(() => {\r\n\t// \tconsole.log(\"calling redirect user\")\r\n\t// \tif ( (page.loaded && auth && auth.user && auth.user.role !== \"admin\" && !checkCourseAccess) || (auth && auth.membership && auth.membership.active)) {\r\n\t// \t\tredirectUser();\r\n\t// \t}\r\n\t// }, [page.loaded, auth.membership, auth.user]);\r\n\r\n\tconst setCoursesOwned = async () => {\r\n\t\t// await dispatch(getCoursesOwned(auth && auth.user && auth.user._id));\r\n\r\n\t}\r\n\r\n\tconst totalLessons = course && course.data && course.data.classes && course.data.classes.length;\r\n\t// console.log(totalLessons);\r\n\r\n\t// console.log(course);\r\n\t// console.log(lesson)\r\n\r\n\tconst checkLesson = (i) => {\r\n\t\t// console.log(\"INSIDE Checking Lesson\");\r\n\t\t// console.log(theClass.watched)\r\n\t\tlet classLength = course && course.classesWatched && course.classesWatched.length;\r\n\t\t// console.log(\"ClassLength is\" + classLength);\r\n\t\tfor (let y = 0; y < classLength; y++) {\r\n\t\t\t// console.log(\"Are there classes\");\r\n\t\t\t// console.log(theClass.watched.length > 0)\r\n\t\t\t// console.log(\"++++++++++++++++++++++++++++++\");\r\n\t\t\t// console.log(\"My Y is\");\r\n\t\t\t// console.log(y);\r\n\t\t\t// console.log((course && course.classesWatched && course.classesWatched[y].lessonNumber))\r\n\t\t\t// console.log(\"My INDEX is\");\r\n\t\t\t// console.log(i);\r\n\t\t\t// console.log(\"CLASS IS WATCHED:\")\r\n\t\t\t// console.log(course && course.classesWatched && course.classesWatched[y].complete)\r\n\t\t\t// console.log(\"-------------------------------\");\r\n\t\t\t\r\n\t\t\tif ((course && course.classesWatched && course.classesWatched[y].lessonNumber === i) && (course && course.classesWatched && course.classesWatched[y].complete)) {\r\n\t\t\t\t// console.log(\"We found a CLASS\");\r\n\t\t\t\treturn true\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\t// else {\r\n\t\t\t// \treturn <i className=\"far fa-circle\"></i>\r\n\t\t\t// }\r\n\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tlet classes = course && course.data && course.data.classes && course.data.classes.map((theClass, i) => {\r\n\t\treturn (\r\n\t\t\t<div className={lesson === (i + 1) ? styles.lessonActiveCtn : ''}>\r\n\t\t\t\t<div className={i % 2 === 0 ? styles.lesson : `${styles.lesson} ${styles.stripe}`} key={i}>\r\n\t\t\t\t\t<div className={styles.lessonComplete} onClick={() => dispatch(finishLessonAction(i, course && course.data && course.data._id, auth && auth.token))}>\r\n\t\t\t\t\t\t{/* {\ttheClass.watched.complete ? \r\n\t\t\t\t\t\t\t<i className=\"fas fa-check-circle complete\"></i>\r\n\t\t\t\t\t\t: <i className=\"far fa-circle\"></i>\r\n\t\t\t\t\t\t}  */}\r\n\t\t\t\t\t\t{/* {console.log(\"CHECKING LESSON\")} */}\r\n\t\t\t\t\t\t{checkLesson(i) ? (\r\n\t\t\t\t\t\t\t<i className=\"fas fa-check-circle complete\"></i>\r\n\t\t\t\t\t\t): <i className=\"far fa-circle\"></i>}\r\n\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Link className={lesson === (i + 1) ? `${styles.lessonLink} ${styles.lessonActive}` : styles.lessonLink} to={`/courses/${course.data.tag}/lessons/${theClass.lecture}`}>\r\n\t\t\t\t\t\t{/* <i className=\"fas fa-play-circle\"></i> */}\r\n\t\t\t\t\t\t<p>{theClass.title} <span className={styles.lessonTime}> <span className=\"d-none d-sm-block\">- ({theClass.duration} mins)</span></span></p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t});\r\n\r\n\tconst lessonContinue = () => {\r\n\t\tif ((lesson + 1) > totalLessons) {\r\n\t\t\t// console.log(lesson);\r\n\t\t\t// console.log(\"inside of if\");\r\n\t\t\treturn \t<Link to={lesson !== 1 ? `/courses/${course && course.data && course.data.tag}/lessons/${lesson - 1}`: '#'}><h1><i className=\"fas fa-arrow-left\"></i> Previous Lesson </h1></Link>\r\n\r\n\t\t} else {\r\n\t\t\t// console.log(\"inside of else\");\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Link to={lesson !== 1 ? `/courses/${course && course.data && course.data.tag}/lessons/${lesson - 1}`: '#'}><h1><i className=\"fas fa-arrow-left\"></i> Previous Lesson </h1></Link>\r\n\t\t\t\t\t<Link to={`/courses/${course && course.data && course.data.tag}/lessons/${lesson + 1}`}><h1>Next Lesson <i className=\"fas fa-arrow-right\"></i></h1></Link>\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tconst checkCourseAccess = auth && auth.coursesOwned && auth.coursesOwned.length > 0 && auth.coursesOwned.find((theCourse) => {\r\n\t\treturn theCourse.tag === courseTag\r\n\t});\r\n\r\n\t// console.log(checkCourseAccess);\r\n\r\n\t// const percentageWatched = () => {\r\n\t// \tif (course && course.data && course.data.classes) {\r\n\t// \t\tconst totalLessons = course && course.data && course.data.classes.length;\r\n\r\n\t// \t\tlet totalLessonsWatched = 0;\r\n\r\n\t// \t\tfor (let i = 0; i < course.data.classes.length; i++) {\r\n\t// \t\t\t//  console.log(course.data.classes[i]);\r\n\t// \t\t\tif (course.data.classes[i].watched.length > 0 && course.data.classes[i].watched[0].complete) {\r\n\t// \t\t\t\ttotalLessonsWatched += 1;\r\n\t// \t\t\t}\r\n\t// \t\t}\r\n\r\n\t// \t\treturn (totalLessonsWatched * 100 / totalLessons).toFixed(0);\r\n\t// \t}\r\n\t// }\r\n\r\n\r\n\tconst redirectUser = () => {\r\n\t\tif (auth && auth.user && auth.user.role !== \"admin\" && !checkCourseAccess && !auth.membership.active && page.loaded) {\r\n\t\t\treturn <Redirect to=\"/courses\" />\r\n\t\t}\r\n\t}\r\n\r\n\t// console.log(course.classesWatched);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SecondHeader />\r\n\t\t\t<div className={`container-fluid ${styles.courseLesson}`}>\r\n\t\t\t\t<div className={`row ${styles.classesCol}`}>\r\n\t\t\t\t\t<div className={styles.courseLinksCtn}>\r\n\t\t\t\t\t\t<h1><i className=\"far fa-play-circle\"></i><span>{course && course.data && course.data.name}</span></h1>\r\n\r\n\t\t\t\t\t\t<h5 className={styles.courseCurriculum}>Progress: {course && course.courseProgress}% <span>complete</span></h5>\r\n\t\t\t\t\t\t<div className={styles.lessonsCtn}>\r\n\t\t\t\t\t\t\t{classes}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={`${styles.courseLinksCtn} ${styles.backup}`}>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={styles.courseMainVideoCtn}>\r\n\t\t\t\t\t\t<div className={styles.nextPrevButtonsCtn}>\r\n\t\t\t\t\t\t\t{lessonContinue()}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={styles.currentLessonTitle}>\r\n\t\t\t\t\t\t\t<i class=\"fas fa-chalkboard-teacher\"></i>\r\n\t\t\t\t\t\t\t<p>{course && course.data && course.data.classes && course.data.classes[lesson - 1].title}</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className={`${styles.videoIframe} embed-responsive embed-responsive-16by9`}>\r\n\t\t\t\t\t\t\t<iframe className=\"embed-responsive-item\" id=\"iframe1\" style={{display: 'flex'}} src={course && course.data && course.data.classes && course.data.classes[lesson - 1].url} width=\"1024\" height=\"768\" frameBorder=\"0\" allow=\"autoplay; fullscreen\" allowFullScreen title=\"courseClass\"></iframe>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Fragment>\r\n\t)\r\n\r\n}\r\n\r\n// const mapStateToProps = state => ({\r\n// \tcourse: state.courses,\r\n// \tauth: state.auth\r\n// \t// profile: state.profile\r\n// });\r\n\r\nexport default CourseLessons;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Courses.js",["303","304","305","306","307"],"import React, { Fragment, useEffect, useState } from 'react';\r\nimport { getCourses } from '../../actions/courses';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { Col } from 'react-bootstrap';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport Loader from '../utils/Loader';\r\nimport { Form } from 'react-bootstrap';\r\nimport CourseCard from './CourseCard';\r\nimport './Courses.css';\r\n\r\nconst Courses = () => {\r\n  const dispatch = useDispatch();\r\n  const courses = useSelector((state) => state.courses);\r\n  const { loading, all, coursesLoaded } = courses;\r\n\r\n  const [stateCourses, setStateCourses] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!coursesLoaded) {\r\n      dispatch(getCourses());\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      const sortedCourses = [...all];\r\n\r\n      sortedCourses.length > 0 &&\r\n        sortedCourses.sort((a, b) => {\r\n          return a.position - b.position;\r\n        });\r\n\r\n      setStateCourses(sortedCourses);\r\n    }\r\n  }, [loading]);\r\n\r\n  console.log(courses);\r\n  const images = require.context('../../../../uploads/courses/', true);\r\n\r\n  const allCourses = stateCourses.map((course, index) => {\r\n    let img = '';\r\n    try {\r\n      img = images(`./${course.tag}.jpg`);\r\n    } catch (error) {\r\n      img = images(`./default-course.jpg`);\r\n    }\r\n\r\n    // let img = images(`./${course.tag}.jpg`);\r\n    // let img = `/images/${course.tag}.jpg`;\r\n    if (course.tag !== 'monthly-plan' && course.tag !== 'yearly-plan') {\r\n      return (\r\n        <CourseCard\r\n          name={course.name}\r\n          price={course.price}\r\n          key={index}\r\n          tag={course.tag}\r\n          courseLevel={course.courseLevel}\r\n        />\r\n        // <div\r\n        //   className=\"offset-1 col-10 offset-md-0 col-md-4 col-lg-3\"\r\n        //   key={index}\r\n        // >\r\n        //   <div className=\"cardBorder\">\r\n        //     <div className=\"courseThumbnail courseFeatured1\">\r\n        //       <Link to={`/courses/${course.tag}`}>\r\n        //         <img src={img.default} alt=\"courseThumbnail\" />\r\n        //       </Link>\r\n        //     </div>\r\n        //     <div className=\"courseTitleCtn\">\r\n        //       <Link to={`/courses/${course.tag}`}>{course.name}</Link>\r\n        //     </div>\r\n        //     <div className=\"separator\"></div>\r\n        //     <div className=\"priceCtn\">\r\n        //       <span className=\"studentNumbers\">\r\n        //         <i className=\"fas fa-user\"></i> Telmo Sampaio\r\n        //       </span>\r\n        //       <span className=\"price\">${course.price}</span>\r\n        //     </div>\r\n        //   </div>\r\n        // </div>\r\n      );\r\n    }\r\n  });\r\n\r\n  const findCourse = (e) => {\r\n    console.log(e.target.value);\r\n    const text = e.target.value.toLowerCase();\r\n    console.log(text);\r\n    const filteredCourses =\r\n      courses &&\r\n      courses.all.filter((course) => {\r\n        console.log(course.name);\r\n        return course.name.toLowerCase().indexOf(text) > -1;\r\n      });\r\n\r\n    console.log(filteredCourses);\r\n    setStateCourses(filteredCourses);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SecondHeader />\r\n      <div className=\"main-container\">\r\n        <div className=\"courses container\">\r\n          <div className=\"row\">\r\n            <Col md={4} lg={3} className=\"offset-1 my-4 col-10 offset-md-0\">\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"Find a course\"\r\n                onChange={findCourse}\r\n              />\r\n            </Col>\r\n          </div>\r\n          <div className=\"row\">\r\n            {loading ? (\r\n              <Loader />\r\n            ) : allCourses.length < 1 ? (\r\n              <div className=\"col-6\">\r\n                <h2>No Courses found</h2>\r\n              </div>\r\n            ) : (\r\n              allCourses\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Courses;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Logout.js",["308","309"],"import React, { useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport store from '../../store';\r\nimport { logout } from '../../actions/auth';\r\n\r\nconst Logout =  ({ history }) => {\r\n\r\n  useEffect( () => {\r\n    store.dispatch(logout());\r\n    history.push('/');\r\n  }, []);\r\n\r\n  // if(!isAuthenticated) {\r\n  //   return <Redirect to=\"/\" /> \r\n  // }\r\n  return (\r\n    <h1>Logout</h1>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isAuthenticated: state.auth.isAuthenticated\r\n});\r\n\r\nexport default connect(mapStateToProps)(Logout);","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Login.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\MembershipSuccess.js",["310","311","312","313"],"import React, {Fragment, useEffect} from 'react';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport { getCoursesOwned } from '../../actions/courses';\r\nimport { resetPaymentResult } from '../../actions/payments';\r\nimport { connect } from 'react-redux';\r\nimport store from '../../store';\r\n\r\nconst MembershipSuccess = ({auth, payment}) => {\r\n\r\n  return (\r\n    <Fragment>\r\n      <SecondHeader />\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <h1>Your membership is now active</h1>\r\n            <h1>You will receive an email soon</h1>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: state.auth,\r\n  active: state.auth.active,\r\n  courses: state.courses,\r\n  payment: state.payment\r\n});\r\n\r\nexport default connect(mapStateToProps)(MembershipSuccess);\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Membership.js",["314","315","316","317","318"],"import React, { Fragment, useState, useEffect } from 'react';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { register } from '../../actions/auth';\r\nimport './Membership.css';\r\n\r\nconst Membership = ({history}) => {\r\n\r\n\tconst dispatch = useDispatch();\r\n  const auth = useSelector((state) => state.auth);\r\n  const { membership } = auth;\r\n\r\n\tconst [formData, setFormData] = useState({\r\n\t\tname: '',\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t\tpasswordConfirm: '',\r\n\t\trandNumber1: Math.floor(Math.random() * 10 + 1),\r\n\t\trandNumber2: Math.floor(Math.random() * 10 + 1),\r\n\t\tmessage: '',\r\n\t\tresult: 0\r\n\t});\r\n\tconst { name, email, password, passwordConfirm, randNumber1, randNumber2, message, result } = formData;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (message) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t// resetMessage();\r\n\t\t\t\tconsole.log(\"message deleted\");\r\n\t\t\t\tsetFormData({ ...formData, message: \"\" });\r\n\t\t\t}, 5000);\r\n\t\t}\r\n\t}, [message])\r\n\r\n\tconst onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n\tconst onSubmit = async e => {\r\n\t\te.preventDefault();\r\n\t\tconsole.log(\"Inside register\")\r\n\t\tif (password !== passwordConfirm) {\r\n\t\t\t// setAlert(\"Passwords do not match\", 'danger', 3000);\r\n\t\t\tconsole.log(\"passwords\")\r\n\t\t\tsetFormData({ ...formData, message: \"Passwords do not match\" });\r\n\t\t} else if ((randNumber1 + randNumber2) !== parseInt(result)) {\r\n\t\t\tconsole.log(\"results\")\r\n\t\t\tconsole.log(\"Random Number 1\", randNumber1);\r\n\t\t\tconsole.log(typeof randNumber1);\r\n\t\t\tconsole.log(\"Random Number 2\", randNumber2);\r\n\t\t\tconsole.log(\"Result\", result);\r\n\t\t\tconsole.log(randNumber1 === result);\r\n\t\t\tconsole.log(randNumber1 !== result);\r\n\t\t\tsetFormData({ ...formData, message: \"You are a robot!\" });\r\n\r\n\r\n\t\t} else {\r\n\t\t\tconsole.log(\"Inside register action\")\r\n\t\t\tregister({ name, email, password, passwordConfirm });\r\n\t\t}\r\n\t}\r\n\r\n\tconst checkResult = (e) => {\r\n\t\tsetFormData({ ...formData, result: e.target.value })\r\n\t}\r\n\r\n\t//Redirect if logged in\r\n\t// console.log(result);\r\n\t// console.log(randNumber1)\r\n\t// console.log(randNumber2)\r\n\t\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SecondHeader />\r\n\t\t\t<div className=\"membershipCtn\">\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"offset-1 col-10 offset-md-0 col-lg-5 offset-lg-1 col-md-10 offset-md-1\">\r\n\t\t\t\t\t\t\t<div className=\"annualCtn\">\r\n\t\t\t\t\t\t\t\t<h2 className=\"membershipRecommended\">MOST POPULAR</h2>\r\n\t\t\t\t\t\t\t\t<h3 className=\"membershipTitle\">Yearly</h3>\r\n\t\t\t\t\t\t\t\t<h1 className=\"membershipPrice\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"membershipDollar\">$</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"membershipPriceValue\">9<span>.99</span></span>\r\n\t\t\t\t\t\t\t\t\t<span>/month</span>\r\n\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<span className=\"membershipPriceToPay\">$119.88</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"membershipBilled\">BILLED YEARLY</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<ul className=\"membershipFeatures\">\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-check\"></i>Access all courses from Library</li>\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-check\"></i>New courses every month</li>\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-check\"></i>Cancel at any time</li>\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-check\"></i>Download courses project files</li>\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-check\"></i>30% Discount in all courses</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t{ membership.status === 'Active' && membership.planId === 'yearly-plan-id' ? (\r\n\t\t\t\t\t\t\t\t\t<button className=\"membershipBuyButton membershipBtnDisable\">Currently Active</button>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<Link className=\"membershipBuyButton\" to=\"/membership/yearly\">Start Plan</Link>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"offset-1 col-10 offset-md-0 col-lg-5 col-md-10 offset-md-1\">\r\n\t\t\t\t\t\t\t<div className=\"monthlyCtn\">\r\n\t\t\t\t\t\t\t\t<h3 className=\"membershipTitle\">Monthly</h3>\r\n\t\t\t\t\t\t\t\t<h1 className=\"membershipPrice\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"membershipDollar\">$</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"membershipPriceValue\">22<span>.99</span></span>\r\n\t\t\t\t\t\t\t\t\t<span>/Month</span>\r\n\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<ul className=\"membershipFeatures\">\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-check\"></i>Access all courses from Library</li>\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-check\"></i>New courses every month</li>\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-check\"></i>Cancel at any time</li>\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-times\"></i><span style={{textDecoration: \"line-through\"}}>Download courses project files</span></li>\r\n\t\t\t\t\t\t\t\t\t<li><i className=\"fa fa-times\"></i><span style={{textDecoration: \"line-through\"}}>30% Discount in all courses</span></li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t{ membership.status === 'Active' && (membership.planId === 'monthly-plan-id' || membership.planId === 'yearly-plan-id') ? (\r\n\t\t\t\t\t\t\t\t\t<button className=\"membershipBuyButton membershipBtnDisable\">{membership.planId === 'yearly-plan-id' ? \"Yearly plan active\" : \"Currently Active\"}</button>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<Link className=\"membershipBuyButton\" to=\"/membership/monthly\">Start Plan</Link>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default Membership;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\CheckoutSuccess.js",["319","320","321","322"],"import React, { useState, useEffect} from 'react';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getCoursesOwned } from '../../actions/courses';\r\nimport { resetPaymentResult } from '../../actions/payments';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport { Card } from 'react-bootstrap'\r\nimport './CheckoutSuccess.css';\r\n\r\nconst CheckoutSuccess = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n  const payment = useSelector(state => state.payment);\r\n\r\n  const { result } = payment;\r\n\r\n  // const [page, setPage] = useState({\r\n  //   loaded: false\r\n  // });\r\n\r\n  useEffect(() => {\r\n    //     console.log(auth);\r\n    // console.log(active == 'notActive');\r\n    // console.log(!auth.loading)\r\n\r\n    // store.dispatch(getCoursesOwned(auth && auth.user && auth.user._id));\r\n    // console.log(auth.user.name);\r\n\r\n    \r\n\r\n    if(!result) {\r\n      history.push(\"/courses\");\r\n    }\r\n\r\n    dispatch(resetPaymentResult());\r\n    \r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   if( auth && auth.isAuthenticated ) {\r\n  //     setPage({\r\n  //       loaded: true\r\n  //     })\r\n  //   }\r\n    \r\n  // }, [auth && auth.isAuthenticated]);\r\n\r\n  // if( auth && !auth.isAuthenticated && page.loaded) {\r\n  //   return <Redirect to=\"/\" />\r\n  // }\r\n\r\n  return (\r\n    <>\r\n      <SecondHeader />\r\n      <div className=\"checkoutSuccessCtn\">\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12 checkoutSuccess\">\r\n            <Card>\r\n              <Card.Header></Card.Header>\r\n              <Card.Body>\r\n                <h1>Thank you! Your Order is Complete</h1>\r\n                <p>You will receive an email confirmation shortly.</p>\r\n                <Link className=\"btn checkoutSuccessBtn\" to=\"/courses\">Start Learning</Link>\r\n              </Card.Body>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n// const mapStateToProps = state => ({\r\n//   auth: state.auth,\r\n//   active: state.auth.active,\r\n//   courses: state.courses,\r\n//   payment: state.payment\r\n// });\r\n\r\nexport default CheckoutSuccess;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Checkout.js",["323","324","325","326","327","328","329","330"],"import React, { Fragment, useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport DropIn from 'braintree-web-drop-in-react';\r\nimport { Form, Col, Button } from 'react-bootstrap';\r\nimport './Checkout.css';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport {\r\n  payAction,\r\n  processPayment,\r\n  findCouponIdAction,\r\n} from '../../actions/payments';\r\nimport { removeCheckout, loadCheckout } from '../../actions/courses';\r\nimport { GET_COUPON_BY_ID_RESET } from '../../contants/couponConstants';\r\nimport MessageDisplay from '../utils/MessageDisplay';\r\n\r\nconst Membership = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const payment = useSelector((state) => state.payment);\r\n  const auth = useSelector((state) => state.auth);\r\n  const { user } = auth;\r\n\r\n  const {\r\n    coupon,\r\n    checkoutPrice,\r\n    checkout,\r\n    loading,\r\n    result,\r\n    notification,\r\n    buttonLoading\r\n  } = payment;\r\n\r\n  const [data, setData] = useState({\r\n    instance: {},\r\n  });\r\n\r\n  const [paymentState, setPaymentState] = useState({\r\n    code: '',\r\n    checkoutBackup: [],\r\n    checkoutSale: [],\r\n    coursesInCheckout: [],\r\n    finalPrice: 0,\r\n  });\r\n\r\n  const [disableButton, setDisableButton] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user && user._id) {\r\n      dispatch(payAction(user._id));\r\n      dispatch(loadCheckout(user._id));\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    const coursesInCheckout = [];\r\n    for (let i = 0; i < checkout.length; i++) {\r\n      coursesInCheckout.push(checkout[i]._id);\r\n    }\r\n\r\n    setPaymentState({\r\n      ...paymentState,\r\n      checkoutBackup: [...checkout],\r\n      coursesInCheckout: coursesInCheckout,\r\n      finalPrice: checkoutPrice,\r\n    });\r\n\r\n    console.log('CHECKOUT PRICE IS SET');\r\n  }, [checkoutPrice, checkout]);\r\n\r\n  useEffect(() => {\r\n    const coursesInCheckout = [];\r\n    if (couponIsValid() && coupon && coupon.active) {\r\n      const checkoutCopy = [...paymentState.checkoutBackup];\r\n\r\n      const newArray = [];\r\n\r\n      const coursesDiscounted = [];\r\n      for (let i = 0; i < checkoutCopy.length; i++) {\r\n        newArray.push(checkoutCopy[i].price);\r\n        coursesInCheckout.push(checkoutCopy[i]._id);\r\n        for (let j = 0; j < coupon.courses.length; j++) {\r\n          if (\r\n            coupon.courses[j].name === 'All Courses' ||\r\n            JSON.stringify(checkoutCopy[i]._id) ===\r\n              JSON.stringify(coupon.courses[j].courseId)\r\n          ) {\r\n            newArray[i] =\r\n              coupon.amountType === 'percentage'\r\n                ? newArray[i] - (newArray[i] * parseInt(coupon.amount)) / 100\r\n                : newArray[i] - parseInt(coupon.amount);\r\n            // course.price = 10\r\n            coursesDiscounted.push(coupon.courses[j].courseId);\r\n          }\r\n        }\r\n      }\r\n\r\n      console.log(checkoutCopy);\r\n      console.log(checkout);\r\n\r\n      const finalPriceWithDiscount = newArray.reduce((total, price) => {\r\n        console.log('Total price is: ' + total);\r\n        console.log('Course price is: ' + price);\r\n        return parseFloat(total) + parseFloat(price);\r\n      }, 0);\r\n      console.log('finalPriceWithDiscount+++++++++');\r\n      console.log(finalPriceWithDiscount);\r\n\r\n      setPaymentState({\r\n        ...paymentState,\r\n        checkoutSale: coursesDiscounted.length > 0 ? [...newArray] : [],\r\n        coursesInCheckout: [...coursesInCheckout],\r\n        finalPrice: finalPriceWithDiscount,\r\n      });\r\n    } else {\r\n      setPaymentState({\r\n        ...paymentState,\r\n        checkoutSale: [],\r\n        // coursesInCheckout: [...coursesInCheckout],\r\n        finalPrice: checkoutPrice,\r\n      });\r\n    }\r\n  }, [coupon]);\r\n\r\n  const couponIsValid = () => {\r\n    if (coupon && coupon.active) {\r\n      const today = new Date();\r\n      const couponDate = new Date(coupon.date);\r\n      const dateInPast = function (future, present) {\r\n        if (future.setHours(0, 0, 0, 0) <= present.setHours(0, 0, 0, 0)) {\r\n          return true;\r\n        }\r\n        return false;\r\n      };\r\n      console.log('Date in past');\r\n      console.log(dateInPast(couponDate, today));\r\n\r\n      return (\r\n        coupon.active && coupon.available > 0 && !dateInPast(couponDate, today)\r\n      );\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (result) {\r\n      history.push('/cart/checkout/success');\r\n    }\r\n  }, [result]);\r\n\r\n  const buy = () => {\r\n    console.log(data.instance);\r\n    console.log(Object.keys(data.instance).length !== 0);\r\n    console.log(data.instance.constructor === Object);\r\n    console.log(disableButton);\r\n    \r\n    let nonce;\r\n    let getNonce =\r\n      Object.keys(data.instance).length !== 0 &&\r\n      data.instance\r\n        .requestPaymentMethod()\r\n        .then(async (data) => {\r\n          console.log(data);\r\n          nonce = data.nonce;\r\n\r\n          // console.log('send nonce and total to process ', nonce);\r\n          const paymentData = {\r\n            paymentMethodNonce: nonce,\r\n            amount: checkoutPrice,\r\n          };\r\n\r\n          // processPayment(userId, token, paymentData)\r\n          // processPayment('131asdasd', 'adasdadad', paymentData)\r\n          setDisableButton(true);\r\n          await dispatch(\r\n            processPayment(\r\n              paymentData,\r\n              paymentState.code,\r\n              paymentState.coursesInCheckout\r\n            )\r\n          );\r\n\r\n          console.log('before redirect');\r\n          // console.log( payment.result );\r\n          // console.log( payment.result.success );\r\n\r\n          \r\n        })\r\n        .catch((error) => {\r\n          console.log('dropin error: ', error);\r\n        });\r\n  };\r\n\r\n  const showDropIn = () =>\r\n    payment.paymentToken && (\r\n      <Fragment>\r\n        <DropIn\r\n          options={{\r\n            authorization: payment.paymentToken,\r\n            paypal: {\r\n              flow: 'vault',\r\n            },\r\n          }}\r\n          onInstance={(instance) => (data.instance = instance)}\r\n        />\r\n        { !disableButton && \r\n        <button\r\n          onClick={buy}\r\n          className={\r\n            disableButton ? 'btn btn-primary disabled mt-4' : 'btn btn-primary mt-4'\r\n          }\r\n        >Finish Payment</button> }\r\n        {buttonLoading && (\r\n          <button className=\"btn btn-primary mt-4\">\r\n            <div class=\"spinner-border spinner\" role=\"status\">\r\n              <span class=\"sr-only\">Processing payment...</span>\r\n            </div>\r\n            Processing payment...\r\n          </button>\r\n        )}\r\n      </Fragment>\r\n    );\r\n\r\n  const checkoutItems = paymentState.checkoutBackup.map((course, i) => {\r\n    let price =\r\n      paymentState.checkoutSale.length > 0 && paymentState.checkoutSale[i];\r\n    let sale = false;\r\n    if (\r\n      paymentState.checkoutSale.length > 0 &&\r\n      paymentState.checkoutBackup[i].price != paymentState.checkoutSale[i]\r\n    ) {\r\n      sale = true;\r\n    }\r\n\r\n    return (\r\n      <div className=\"courseInCheckout\" key={i}>\r\n        <div>\r\n          <span\r\n            className=\"courseDelete\"\r\n            onClick={() => refreshCheckout(course._id)}\r\n          >\r\n            <i className=\"fas fa-trash\"></i>\r\n          </span>\r\n          <h3 className=\"checkoutCourse\">{course.name}</h3>\r\n        </div>\r\n        <span className=\"coursePrice\">\r\n          {' '}\r\n          {sale ? (\r\n            <>\r\n              <del>${paymentState.checkoutBackup[i].price}</del>\r\n              <span>${price}</span>\r\n            </>\r\n          ) : (\r\n            <span>${paymentState.checkoutBackup[i].price}</span>\r\n          )}\r\n        </span>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  const refreshCheckout = async (courseId) => {\r\n    await dispatch(removeCheckout(courseId));\r\n    dispatch(loadCheckout());\r\n  };\r\n  console.log(auth && auth.user && !auth.user.authenticated);\r\n\r\n  if (auth && !auth.isAuthenticated && !auth.loading) {\r\n    console.log('inside register redirect ');\r\n    return <Redirect to=\"/register\" />;\r\n  }\r\n  //Redirect if payment success\r\n\r\n  // console.log(auth.user);\r\n  // console.log( auth.token );\r\n  // console.log(data);\r\n  // console.log(paymentState);\r\n\r\n  const checkCoupon = (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: GET_COUPON_BY_ID_RESET });\r\n    dispatch(findCouponIdAction(paymentState.code));\r\n  };\r\n\r\n  // const finalPrice = () => {\r\n  //   if(coupon && coupon.active) {\r\n  //     setPaymentState({\r\n  //       finalPrice:  coupon.amountType === \"percentage\" ? (\r\n  //         payment.checkoutPrice - payment.checkoutPrice * coupon.amount\r\n  //       ) :  payment.checkoutPrice - coupon.amount\r\n  //     })\r\n  //   }\r\n  // }\r\n\r\n  // console.log(checkout)\r\n  // console.log(paymentState)\r\n  // console.log(data.instance);\r\n  console.log(typeof checkoutItems);\r\n  console.log(paymentState);\r\n  // if (payment && payment.result) {\r\n  //   console.log(\"inside of redirect to success\");\r\n  //   return <Redirect to=\"/cart/checkout/success\" />\r\n  // }\r\n\r\n  return (\r\n    <Fragment>\r\n      <SecondHeader />\r\n      <div className=\"checkoutCtn\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            {payment && payment.checkout.length > 0 ? (\r\n              <div className=\"col-12 col-lg-6 my-4\">\r\n                <div className={`paymentCtn ${loading ? 'paymentLoading' : ''}`}>\r\n                  <h1>Confirm your purchase:</h1>\r\n                  {showDropIn()}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            <div\r\n              className={\r\n                payment && payment.checkout.length > 0\r\n                  ? 'col-12 col-lg-6 my-4'\r\n                  :  'offset-1 col-10 col-md-8 offset-md-2'\r\n              }\r\n            >\r\n              <div className=\"paperGray\">\r\n              <h1 className=\"basketTitle\">Products in Basket:</h1>\r\n              {checkoutItems && checkoutItems.length > 0 ? (\r\n                checkoutItems\r\n              ) : (\r\n                <Fragment>\r\n                  <h1>Your basket is empty</h1>{' '}\r\n                  <Button className=\"mt-3\">\r\n                  <Link to=\"/courses\">Search courses</Link>\r\n                  </Button>\r\n                </Fragment>\r\n              )}\r\n\r\n              {checkoutItems && checkoutItems.length > 0 ? (\r\n                <>\r\n                  \r\n\r\n                  {/* {message && <h5 className=\"my-4\">Coupon is not valid</h5>} */}\r\n                  <div className=\"checkoutPrice\">\r\n                    Total:{' '}\r\n                    {couponIsValid() && paymentState.checkoutSale.length > 0 ? (\r\n                      <del>${checkoutPrice}</del>\r\n                    ) : null}{' '}\r\n                    ${paymentState.finalPrice}\r\n                  </div>\r\n                  <div className=\"couponCtn\">\r\n                  <Form onSubmit={checkCoupon}>\r\n                    <Form.Row className=\"align-items-center m-0\">\r\n                    <div className=\"couponInputCol\">\r\n                      <Form.Control\r\n                        required\r\n                      \r\n                        id=\"inlineFormInput\"\r\n                        placeholder=\"Enter coupon code\"\r\n                        onChange={(e) =>\r\n                          setPaymentState({ ...paymentState, code: e.target.value })\r\n                        }\r\n                      />\r\n                    </div>\r\n                    {/* <input\r\n                      required\r\n                      type=\"text\"\r\n                      placeholder=\"Enter coupon code\"\r\n                    /> */}\r\n                    <div>\r\n                      <Button variant='info' type=\"submit\">Use coupon</Button>\r\n                    </div>\r\n                    </Form.Row>\r\n                  </Form>\r\n\r\n                  {couponIsValid() && notification && notification.status === \"success\" && paymentState.checkoutSale.length > 0 ? (\r\n                    // <h5 className=\"my-4\">\r\n                    //   Coupon {coupon.code} - {coupon.name} applied\r\n                    // </h5>\r\n                    <MessageDisplay\r\n\t\t\t\t\t\t\t\t\t\t\theader=\"Coupon applied\"\r\n\t\t\t\t\t\t\t\t\t\t\tstatus={notification.status} \r\n\t\t\t\t\t\t\t\t\t\t\tmessage={coupon.name}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n                  ) : notification.status === \"fail\" ? (\r\n                    // <h5 className=\"my-4\">Coupon is not valid</h5>\r\n                    <MessageDisplay\r\n\t\t\t\t\t\t\t\t\t\t\theader=\"Error\"\r\n\t\t\t\t\t\t\t\t\t\t\tstatus={notification.status} \r\n\t\t\t\t\t\t\t\t\t\t\tmessage={notification.message}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n                  ) : coupon && coupon.active && !couponIsValid() ? (\r\n                    <MessageDisplay\r\n\t\t\t\t\t\t\t\t\t\t\theader=\"Error\"\r\n\t\t\t\t\t\t\t\t\t\t\tstatus=\"fail\"\r\n\t\t\t\t\t\t\t\t\t\t\tmessage=\"Coupon not valid\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n                  ) : null}\r\n                  </div>\r\n                </>\r\n              ) : null}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Membership;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\ForgotPassword.js",["331","332","333"],"import React, { Fragment, useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { fgt_pass } from '../../actions/auth';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport { Col } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport styles from './ForgotPassword.module.css';\r\nimport MessageDisplay from '../utils/MessageDisplay';\r\n\r\nconst ForgotPassword = () => {\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector((state) => state.auth);\r\n  const { notification, loading } = auth;\r\n  \r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n  });\r\n\r\n  const [message, setMessage] = useState('');\r\n\r\n  // useEffect(() => {\r\n  //   console.log('reseting the message, in forgotpass');\r\n  //   resetMessage();\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   setMessage(auth.message);\r\n  // }, [auth.message]);\r\n\r\n  const { email } = formData;\r\n  const onChange = (e) =>\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    dispatch(fgt_pass({ email }));\r\n    // removeMessage();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SecondHeader />\r\n      <div className={styles.forgotPasswordCtn}>\r\n        {/* <h1 className=\"large text-primary\">Forgot Password</h1>\r\n        <p className=\"lead\"><i className=\"fas fa-user\"></i> Please enter your email address</p> */}\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <Col xs={12} md={{ span: 6, offset: 3 }}>\r\n              <div className={`card ${styles.forgotPasswordCard}`}>\r\n                <h1 className={styles.forgotTitle}>\r\n                  Enter email address\r\n                </h1>\r\n                <form className=\"form\" onSubmit={(e) => onSubmit(e)}>\r\n                  <div className=\"form-group\">\r\n                    <input\r\n                      type=\"email\"\r\n                      placeholder=\"Email Address\"\r\n                      name=\"email\"\r\n                      required\r\n                      onChange={(e) => onChange(e)}\r\n                    />\r\n                  </div>\r\n                  <input\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary\"\r\n                    value=\"Reset Password\"\r\n                  />\r\n                </form>\r\n                {!loading && notification && notification.message && (\r\n                  <MessageDisplay\r\n                    header=\"Reset Password\"\r\n                    status={notification.status} \r\n                    message={notification.message}\r\n                  />\r\n                )}\r\n              </div>\r\n              <Col xs={12} className={styles.fgtPasswordButtons}>\r\n\t\t\t\t\t\t\t  <Link to=\"/login\">Login</Link>\r\n\t\t\t\t\t\t\t  <span className={styles.fgtSeparator}>|</span>\r\n\t\t\t\t\t\t\t  <Link to=\"/register\">Register</Link>\r\n\t\t\t\t\t\t  </Col>\r\n            </Col>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default ForgotPassword;","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\ResetPassword.js",["334","335","336"],"import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams, Redirect } from 'react-router-dom';\r\nimport { reset_pass } from '../../actions/auth';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport styles from './ResetPassword.module.css';\r\nimport MessageDisplay from '../utils/MessageDisplay';\r\nimport { RESET_NOTIFICATION } from '../../contants/authConstants';\r\n\r\nconst ResetPassword = ({history}) => {\r\n  const [formData, setFormData] = useState({\r\n    password: '',\r\n    passwordConfirm: '',\r\n    formMessage: ''\r\n  });\r\n\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector(state => state.auth);\r\n  const { isAuthenticated, notification, loading } = auth;\r\n\r\n  let { token } = useParams();\r\n\r\n  useEffect(() => {\r\n    if(notification && notification.status) {\r\n      dispatch({type: RESET_NOTIFICATION, payload: { status: \"\", message: \"\"}})\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   if (isAuthenticated) {\r\n  //     history.push(\"/\");\r\n  //   } else if(message === 'Password reseted') {\r\n  //     setTimeout(() => {\r\n  //       return <Redirect to=\"/profile\" />\r\n  //     }, 3000);\r\n  //   }\r\n    \r\n  // }, [isAuthenticated, message])\r\n\r\n  const { password, passwordConfirm, formMessage } = formData;\r\n  const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value, showError: false, formMessage: '' });\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (password !== passwordConfirm) {\r\n      setFormData({ ...formData, formMessage: 'Passwords are not the same' });\r\n    } else {\r\n      dispatch(reset_pass({ password, passwordConfirm, token }));\r\n      setFormData({ ...formData, password: '', passwordConfirm: '', formMessage: '' });\r\n    }\r\n\r\n  }\r\n  console.log(\"My token frontend is \" + token);\r\n\r\n  // if (isAuthenticated) {\r\n  //   return <Redirect to=\"/\" />\r\n  // } else if(message === 'Password reseted') {\r\n  //   setTimeout(() => {\r\n  //     return <Redirect to=\"/profile\" />\r\n  //   }, 3000);\r\n  // }\r\n\r\n  return (\r\n    <>\r\n       <SecondHeader />\r\n      {/*<div className=\"forgotPasswordCtn\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6 offset-3\">\r\n              <div className=\"card forgotPasswordCard\">\r\n                <h1 className=\"loginTitle\"><i className=\"fas fa-user\"></i> Please! enter your new password</h1>\r\n                \r\n                <form className=\"form\" onSubmit={e => onSubmit(e)}>\r\n                  <div className=\"form-group\">\r\n                    <input type=\"password\" placeholder=\"Password\" name=\"password\" required onChange={e => onChange(e)} />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <input type=\"password\" placeholder=\"Confirm Password\" name=\"passwordConfirm\" required onChange={e => onChange(e)} />\r\n                  </div>\r\n                  <input type=\"submit\" className=\"btn btn-success\" value=\"Update Password\" />\r\n                </form>\r\n                {error && (\r\n                  <h1 className=\"passwordUpdateMessage\">{error}</h1>\r\n                )}\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div> */}\r\n\r\n      <div className={styles.forgotPasswordCtn}>\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col xs={12} md={{ span: 6, offset: 3 }}>\r\n\t\t\t\t\t\t\t<div className={`card ${styles.forgotPasswordCard}`}>\r\n\t\t\t\t\t\t\t\t<h1 className={styles.forgotPasswordTitle}>Welcome back</h1>\r\n\t\t\t\t\t\t\t\t<p>Please enter your new password</p>\r\n\t\t\t\t\t\t\t\t<form className=\"form\" onSubmit={e => onSubmit(e)}>\r\n                <div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\tminLength=\"6\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={e => onChange(e)}\r\n\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"passwordConfirm\"\r\n\t\t\t\t\t\t\t\t\t\t\tminLength=\"6\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={passwordConfirm}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={e => onChange(e)}\r\n\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Confirm Password\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<input type=\"submit\" className=\"btn btn-primary\" value=\"Update Password\" />\r\n\r\n\t\t\t\t\t\t\t\t\t{!loading && notification && notification.status && (\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<MessageDisplay\r\n\t\t\t\t\t\t\t\t\t\t\theader={notification.status === 'fail' ? 'Error' : 'Password Update Success'}\r\n\t\t\t\t\t\t\t\t\t\t\tstatus={notification.status} \r\n\t\t\t\t\t\t\t\t\t\t\tmessage={notification.message}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n                  {!loading && formMessage && (\r\n                  <MessageDisplay \r\n                    header=\"Error\"\r\n                    status=\"fail\" \r\n                    message={formMessage} \r\n                  />\r\n                )}\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t  </Row>\r\n\t\t\t  </Container>\r\n\t\t  </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ResetPassword;","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\ActivateEmail.js",["337","338","339"],"import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { activateEmailAction } from '../../actions/auth';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport Loader from '../utils/Loader';\r\n\r\nconst ActivateEmail = ({ history }) => {\r\n  const { token } = useParams();\r\n\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector(state => state.auth);\r\n  const { user, message, active, loading } = auth;\r\n\r\n  console.log(\"This is my token \" + token);\r\n  useEffect(() => {\r\n    console.log(\"This is My Message+++++\");\r\n    console.log(message);\r\n    dispatch(activateEmailAction(token));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"current message is\");\r\n    console.log(message);\r\n  }, [message]);\r\n\r\n  return (\r\n    <>\r\n      <SecondHeader />\r\n      <div className=\"container checkoutSuccessCtn\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12 checkoutSuccess\">\r\n            <h1>{message}</h1>\r\n            {loading ? <Loader /> : message === \"You are Activated\" ? (\r\n              <Link to='/courses' className='btn btn-success'>Start learning</Link>\r\n            ) : (\r\n                <Link to='/activate' className='btn btn-success'>Activate account</Link>\r\n              )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ActivateEmail;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Privacy.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Activate.js",["340","341","342"],"import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { activateEmail } from '../../actions/auth';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport { RESET_NOTIFICATION } from '../../contants/authConstants';\r\nimport {Card} from 'react-bootstrap';\r\nimport styles from './Activate.module.css';\r\n\r\nconst Activate = ({ history }) => {\r\n\r\n  // if (!isAuthenticated) {\r\n  //   return <Redirect to=\"/\" />\r\n  // }\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector(state => state.auth);\r\n  const { isAuthenticated, user, message, loading } = auth;\r\n\r\n  // useEffect(() => {\r\n  //   if(!isAuthenticated && !loading ) {\r\n  //     history.push('/');\r\n  //   }\r\n  // }, [isAuthenticated, loading])\r\n\r\n  useEffect(() => {\r\n    if(user && !loading) {\r\n      dispatch({ type: RESET_NOTIFICATION });\r\n    } else if (!loading && !user) {\r\n      history.push('/');\r\n    }\r\n  }, [user, loading])\r\n\r\n  const email = user && user.email;\r\n\r\n  const sendEmail = () => {\r\n    dispatch(activateEmail({ email }))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SecondHeader />\r\n      <div className=\"container-fluid checkoutSuccessCtn\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12 checkoutSuccess\">\r\n            <Card className={styles.cardCtn}>\r\n              <Card.Body>\r\n              <h1>Please confirm Email Address</h1>\r\n              <h4>Check your Email inbox, to activate your account</h4>\r\n              <p>Didn't received your email?</p>\r\n              <button className=\"btn btn-success\" onClick={sendEmail}>Resend Email Activation</button>\r\n              </Card.Body>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Activate;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\utils\\CookiePolicy.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\AdminCtn.js",["343"],"import React, { memo, useEffect } from 'react'\r\nimport AdminSidebar from './AdminSidebar';\r\nimport UserProfile from './UserProfile';\r\nimport Courses from './Courses';\r\nimport CourseCreate from './CourseCreate';\r\nimport CourseUpdate from './CourseUpdate';\r\nimport FeatureCourses from './FeatureCourses';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport { useSelector } from 'react-redux';\r\nimport AllUsers from './AllUsers';\r\nimport Sales from './Sales';\r\nimport Coupons from './Coupons';\r\nimport NewCoupon from './NewCoupon';\r\nimport EditCoupon from './EditCoupon';\r\nimport ActiveMemberships from './ActiveMemberships';\r\n\r\nconst AdminCtn = ({match, history}) => {\r\n  // console.log(match);\r\n\r\n  const auth = useSelector(state => state.auth);\r\n  const { active } = auth;\r\n\r\n  useEffect(() => {\r\n    if (active === 'notActive' && !auth.loading) {\r\n      console.log(\"inside redirect\");\r\n      history.push(\"/activate\");\r\n    } else if (auth && !auth.isAuthenticated && !auth.loading) {\r\n      history.push(\"/login\");\r\n    }\r\n  }, [auth, active]);\r\n\r\n  return (\r\n    <>\r\n      <SecondHeader />\r\n      <div className=\"profileCtn\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <AdminSidebar />\r\n            { (match.params.page === \"courses\" && !match.params.subPage) ? <Courses /> : null }\r\n            { match.params.page === \"courses\" ? (match.params.subPage === \"create\" ? <CourseCreate /> : null) : null }\r\n            { match.params.page === \"courses\" ? (match.params.subPage === \"update\" ? <CourseUpdate /> : null) : null }\r\n            { match.params.page === \"user\" ? <UserProfile /> : null }\r\n            { match.params.page === \"featureCourses\" ? <FeatureCourses /> : null }\r\n            { match.params.page === \"users\" ? <AllUsers /> : null }\r\n            { match.params.page === \"sales\" ? <Sales /> : null }\r\n            { match.params.page === \"coupons\" && !match.params.subPage ? <Coupons /> : null }\r\n            { match.params.page === \"coupons\" ? (match.params.subPage === \"new\" ? <NewCoupon /> : null) : null }\r\n            { match.params.page === \"coupons\" ? (match.params.subPage === \"edit\" ? <EditCoupon /> :null) : null }\r\n            { match.params.page === \"memberships\" ? <ActiveMemberships /> : null }\r\n            \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default memo(AdminCtn);\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\ProfileCtn.js",["344"],"import React, { memo, useEffect } from 'react'\r\nimport ProfileSidebar from './ProfileSidebar';\r\nimport Profile from './Profile';\r\nimport ProfileBilling from './ProfileBilling';\r\nimport ProfileCourses from './ProfileCourses';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst ProfileCtn = ({match, history}) => {\r\n  console.log(match);\r\n\r\n  const auth = useSelector(state => state.auth);\r\n  const { active } = auth;\r\n\r\n  useEffect(() => {\r\n    if (active === 'notActive' && !auth.loading) {\r\n      console.log(\"inside redirect\");\r\n      history.push(\"/activate\");\r\n    } else if (auth && !auth.isAuthenticated && !auth.loading) {\r\n      history.push(\"/login\");\r\n    }\r\n  }, [auth, active]);\r\n\r\n  return (\r\n    <>\r\n      <SecondHeader />\r\n      <div className=\"profileCtn\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <ProfileSidebar />\r\n            { match.params.page === \"courses\" ? <ProfileCourses /> \r\n            : match.params.page === \"billing\" ? <ProfileBilling />\r\n            : <Profile />}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default memo(ProfileCtn);\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\MembershipCheckout.js",["345","346","347","348","349"],"import React, { Fragment, useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector  } from 'react-redux';\r\nimport DropIn from 'braintree-web-drop-in-react';\r\nimport SecondHeader from '../partials/SecondHeader';\r\nimport { payAction, membershipPayment } from '../../actions/payments';\r\nimport { Card, Form, Button } from 'react-bootstrap';\r\nimport './MembershipCheckout.css';\r\n\r\nconst MembershipCheckout = ({history}) => {\r\n  \r\n  const dispatch = useDispatch();\r\n  const auth = useSelector((state) => state.auth);\r\n  const { loading, isAuthenticated, user, token } = auth;\r\n\r\n  const payment = useSelector((state) => state.payment);\r\n  const { paymentToken, buttonLoading, paymentComplete } = payment;\r\n  \r\n  const [data, setData] = useState({\r\n    instance: {}\r\n  });\r\n\r\n  const { duration } = useParams();\r\n\r\n  useEffect(() => {\r\n    dispatch(payAction());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"Loading is: \", !loading);\r\n    console.log(\"isAuthenticated is \", !isAuthenticated);\r\n\t\tif(!loading && !isAuthenticated) {\r\n\t\t\thistory.push('/register');\r\n\t\t}\r\n\t}, [history, loading, isAuthenticated])\r\n\r\n  const buy = (membershipDuration) => {\r\n    let nonce;\r\n    let getNonce = data.instance.requestPaymentMethod()\r\n      .then(data => {\r\n        console.log(\"Buy data is:\")\r\n        console.log(data);\r\n        nonce = data.nonce\r\n\r\n        // console.log('send nonce and total to process ', nonce);\r\n        const paymentData = {\r\n          paymentMethodNonce: nonce\r\n        }\r\n\r\n        // processPayment(userId, token, paymentData)\r\n        dispatch(membershipPayment(user, token, paymentData, membershipDuration));\r\n      })\r\n      .catch(error => {\r\n        console.log('dropin error: ', error)\r\n      })\r\n  }\r\n\r\n  const showDropIn = () => (\r\n    paymentToken && <Fragment>\r\n      <DropIn options={{\r\n        authorization: paymentToken,\r\n        paypal: {\r\n          flow: \"vault\"\r\n        }\r\n      }} onInstance={instance => (data.instance = instance)} />\r\n      {\r\n        buttonLoading ? (\r\n          <button disabled className=\"btn membershipPay\">\r\n            <div className=\"spinner-border spinner\" role=\"status\">\r\n              <span className=\"sr-only\">Processing payment...</span>\r\n            </div>\r\n            Processing payment...\r\n          </button>\r\n        ) : (\r\n          duration === \"monthly\" ? (        \r\n            <button onClick={() => buy(\"monthly\")} className=\"membershipPay\">Finish Payment</button>\r\n          ) : (\r\n            <button onClick={() => buy(\"yearly\")} className=\"membershipPay\">Finish Payment</button>\r\n          )\r\n        )\r\n      }\r\n    </Fragment>\r\n  )\r\n  console.log(duration)\r\n  \r\n  if(paymentComplete) {\r\n    history.push(\"/membership/success\");\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <SecondHeader />\r\n      <div className=\"MembershipCheckoutCtn\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-lg-8 offset-lg-2\">\r\n              <Card>\r\n              <Card.Header>\r\n                <h1 className=\"membershipCheckoutTitle\">{ duration === \"monthly\" ? \"Monthly Subscription\" : \"Yearly Subscription\"}</h1>\r\n              </Card.Header>\r\n              <div className=\"paypal membershipCard\">\r\n                \r\n                {/* <div className=\"discountCtn\">\r\n                    <Form.Control\r\n                        placeholder=\"Enter coupon code\"\r\n                    />\r\n                    <Button>Apply</Button>\r\n                </div> */}\r\n                \r\n                <div className=\"MembershipTotal\">\r\n                  <span>Total to pay:</span>\r\n                  <span>${ duration === \"monthly\" ? \"20\" : \"120\"} USD</span>\r\n                </div>\r\n                <p className=\"membershipChargingTime\">{ duration === \"monthly\" ? \"Billed once a month\" : \"Billed once a Year\"}</p>\r\n                {showDropIn()}\r\n              </div>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default MembershipCheckout;","D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\types.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\authConstants.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\userConstants.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\CourseCard.js",["350","351"],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\courses.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\utils\\MessageDisplay.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\ProfileCourses.js",["352","353"],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\ProfileSidebar.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\Profile.js",["354","355","356","357"],"import React, { useEffect, useState, useRef } from 'react';\r\nimport ReactCrop from 'react-image-crop';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport axios from 'axios';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  updateUserAction,\r\n  loadUser,\r\n  resetNotification,\r\n} from '../../actions/auth';\r\nimport { Button } from 'react-bootstrap';\r\nimport MessageDisplay from '../utils/MessageDisplay';\r\nimport './Profile.css';\r\n\r\nfunction Profile() {\r\n  const [cropState, setCropState] = useState({\r\n    src: null,\r\n    crop: {\r\n      aspect: 1,\r\n      height: 297,\r\n      unit: 'px',\r\n      width: 297,\r\n      x: 0,\r\n      y: 0,\r\n    },\r\n  });\r\n\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector((state) => state.auth);\r\n  const { notification, loading } = auth;\r\n\r\n  const [page, setPage] = useState({\r\n    loaded: false,\r\n    showImagePreview: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (page.showImagePreview) {\r\n      // document.body.style.overflow = 'hidden';\r\n      document.body.classList.add(\"lock\");\r\n    } else {\r\n      // document.body.style.overflow = 'unset';\r\n      document.body.classList.remove(\"lock\");\r\n    }\r\n  }, [page.showImagePreview]);\r\n\r\n  const [userDetails, setUserDetails] = useState({\r\n    name: '',\r\n    newPassword: '',\r\n    newPasswordConfirm: '',\r\n    password: '',\r\n    showError: false,\r\n    formChanged: false,\r\n    isPhoto: false,\r\n    message: \"\"\r\n  });\r\n\r\n  const { showError, formChanged, isPhoto } = userDetails;\r\n\r\n  useEffect(() => {\r\n    dispatch(resetNotification());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (notification.status === 'success') {\r\n      dispatch(loadUser());\r\n    }\r\n  }, [notification.status]);\r\n\r\n  useEffect(() => {\r\n    console.log('before check membership ');\r\n\r\n    setUserDetails({\r\n      ...userDetails,\r\n      name: auth && auth.user && auth.user.name,\r\n    });\r\n\r\n    // console.log(auth);\r\n  }, [auth && auth.user && auth.user._id]);\r\n\r\n  const updateUserDetails = (event) => {\r\n    setUserDetails({\r\n      ...userDetails,\r\n      showError: false,\r\n      formChanged: true,\r\n      isPhoto: false,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  const submitUserDetails = (event) => {\r\n    event.preventDefault();\r\n    if (formChanged) {\r\n      if (\r\n        (userDetails.newPassword || userDetails.newPasswordConfirm) &&\r\n        userDetails.newPassword !== userDetails.newPasswordConfirm\r\n      ) {\r\n        setUserDetails({\r\n          ...userDetails,\r\n          showError: true,\r\n          isPhoto: false,\r\n          message: \"Passwords do not match\"\r\n        });\r\n        console.log('Setting error');\r\n      } else {\r\n        console.log('Dispatching Update');\r\n        setUserDetails({\r\n          ...userDetails,\r\n          showError: false,\r\n          isPhoto: false,\r\n          newPassword: '',\r\n          newPasswordConfirm: '',\r\n          password: '',\r\n        })\r\n\r\n        dispatch(updateUserAction(auth && auth.token, userDetails));\r\n      }\r\n    }\r\n  };\r\n\r\n  const imageMaxSize = 2000000; // bytes\r\n  const acceptedFileTypes = 'image/png, image/jpg, image/jpeg, image/gif';\r\n  const acceptedFileTypesArray = acceptedFileTypes.split(',').map((item) => {\r\n    return item.trim();\r\n  });\r\n  //let imageRef = null;\r\n  let imageRef = useRef();\r\n  let fileRef = useRef();\r\n\r\n  // const images = require.context('../../images/', true);\r\n  // const images = require.context('../../../../uploads/users/', true);\r\n\r\n  let img = auth && auth.user && auth.user.image;\r\n\r\n  if (!img) {\r\n    img = '/uploads/users/default.png';\r\n  }\r\n  let userPic = (\r\n    <img\r\n      src={img}\r\n      className=\"userAvatar\"\r\n      onLoad={() => setPage({ loaded: true })}\r\n      alt=\"User Profile\"\r\n    />\r\n  );\r\n\r\n  // if (auth && auth.user && auth.user._id && auth.user.hasProfilePic) {\r\n  //   // import Pic from `/${auth.user._id}.jpg`;\r\n  //   // userPic = <img src={`/${auth.user._id}.jpg`} />\r\n  //   img = images(`./${auth.user._id}.jpg`);\r\n  //   userPic = <img src={img.default} className=\"userAvatar\" onLoad={() => setPage({ loaded: true })} alt=\"User Profile\"/>\r\n  // } else {\r\n  //   img = images(`./default.png`);\r\n  //   userPic = <img src={img.default} className=\"userAvatar\" onLoad={() => setPage({ loaded: true })} alt=\"User Profile\"/>\r\n  // }\r\n\r\n  const onSelectFile = (e) => {\r\n    if (e.target.files.length < 1) {\r\n      setUserDetails({ ...userDetails, isPhoto: true, showError: true, message: 'No image selected' });\r\n      return;\r\n    }\r\n    console.log('INSIDE onSelectFile');\r\n    console.log(e.target.files[0]);\r\n    console.log(e.target.files[0].size);\r\n    console.log(e.target.files[0].type);\r\n    console.log(acceptedFileTypesArray);\r\n\r\n    // const reader = new FileReader();\r\n\r\n    // //Read the contents of Image File.\r\n    // reader.readAsDataURL(e.target.files[0]);\r\n    // reader.onload = function (e) {\r\n\r\n    //   //Initiate the JavaScript Image object.\r\n    //   const image = new Image();\r\n\r\n    //   //Set the Base64 string return from FileReader as source.\r\n    //   image.src = e.target.result;\r\n\r\n    //   //Validate the File Height and Width.\r\n    //   image.onload = function () {\r\n    //     var height = this.height;\r\n    //     var width = this.width;\r\n    //     if (height > 500 || width > 500) {\r\n    //       alert(\"Height and Width must not exceed 100px.\");\r\n      \r\n    //       return false;\r\n    //     } else {\r\n    //     alert(\"Uploaded image has valid Height and Width.\");\r\n    //     return true;\r\n    //     }\r\n    //   };\r\n    // };\r\n\r\n    if (e.target.files[0].size > imageMaxSize) {\r\n      setUserDetails({ ...userDetails, isPhoto: true, showError: true, message: 'Image size should be less than 2 MB' });\r\n      return;\r\n    } else if (!acceptedFileTypesArray.includes(e.target.files[0].type)) {\r\n      setUserDetails({ ...userDetails, isPhoto: true, showError: true, message: 'Image should be of the type JPG, JPEG, PNG or GIF'});\r\n      return;\r\n    }\r\n\r\n    setPage({ ...page, showImagePreview: true });\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      const reader = new FileReader();\r\n      console.log(reader.result);\r\n      reader.addEventListener('load', () => {\r\n        setCropState({\r\n          ...cropState,\r\n          src: reader.result,\r\n        });\r\n        // setPage({ ...page, showImagePreview: true })\r\n      });\r\n      reader.readAsDataURL(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const onImageLoaded = async (image) => {\r\n    console.log(image);\r\n    imageRef.current = image;\r\n  };\r\n\r\n  const onCropComplete = (crop) => {\r\n    makeClientCrop(crop);\r\n  };\r\n\r\n  const onCropChange = (crop, percentCrop) => {\r\n    // You could also use percentCrop:\r\n    console.log('inside onCropChange');\r\n    setCropState({\r\n      ...cropState,\r\n      crop,\r\n    });\r\n  };\r\n\r\n  const makeClientCrop = async (crop) => {\r\n    console.log(imageRef.current);\r\n    if (imageRef.current && crop.width && crop.height) {\r\n      console.log(crop);\r\n      const croppedImageUrl = await getCroppedImg(\r\n        imageRef.current,\r\n        crop,\r\n        'newFile.jpeg'\r\n      );\r\n      console.log(croppedImageUrl);\r\n      setCropState({\r\n        ...cropState,\r\n        croppedImageUrl: croppedImageUrl,\r\n      });\r\n    }\r\n  };\r\n\r\n  const getCroppedImg = (image, crop, fileName) => {\r\n    console.log(image);\r\n    console.log(crop);\r\n    const canvas = document.createElement('canvas');\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    canvas.width = crop.width;\r\n    canvas.height = crop.height;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width,\r\n      crop.height\r\n    );\r\n\r\n    const reader = new FileReader();\r\n    canvas.toBlob((blob) => {\r\n      reader.readAsDataURL(blob);\r\n      reader.onloadend = () => {\r\n        dataURLtoFile(reader.result, `${auth.user._id}.jpg`);\r\n      };\r\n    });\r\n  };\r\n\r\n  const dataURLtoFile = (dataurl, filename) => {\r\n    let arr = dataurl.split(','),\r\n      mime = arr[0].match(/:(.*?);/)[1],\r\n      bstr = atob(arr[1]),\r\n      n = bstr.length,\r\n      u8arr = new Uint8Array(n);\r\n\r\n    while (n--) {\r\n      u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    let croppedImage = new File([u8arr], filename, { type: mime });\r\n    setCropState({\r\n      ...cropState,\r\n      croppedImage: croppedImage,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    // e.preventDefault();\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      };\r\n      console.log(cropState.croppedImage);\r\n      const formData = new FormData();\r\n      formData.append('file', cropState.croppedImage);\r\n      formData.append('image', auth.user._id);\r\n\r\n      console.log(formData);\r\n\r\n      const res = await axios.post(`/api/users/profilePic`, formData, config);\r\n      console.log('res.data');\r\n      console.log(res.data);\r\n      closeImagePreview();\r\n    } catch (error) {\r\n      const errors = error.response.data;\r\n      console.log(error);\r\n      setUserDetails({ ...userDetails, isPhoto: true, showError: true, message: 'Image size should be less than 2 MB' });\r\n      // console.log(\"File Size is too large. Allowed file size is 100KB\");\r\n      closeImagePreview();\r\n      console.log(errors.message);\r\n    }\r\n  };\r\n\r\n  const closeImagePreview = () => {\r\n    setPage({ ...page, showImagePreview: false });\r\n    console.log(fileRef.current);\r\n    fileRef.current.value = null;\r\n    setCropState({\r\n      ...cropState,\r\n      crop: {\r\n        aspect: 1 / 1,\r\n      },\r\n    });\r\n  };\r\n\r\n  // if (active == 'notActive' && !auth.loading) {\r\n  //   console.log(\"inside redirect\");\r\n  //   return <Redirect to=\"/activate\" />\r\n  // } else if (auth && !auth.isAuthenticated && !auth.loading) {\r\n  //   return <Redirect to=\"/\" />\r\n  // }\r\n\r\n  // console.log(page);\r\n  // console.log(cropState)\r\n\r\n  console.log(userDetails)\r\n\r\n  return (\r\n    <div className=\"userRightCol\">\r\n      <div className=\"userDetails\">\r\n        {!page.loaded && (\r\n          <div className=\"preLoaderProfilePic\">\r\n            <div className=\"spinner-border \" role=\"status\">\r\n              <span className=\"sr-only\">Loading...</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {!loading && showError && isPhoto && (\r\n              <MessageDisplay\r\n                header=\"Update error\"\r\n                status=\"Fail\"\r\n                message={userDetails.message}\r\n              />\r\n            )}\r\n        <div className=\"uploadButtonCtn\">\r\n          <label htmlFor=\"file\">{userPic}</label>\r\n          <input\r\n            ref={fileRef}\r\n            type=\"file\"\r\n            id=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={onSelectFile}\r\n          />\r\n        </div>\r\n\r\n        \r\n\r\n        {page.showImagePreview && (\r\n          <div className=\"imagePreviewOverlay\">\r\n            <i\r\n              className=\"fa fa-times-circle closeOverlay\"\r\n              onClick={closeImagePreview}\r\n            ></i>\r\n            <h2>Crop your Image</h2>\r\n            {cropState.src && (\r\n              <ReactCrop\r\n                src={cropState.src}\r\n                crop={cropState.crop}\r\n                ruleOfThirds\r\n                onImageLoaded={onImageLoaded}\r\n                onComplete={onCropComplete}\r\n                onChange={onCropChange}\r\n              />\r\n            )}\r\n            {cropState.croppedImageUrl && (\r\n              <img\r\n                alt=\"Crop\"\r\n                style={{ maxWidth: '100%' }}\r\n                src={cropState.croppedImageUrl}\r\n              />\r\n            )}\r\n            {cropState.src ? (\r\n              <form onSubmit={handleSubmit}>\r\n                <button type=\"submit\" className=\"uploadButton\">\r\n                  Save image\r\n                </button>\r\n              </form>\r\n            ) : null}\r\n          </div>\r\n        )}\r\n\r\n        <h3>Upload image</h3>\r\n        <hr />\r\n        <form onSubmit={submitUserDetails}>\r\n          <label className=\"userNameLabel\" htmlFor=\"userName\">Full Name</label>\r\n          <input\r\n            id=\"userName\"\r\n            type=\"text\"\r\n            placeholder=\"My name\"\r\n            value={userDetails.name || ''}\r\n            name=\"name\"\r\n            onChange={updateUserDetails}\r\n          />\r\n          <h3>Change your password</h3>\r\n          <div className=\"changePasswordCtn\">\r\n            <label htmlFor=\"newPassword\">New Password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"newPassword\"\r\n              id=\"newPassword\"\r\n              onChange={updateUserDetails}\r\n              value={userDetails.newPassword}\r\n            />\r\n            <label htmlFor=\"newPasswordConfirm\">Confirm Password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"newPasswordConfirm\"\r\n              id=\"newPasswordConfirm\"\r\n              onChange={updateUserDetails}\r\n              value={userDetails.newPasswordConfirm}\r\n            />\r\n\r\n            <hr />\r\n            <label htmlFor=\"\">\r\n              To save new password, enter current password\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              onChange={updateUserDetails}\r\n              value={userDetails.password}\r\n            />\r\n          </div>\r\n\r\n          <Button variant=\"primary\" type=\"submit\">\r\n            Update Profile\r\n          </Button>\r\n        </form>\r\n        {!loading && showError && !isPhoto && (\r\n          <MessageDisplay\r\n            header=\"Update error\"\r\n            status=\"Fail\"\r\n            message={userDetails.message}\r\n          />\r\n        )}\r\n        {!loading && notification && notification.status && (\r\n          <MessageDisplay\r\n            header={notification.status === 'success' ? 'Success' : 'Error'}\r\n            status={notification.status}\r\n            message={notification.message}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\EditCoupon.js",["358","359"],"import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  getCouponIdAction,\r\n  updateCouponAction,\r\n} from '../../actions/admin';\r\nimport { getCourses } from '../../actions/courses';\r\n\r\nimport { Button } from 'react-bootstrap';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { Form, InputGroup, Dropdown, FormControl } from 'react-bootstrap';\r\nimport './AllUsers.css';\r\nimport './Coupons.css';\r\n\r\nconst EditCoupon = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const courses = useSelector((state) => state.courses);\r\n  const { all } = courses;\r\n\r\n  const admin = useSelector((state) => state.admin);\r\n  const { coupon: theCoupon } = admin;\r\n\r\n  const [coursesState, setCoursesState] = useState([]);\r\n  const [coupon, setCoupon] = useState({\r\n    amountType: 'percentage',\r\n    amount: '',\r\n    code: '',\r\n    name: '',\r\n    expires: '',\r\n    available: '',\r\n    emails: [],\r\n    active: false,\r\n  });\r\n\r\n  const { courseTag: couponId } = useParams();\r\n\r\n  // console.log(couponId);\r\n  const [email, setEmail] = useState('');\r\n\r\n  useEffect(() => {\r\n    dispatch(getCourses());\r\n    dispatch(getCouponIdAction(couponId));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getDate = new Date(theCoupon.date);\r\n    // console.log(getDate);\r\n    // console.log(typeof getDate);\r\n    if (getDate !== 'Invalid Date') {\r\n      const newDate = `${getDate.getFullYear()}-${(\r\n        '0' +\r\n        getDate.getMonth() +\r\n        1\r\n      ).slice(-2)}-${('0' + getDate.getDate()).slice(-2)}`;\r\n      // console.log(newDate);\r\n      // console.log(typeof newDate);\r\n      setCoupon({\r\n        ...coupon,\r\n        amount: theCoupon.amount,\r\n        code: theCoupon.code,\r\n        name: theCoupon.name,\r\n        expires: newDate ? newDate : '2020-12-05',\r\n        available: theCoupon.available,\r\n        emails: theCoupon.restricted ? theCoupon.restricted : [],\r\n        active: theCoupon.active,\r\n      });\r\n    }\r\n\r\n    const addSelectCourses = theCoupon.courses ? theCoupon.courses : [];\r\n    const coursesCopy = [...coursesState];\r\n\r\n    for (let i = 0; i < coursesCopy.length; i++) {\r\n      for (let j = 0; j < addSelectCourses.length; j++) {\r\n        if (coursesCopy[i].name === addSelectCourses[j].name) {\r\n          coursesCopy[i].selected = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    setCoursesState(coursesCopy);\r\n  }, [theCoupon]);\r\n\r\n  useEffect(() => {\r\n    const theCourses = all.map((course, i) => {\r\n      return {\r\n        courseId: course._id,\r\n        name: course.name,\r\n        selected: false,\r\n        key: i,\r\n      };\r\n    });\r\n\r\n    theCourses.push({ name: 'All Courses', selected: false });\r\n    setCoursesState(theCourses);\r\n  }, [all]);\r\n\r\n  // The forwardRef is important!!\r\n  // Dropdown needs access to the DOM node in order to position the Menu\r\n  const CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\r\n    <Button\r\n      href=\"\"\r\n      ref={ref}\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        onClick(e);\r\n      }}\r\n      className=\"mb-2 selectCourses form-control btn-primary\"\r\n    >\r\n      {children}\r\n      &#x25bc;\r\n    </Button>\r\n  ));\r\n\r\n  // forwardRef again here!\r\n  // Dropdown needs access to the DOM of the Menu to measure it\r\n  const CustomMenu = React.forwardRef(\r\n    ({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\r\n      const [value, setValue] = useState('');\r\n\r\n      return (\r\n        <div\r\n          ref={ref}\r\n          style={style}\r\n          className={className}\r\n          aria-labelledby={labeledBy}\r\n        >\r\n          <FormControl\r\n            autoFocus\r\n            className=\"mx-3 my-2 w-auto\"\r\n            placeholder=\"Type to filter...\"\r\n            onChange={(e) => setValue(e.target.value)}\r\n            value={value}\r\n          />\r\n          <ul className=\"list-unstyled\">\r\n            {React.Children.toArray(children).filter(\r\n              (child) =>\r\n                !value || child.props.children.toLowerCase().startsWith(value)\r\n            )}\r\n          </ul>\r\n        </div>\r\n      );\r\n    }\r\n  );\r\n\r\n  const selectCourse = (i) => {\r\n    const coursesCopy = [...coursesState];\r\n    if(coursesCopy[i].name === \"All Courses\") {\r\n      for(let j=0; j < coursesCopy.length; j++ ) {\r\n        if(coursesCopy[j].name !== \"All Courses\") {\r\n          coursesCopy[j].selected = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    coursesCopy[i].selected = !coursesCopy[i].selected;\r\n    console.log(coursesCopy[i].name);\r\n    setCoursesState(coursesCopy);\r\n  };\r\n\r\n  const coursesSelected = coursesState.map((course, i) => {\r\n    return course.selected ? (\r\n      <Button\r\n        key={i}\r\n        variant=\"warning\"\r\n        className=\"my-4 mr-4\"\r\n        onClick={() => selectCourse(i)}\r\n      >\r\n        {course.name}\r\n      </Button>\r\n    ) : (\r\n      ''\r\n    );\r\n  });\r\n\r\n  const allCourses = coursesState.map((course, i) => {\r\n    return (\r\n      <Dropdown.Item\r\n        active={course.selected ? 'active' : ''}\r\n        key={i}\r\n        eventKey={i}\r\n        onClick={() => selectCourse(i)}\r\n      >\r\n        {course.name}\r\n      </Dropdown.Item>\r\n    );\r\n  });\r\n\r\n  const coursesToCoupon = coursesState.filter((course, i) => {\r\n    return course.selected;\r\n  });\r\n\r\n  const couponUpdate = (e) => {\r\n    setCoupon({\r\n      ...coupon,\r\n      [e.target.name]:\r\n        e.target.name === 'active' ? e.target.checked : e.target.value,\r\n    });\r\n  };\r\n\r\n  const typingEmail = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n\r\n  const addEmails = (e) => {\r\n    setCoupon({\r\n      ...coupon,\r\n      emails: [...coupon.emails, { email }],\r\n    });\r\n  };\r\n\r\n  const removeEmails = (index) => {\r\n    const emailRemove =\r\n      coupon.emails.length > 0 &&\r\n      coupon.emails.filter((email, i) => {\r\n        return index !== i;\r\n      });\r\n\r\n    setCoupon({\r\n      ...coupon,\r\n      emails: emailRemove,\r\n    });\r\n  };\r\n\r\n  const allEmails =\r\n    coupon.emails.length > 0 &&\r\n    coupon.emails.map((coupon, i) => {\r\n      return (\r\n        <Button\r\n          className=\"mr-3\"\r\n          key={i}\r\n          variant=\"outline-primary\"\r\n          onClick={() => removeEmails(i)}\r\n        >\r\n          {coupon.email}\r\n        </Button>\r\n      );\r\n    });\r\n  console.log(coupon);\r\n\r\n  const updateCoupon = (e) => {\r\n    e.preventDefault();\r\n    dispatch(updateCouponAction(coursesToCoupon, coupon, couponId));\r\n  };\r\n  return (\r\n    <div className=\"allUsersCtn container\">\r\n      <div className=\"row\">\r\n        <div className=\"col allUsersTable\">\r\n          <Button variant=\"dark\" className=\"my-4\">\r\n            <Link to=\"/admin/coupons\">Go back</Link>\r\n          </Button>\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">Edit Coupon</div>\r\n            <div className=\"card-body\">\r\n              <form onSubmit={updateCoupon}>\r\n                <Dropdown>\r\n                  <Dropdown.Toggle as={CustomToggle} id=\"dropdown-basic\">\r\n                    Select courses\r\n                  </Dropdown.Toggle>\r\n                  <Dropdown.Menu as={CustomMenu}>{allCourses}</Dropdown.Menu>\r\n                </Dropdown>\r\n\r\n                <div>{coursesSelected}</div>\r\n\r\n                <select\r\n                  className=\"form-control\"\r\n                  defaultValue={'DEFAULT'}\r\n                  onChange={couponUpdate}\r\n                  name=\"amountType\"\r\n                  value={coupon.amountType}\r\n                >\r\n                  <option value=\"DEFAULT\" disabled>\r\n                    Select Amount Type\r\n                  </option>\r\n                  <option value=\"dollars\">Dollars</option>\r\n                  <option value=\"percentage\">Percentage</option>\r\n                </select>\r\n                <Form.Control\r\n                  name=\"amount\"\r\n                  required\r\n                  className=\"my-3 input-md\"\r\n                  type=\"text\"\r\n                  placeholder=\"Enter amount\"\r\n                  onChange={couponUpdate}\r\n                  value={coupon.amount ? coupon.amount : ''}\r\n                />\r\n\r\n                <Form.Control\r\n                  name=\"code\"\r\n                  required\r\n                  className=\"my-3 input-md\"\r\n                  type=\"text\"\r\n                  placeholder=\"Coupon Code\"\r\n                  onChange={couponUpdate}\r\n                  value={coupon.code ? coupon.code : ''}\r\n                />\r\n                <Form.Control\r\n                  name=\"name\"\r\n                  required\r\n                  className=\"my-3 input-md\"\r\n                  type=\"text\"\r\n                  placeholder=\"Coupon Name\"\r\n                  onChange={couponUpdate}\r\n                  value={coupon.name ? coupon.name : ''}\r\n                />\r\n                <Form.Control\r\n                  name=\"expires\"\r\n                  required\r\n                  className=\"my-3 input-md\"\r\n                  type=\"date\"\r\n                  placeholder=\"Expires\"\r\n                  onChange={couponUpdate}\r\n                  value={coupon.expires ? coupon.expires : ''}\r\n                />\r\n                <Form.Control\r\n                  name=\"available\"\r\n                  required\r\n                  className=\"my-3 input-md\"\r\n                  type=\"text\"\r\n                  placeholder=\"Number Available\"\r\n                  onChange={couponUpdate}\r\n                  value={coupon.available ? coupon.available : ''}\r\n                />\r\n\r\n                <InputGroup className=\"my-3 input-md\">\r\n                  <FormControl\r\n                    aria-label=\"Add Email\"\r\n                    aria-describedby=\"basic-addon2\"\r\n                    placeholder=\"Private Email\"\r\n                    name=\"emails\"\r\n                    onChange={typingEmail}\r\n                  />\r\n                  <InputGroup.Append>\r\n                    <Button variant=\"outline-secondary\" onClick={addEmails}>\r\n                      Add Email\r\n                    </Button>\r\n                  </InputGroup.Append>\r\n                </InputGroup>\r\n                <div className=\"my-3\">{allEmails}</div>\r\n\r\n                <Form.Group id=\"formGridCheckbox\">\r\n                  <Form.Check\r\n                    name=\"active\"\r\n                    type=\"checkbox\"\r\n                    label=\"Activate\"\r\n                    onChange={couponUpdate}\r\n                    checked={coupon.active ? true : false}\r\n                  />\r\n                </Form.Group>\r\n                <Button variant=\"primary\" size=\"lg\" type=\"submit\">\r\n                  Update Coupon\r\n                </Button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditCoupon;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\Coupons.js",["360","361","362","363","364","365","366","367","368"],"import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { allUsersAction } from '../../actions/admin';\r\nimport { saveUsersAction, deleteUsersAction } from '../../actions/admin';\r\nimport { getCouponsAction } from '../../actions/admin';\r\n// import ModalWindow from '../utils/ModalWindow';\r\nimport { Link } from 'react-router-dom';\r\nimport { Form, Col, Table, Button, Modal } from 'react-bootstrap';\r\nimport './AllUsers.css';\r\nimport './Coupons.css'\r\n\r\nconst Coupon = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const auth = useSelector(state => state.auth);\r\n\r\n  const admin = useSelector(state => state.admin);\r\n  const { users, loading, coupons } = admin;\r\n\r\n  const [stateUsers, setStateUsers] = useState([]);\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [userSelected, setUserSelected] = useState(false);\r\n  const [show, setShow] = useState(false);\r\n  const [modalText, setModalText] = useState({\r\n    title: \"\",\r\n    action: \"\",\r\n    users: [],\r\n  });\r\n\r\n  const [orderState, setOrderState] = useState({\r\n    orderName: \"\",\r\n    asc: false\r\n  });\r\n\r\n  const [pageUsers, setPageUsers] = useState({\r\n    usersPerPage: 3,\r\n    values: [],\r\n    number: 1,\r\n    firstPage: 0,\r\n    lastPage: 1\r\n  });\r\n\r\n  const removeAdminFromUsers = users.filter(user => {\r\n    return user.role !== \"admin\";\r\n  })\r\n\r\n  useEffect(() => {\r\n    dispatch(allUsersAction());\r\n    dispatch(getCouponsAction());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      setStateUsers(removeAdminFromUsers);\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    // console.log(stateUsers);\r\n    const findSelected = stateUsers.find(user => {\r\n      // console.log(user);\r\n      return user.selected\r\n    });\r\n    // console.log(findSelected);\r\n\r\n    setUserSelected(Boolean(findSelected));\r\n\r\n    setPageUsers({\r\n      ...pageUsers,\r\n      values: paginate(stateUsers, pageUsers.usersPerPage, 1),\r\n      number: 1,\r\n      firstPage: 0,\r\n      // lastPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number + 1).length\r\n      lastPage: 1\r\n    });\r\n  }, [stateUsers]);\r\n\r\n\r\n  function paginate(array, page_size, page_number) {\r\n    // human-readable page numbers usually start with 1, so we reduce 1 in the first argument\r\n    return array.slice((page_number - 1) * page_size, page_number * page_size);\r\n  }\r\n\r\n  const selectUsers = (usersSelected, event) => {\r\n    // console.log(stateUsers);\r\n    console.log(event.target.type)\r\n    if (usersSelected === \"all\") {\r\n      const selectAllUsers = stateUsers.map((user, i) => {\r\n        // if () {\r\n        // console.log(user);\r\n        // console.log(selectAll)\r\n        return {\r\n          ...user,\r\n          selected: !selectAll,\r\n          key: i\r\n        }\r\n        // }\r\n      });\r\n\r\n      const filteredUsers = selectAllUsers.filter(user => {\r\n        return user.role != \"admin\";\r\n      });\r\n\r\n      console.log(filteredUsers)\r\n      setStateUsers(filteredUsers);\r\n      setSelectAll(!selectAll);\r\n    } else {\r\n      const selectAllCopy = [...stateUsers];\r\n      // selectAllCopy[usersSelected].selected = !selectAllCopy[usersSelected].selected;\r\n      selectAllCopy[usersSelected].selected = event.target.checked;\r\n\r\n      setStateUsers(selectAllCopy);\r\n    }\r\n\r\n  }\r\n\r\n  const allUsers = pageUsers.values.map((user, i) => {\r\n    if (user.role !== \"admin\") {\r\n      const today = new Date();\r\n      const joinedDate = new Date(user.joined);\r\n      const newJoinedDate = `${('0' + joinedDate.getDate()).slice(-2)}/${('0' + joinedDate.getMonth() + 1).slice(-2)}/${joinedDate.getFullYear()}`;\r\n      // console.log(\"Inside all Users\");\r\n      // console.log(user.selected)\r\n      const lastLogin = new Date(user.lastLogin);\r\n      const lastLoginDate = () => {\r\n        if (today.getDate() === lastLogin.getDate() &&\r\n          today.getMonth() === lastLogin.getMonth() &&\r\n          today.getFullYear() === lastLogin.getFullYear()\r\n        ) {\r\n          return `${('0' + lastLogin.getHours()).slice(-2)}:${('0' + lastLogin.getMinutes()).slice(-2)} - Today`\r\n        } else {\r\n          return `${('0' + lastLogin.getHours()).slice(-2)}:${('0' + lastLogin.getMinutes()).slice(-2)} - ${lastLogin.getDate()}/${lastLogin.getMonth() + 1}/${lastLogin.getFullYear()}`;\r\n        }\r\n      }\r\n      return (\r\n        <tr key={user._id}>\r\n          <td>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={user.selected == null ? false : user.selected}\r\n              value={user.selected}\r\n              onChange={(e) => { selectUsers(i, e) }}\r\n            />\r\n            <div className=\"allUsersTableDiv\"><Link to={`/admin/user/${user._id}`}>{user.name}</Link></div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{user.email}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{user.active}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">${user.purchases} USD</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{newJoinedDate}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{lastLoginDate()}</div>\r\n          </td>\r\n        </tr>\r\n      )\r\n    }\r\n  })\r\n\r\n  const orderBy = (order) => {\r\n    console.log(\"ordering by date\");\r\n    removeAdminFromUsers.sort(function (a, b) {\r\n      // Turn your strings into dates, and then subtract them\r\n      // to get a value that is either negative, positive, or zero.\r\n      if (order === \"date\") {\r\n        if (orderState.orderName === \"date\" && orderState.asc) {\r\n          return new Date(a.joined) - new Date(b.joined);\r\n        } else {\r\n          return new Date(b.joined) - new Date(a.joined);\r\n        }\r\n      } else if (order === \"purchases\") {\r\n        if (orderState.orderName === \"purchases\" && orderState.asc) {\r\n          return a.purchases - b.purchases;\r\n        } else {\r\n          return b.purchases - a.purchases;\r\n        }\r\n      } else if (order === \"email\") {\r\n        if (orderState.orderName === \"email\" && orderState.asc) {\r\n          if (a.email > b.email) { return -1; }\r\n          if (a.email < b.email) { return 1; }\r\n        } else {\r\n          if (a.email < b.email) { return -1; }\r\n          if (a.email > b.email) { return 1; }\r\n        }\r\n        return 0;\r\n      } else if (order === \"name\") {\r\n        let nameA = a.name.toLowerCase();\r\n        let nameB = b.name.toLowerCase();\r\n\r\n        if (orderState.orderName === \"name\" && orderState.asc) {\r\n          if (nameA > nameB) { return -1; }\r\n          if (nameA < nameB) { return 1; }\r\n        } else {\r\n          if (nameA < nameB) { return -1; }\r\n          if (nameA > nameB) { return 1; }\r\n        }\r\n\r\n        return 0;\r\n      } else if (order === \"active\") {\r\n        let activeA = a.active.toLowerCase();\r\n        let activeB = b.active.toLowerCase();\r\n\r\n        if (orderState.orderName === \"active\" && orderState.asc) {\r\n          if (activeA < activeB) { return -1; }\r\n          if (activeA > activeB) { return 1; }\r\n        } else {\r\n          if (activeA > activeB) { return -1; }\r\n          if (activeA < activeB) { return 1; }\r\n        }\r\n        return 0;\r\n      } else if (order === \"lastLogin\") {\r\n        if (orderState.lastLogin === \"date\" && orderState.asc) {\r\n          return new Date(a.lastLogin) - new Date(b.lastLogin);\r\n        } else {\r\n          return new Date(b.lastLogin) - new Date(a.lastLogin);\r\n        }\r\n      }\r\n\r\n    });\r\n\r\n    setStateUsers(removeAdminFromUsers);\r\n    // setTest({ loading: false })\r\n    setOrderState({\r\n      orderName: order,\r\n      asc: !orderState.asc\r\n    })\r\n  }\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleChange = (e) => {\r\n    console.log(e.target.value);\r\n\r\n    const selectedUsers = stateUsers.filter((user) => {\r\n      return user.selected\r\n    });\r\n\r\n    console.log(selectedUsers)\r\n\r\n    if (selectedUsers.length > 0) {\r\n      let title = \"\";\r\n      // let users = selectedUsers.map(user => {\r\n      //   return user._id;\r\n      // })\r\n      if (e.target.value === \"activate\") {\r\n        title = \"Activate Users\"\r\n      } else if (e.target.value === \"delete\") {\r\n        title = \"Delete Users\"\r\n      }\r\n\r\n      setModalText({\r\n        title: title,\r\n        action: e.target.value,\r\n        users: selectedUsers\r\n      });\r\n      handleShow();\r\n    }\r\n  }\r\n\r\n  const saveChanges = () => {\r\n    console.log(\"inside save changes\");\r\n    if (modalText.action === \"activate\") {\r\n      dispatch(saveUsersAction(modalText));\r\n    } else if (modalText.action === \"delete\") {\r\n      dispatch(deleteUsersAction(modalText));\r\n    }\r\n    setShow(false);\r\n  }\r\n\r\n  const movePage = (direction) => {\r\n    if (direction === \"previous\") {\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number - 1),\r\n        number: pageUsers.number - 1,\r\n        firstPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number - 2).length,\r\n        lastPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number).length\r\n      })\r\n    } else {\r\n      console.log(pageUsers.number);\r\n      console.log(paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number).length);\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number + 1),\r\n        number: pageUsers.number + 1,\r\n        firstPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number).length,\r\n        lastPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number + 2).length\r\n      })\r\n    }\r\n  }\r\n\r\n  const findUser = (e) => {\r\n    console.log(\"find a user\");\r\n    // console.log(e.target.value);\r\n    const text = e.target.value.toLowerCase();\r\n    console.log(text);\r\n    const filteredusers = removeAdminFromUsers.filter((user) => {\r\n      console.log(user.name)\r\n      return (user.name.toLowerCase().indexOf(text) > -1 || user.email.toLowerCase().indexOf(text) > -1);\r\n    })\r\n\r\n    console.log(filteredusers);\r\n    setStateUsers(filteredusers);\r\n  }\r\n\r\n  const allCoupons = coupons.map((coupon, i) => {\r\n\r\n    const today = new Date();\r\n    const couponDate = new Date(coupon.date);\r\n    const newCouponDate = `${('0' + couponDate.getDate()).slice(-2)}/${('0' + couponDate.getMonth() + 1).slice(-2)}/${couponDate.getFullYear()}`;\r\n    // console.log(\"Inside all Users\");\r\n    // console.log(user.selected)\r\n    let emails = [];\r\n    let courses = [];\r\n\r\n    if (coupon.restricted.length > 0) {\r\n      for (let i = 0; i < coupon.restricted.length; i++) {\r\n        emails.push(coupon.restricted[i].email);\r\n      }\r\n    }\r\n\r\n    const allEmails = emails.length > 0 && emails.map((email, i) => {\r\n      return (\r\n        <>\r\n          <span>{email}</span>\r\n          { i === (emails.length-1) ? \"\" : <hr className=\"my-2\" />}\r\n        </>\r\n      )\r\n    });\r\n\r\n    for (let i = 0; i < coupon.courses.length; i++) {\r\n      courses.push(coupon.courses[i].name);\r\n    }\r\n\r\n    const allCourses = courses.length > 0 && courses.map((course, i) => {\r\n      return (\r\n        <>\r\n          <span key={i}>{course}</span>\r\n          { i === (courses.length-1) ? \"\" : <hr className=\"my-2\" />}\r\n        </>\r\n      )\r\n    });\r\n\r\n    const lastLogin = new Date(coupon.lastLogin);\r\n    const lastLoginDate = () => {\r\n      if (today.getDate() === lastLogin.getDate() &&\r\n        today.getMonth() === lastLogin.getMonth() &&\r\n        today.getFullYear() === lastLogin.getFullYear()\r\n      ) {\r\n        return `${('0' + lastLogin.getHours()).slice(-2)}:${('0' + lastLogin.getMinutes()).slice(-2)} - Today`\r\n      } else {\r\n        return `${('0' + lastLogin.getHours()).slice(-2)}:${('0' + lastLogin.getMinutes()).slice(-2)} - ${lastLogin.getDate()}/${lastLogin.getMonth() + 1}/${lastLogin.getFullYear()}`;\r\n      }\r\n    }\r\n    return (\r\n      <tr key={coupon._id}>\r\n        <td>\r\n          <div>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={coupon.selected == null ? false : coupon.selected}\r\n            value={coupon.selected}\r\n            onChange={(e) => { selectUsers(i, e) }}\r\n            className=\"mr-2\"\r\n          />\r\n          <div className=\"allUsersTableDiv\"><Link to={`/admin/coupons/edit/${coupon._id}`}>{coupon.code}</Link></div>\r\n          </div>\r\n        </td>\r\n        <td className=\"px-3\">\r\n          <div className=\"allUsersTableDiv\">{coupon.name}</div>\r\n        </td>\r\n        <td className=\"px-3\">\r\n          <div className=\"allUsersTableDiv\">{newCouponDate}</div>\r\n        </td>\r\n        <td className=\"px-3\">\r\n          <div className=\"allUsersTableDiv\">{coupon.used}</div>\r\n        </td>\r\n        <td className=\"px-3\">\r\n          <div className=\"allUsersTableDiv\">{coupon.available}</div>\r\n        </td>\r\n        <td className=\"px-3\">{allCourses}</td>\r\n        <td className=\"px-3\">{allEmails.length > 0 ? allEmails : \"No Restrictions\"}</td>\r\n        <td className=\"px-3\">{coupon.active ? \"True\" : \"False\" }</td>\r\n      </tr>\r\n    )\r\n\r\n  })\r\n\r\n  return (\r\n    <div className=\"allUsersCtn container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col allCouponsTable\">\r\n          <Link to=\"/admin/coupons/new\" className=\"btn btn-primary\">New Coupon</Link>\r\n          <div className=\"row\">\r\n            <Col sm=\"5\">\r\n              <Form.Control className=\"my-3 input-md\" type=\"text\" placeholder=\"Search coupons\" onChange={findUser} />\r\n            </Col>\r\n          </div>\r\n          <Table striped bordered hover responsive size=\"sm\">\r\n            <thead className=\"thead-dark\">\r\n              <tr>\r\n                <th>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    onChange={(e) => { selectUsers(\"all\", e) }}\r\n                    className=\"mr-2\"\r\n                  />\r\n                  {userSelected ? (\r\n                    <select defaultValue={'DEFAULT'} onChange={handleChange}>\r\n                      <option value=\"DEFAULT\" disabled>Bulk Actions</option>\r\n                      <option value=\"activate\">Activate</option>\r\n                      <option value=\"delete\">Delete</option>\r\n                    </select>\r\n                  ) : (\r\n                      <span onClick={() => orderBy(\"name\")}>Codes</span>\r\n                    )}\r\n                </th>\r\n                <th className=\"px-3\" onClick={() => orderBy(\"email\")}>Name</th>\r\n                <th className=\"px-3\" onClick={() => orderBy(\"active\")}>Expires</th>\r\n                <th className=\"px-3\" onClick={() => orderBy(\"purchases\")}>Used</th>\r\n                <th className=\"px-3\" onClick={() => orderBy(\"date\")}>Available</th>\r\n                <th className=\"px-3\" onClick={() => orderBy(\"lastLogin\")}>Courses</th>\r\n                <th className=\"px-3\" onClick={() => orderBy(\"lastLogin\")}>Emails</th>\r\n                <th className=\"px-3\" onClick={() => orderBy(\"lastLogin\")}>Active</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {allCoupons.length > 0 ? allCoupons : <tr className=\"my-3\"><td>No Users found</td></tr>}\r\n            </tbody>\r\n            {/* <h1>{!test.loading ? \"Working\" : null}</h1> */}\r\n          </Table>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <nav aria-label=\"Page navigation example\" className=\"mt-3\">\r\n            <ul className=\"pagination justify-content-center\">\r\n              <li className={pageUsers.firstPage < 1 ? \"disabled page-item\" : \"page-item\"}>\r\n                <Button onClick={() => movePage(\"previous\")} className=\"page-link\" href=\"#\">Previous</Button>\r\n              </li>\r\n              <li className={pageUsers.lastPage < 1 ? \"disabled page-item\" : \"page-item\"}>\r\n                <Button onClick={() => movePage(\"next\")}\r\n                  className=\"page-link\"\r\n                  href=\"#\">Next</Button>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{modalText.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>Are you sure you want to {modalText.action} the following users?</p>\r\n          {modalText.users.map((user, i) => {\r\n            return <p key={i}><b>{user.name}</b></p>;\r\n          })}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={saveChanges}>\r\n            Save Changes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Coupon\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\NewCoupon.js",["369","370","371"],"import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { createCouponAction } from '../../actions/admin';\r\nimport { getCourses } from '../../actions/courses'\r\n\r\nimport { Button} from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { Form, InputGroup, Dropdown, FormControl } from 'react-bootstrap';\r\nimport './AllUsers.css';\r\nimport './Coupons.css'\r\n\r\nconst NewCoupon = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const courses = useSelector(state => state.courses);\r\n  const { all } = courses;\r\n\r\n  const [coursesState, setCoursesState] = useState([]);\r\n  const [coupon, setCoupon] = useState({\r\n    amountType: \"percentage\",\r\n    amount: \"\",\r\n    code: \"\",\r\n    name: \"\",\r\n    expires: \"\",\r\n    available: \"\",\r\n    emails: [],\r\n    active: false\r\n  });\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    dispatch(getCourses());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const theCourses = all.map((course, i) => {\r\n      return {\r\n        courseId: course._id,\r\n        name: course.name,\r\n        selected: false,\r\n        key: i\r\n      }\r\n    })\r\n\r\n    theCourses.push({ name: \"All Courses\", selected: false });\r\n    setCoursesState(theCourses);\r\n\r\n  }, [all]);\r\n\r\n  // The forwardRef is important!!\r\n  // Dropdown needs access to the DOM node in order to position the Menu\r\n  const CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\r\n    <a\r\n      href=\"\"\r\n      ref={ref}\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        onClick(e);\r\n      }}\r\n      className=\"mb-2 selectCourses form-control btn-primary\"\r\n    >\r\n      {children}\r\n    &#x25bc;\r\n    </a>\r\n  ));\r\n\r\n  // forwardRef again here!\r\n  // Dropdown needs access to the DOM of the Menu to measure it\r\n  const CustomMenu = React.forwardRef(\r\n    ({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\r\n      const [value, setValue] = useState('');\r\n\r\n      return (\r\n        <div\r\n          ref={ref}\r\n          style={style}\r\n          className={className}\r\n          aria-labelledby={labeledBy}\r\n\r\n        >\r\n          <FormControl\r\n            autoFocus\r\n            className=\"mx-3 my-2 w-auto\"\r\n            placeholder=\"Type to filter...\"\r\n            onChange={(e) => setValue(e.target.value)}\r\n            value={value}\r\n\r\n          />\r\n          <ul className=\"list-unstyled\">\r\n            {React.Children.toArray(children).filter(\r\n              (child) =>\r\n                !value || child.props.children.toLowerCase().startsWith(value),\r\n            )}\r\n          </ul>\r\n        </div>\r\n      );\r\n    },\r\n  );\r\n\r\n  const selectCourse = (i) => {\r\n\r\n    const coursesCopy = [...coursesState];\r\n    coursesCopy[i].selected = !coursesCopy[i].selected;\r\n\r\n    setCoursesState(coursesCopy);\r\n  }\r\n\r\n  const coursesSelected = coursesState.map((course, i) => {\r\n    return course.selected ? <Button key={i} variant=\"warning\" className=\"my-4 mr-4\" onClick={() => selectCourse(i)}>{course.name}</Button> : \"\"\r\n  })\r\n\r\n  const allCourses = coursesState.map((course, i) => {\r\n    return (\r\n      <Dropdown.Item active={course.selected ? \"active\" : \"\"} key={i} eventKey={i} onClick={() => selectCourse(i)}>{course.name}</Dropdown.Item>\r\n    )\r\n  });\r\n\r\n  const coursesToCoupon = coursesState.filter((course, i) => {\r\n    return course.selected;\r\n  });\r\n\r\n  const couponUpdate = (e) => {\r\n    setCoupon({\r\n      ...coupon,\r\n      [e.target.name]: e.target.name === \"active\" ? e.target.checked : e.target.value\r\n    })\r\n  }\r\n\r\n  const submitCoupon = (e) => {\r\n    e.preventDefault();\r\n    if (coursesToCoupon.length < 1) {\r\n      console.log(\"Need to select courses\");\r\n    }\r\n    dispatch(createCouponAction(coursesToCoupon, coupon));\r\n    console.log(coupon);\r\n  }\r\n\r\n  const typingEmail = (e) => {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  const addEmails = (e) => {\r\n    setCoupon({\r\n      ...coupon,\r\n      emails: [...coupon.emails, {email}]\r\n    })\r\n  }\r\n\r\n  const allEmails = coupon.emails.map((coupon, i) => {\r\n    return <Button className=\"mr-3\" key={i} variant=\"outline-primary\">{coupon.email}</Button>\r\n  })\r\n  return (\r\n    <div className=\"allUsersCtn container\">\r\n      <div className=\"row\">\r\n        <div className=\"col allUsersTable\">\r\n          <Link to=\"/admin/coupons\">Go back</Link>\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              New Coupon\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <form onSubmit={submitCoupon}>\r\n                <Dropdown>\r\n                  <Dropdown.Toggle as={CustomToggle} id=\"dropdown-basic\">\r\n                    Select courses\r\n                  </Dropdown.Toggle>\r\n                  <Dropdown.Menu as={CustomMenu}>\r\n                    {allCourses}\r\n                  </Dropdown.Menu>\r\n                </Dropdown>\r\n\r\n                <div>{coursesSelected}</div>\r\n\r\n                <select className=\"form-control\" defaultValue={'DEFAULT'} onChange={couponUpdate} name=\"amountType\">\r\n                  <option value=\"DEFAULT\" disabled>Select Amount Type</option>\r\n                  <option value=\"dollars\">Dollars</option>\r\n                  <option value=\"percentage\">Percentage</option>\r\n                </select>\r\n                <Form.Control name=\"amount\" required className=\"my-3 input-md\" type=\"text\" placeholder=\"Enter amount\" onChange={couponUpdate} />\r\n                \r\n                <Form.Control name=\"code\" required className=\"my-3 input-md\" type=\"text\" placeholder=\"Coupon Code\" onChange={couponUpdate} />\r\n                <Form.Control name=\"name\" required className=\"my-3 input-md\" type=\"text\" placeholder=\"Coupon Name\" onChange={couponUpdate} />\r\n                <Form.Control name=\"expires\" required className=\"my-3 input-md\" type=\"date\" placeholder=\"Expires\" onChange={couponUpdate} />\r\n                <Form.Control name=\"available\" required className=\"my-3 input-md\" type=\"text\" placeholder=\"Number Available\" onChange={couponUpdate} />\r\n             \r\n                <InputGroup className=\"my-3 input-md\">\r\n                  <FormControl\r\n                    placeholder=\"Add Email\"\r\n                    aria-label=\"Add Email\"\r\n                    aria-describedby=\"basic-addon2\"\r\n                    placeholder=\"Private Email\"\r\n                    name=\"emails\"\r\n                    onChange={typingEmail}\r\n                  />\r\n                  <InputGroup.Append>\r\n                    <Button variant=\"outline-secondary\" onClick={addEmails}>Add Email</Button>\r\n                  </InputGroup.Append>\r\n                  \r\n                </InputGroup>\r\n                <div className=\"my-3\">{allEmails}</div>\r\n\r\n                <Form.Group id=\"formGridCheckbox\">\r\n                  <Form.Check name=\"active\" type=\"checkbox\" label=\"Activate\" onChange={couponUpdate} />\r\n                </Form.Group>\r\n                <Button variant=\"primary\" size=\"lg\" type=\"submit\">\r\n                  Create Coupon\r\n              </Button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NewCoupon;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\ActiveMemberships.js",["372","373","374","375","376","377"],"import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { allUsersAction } from '../../actions/admin';\r\nimport { getMemberships, deleteUsersAction, saveUsersAction } from '../../actions/admin';\r\n// import ModalWindow from '../utils/ModalWindow';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { Form, Col } from 'react-bootstrap';\r\nimport './AllUsers.css'\r\n\r\nconst ActiveMemberships = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const admin = useSelector(state => state.admin);\r\n  const { users, loading, memberships } = admin;\r\n  // const courses = useSelector(state => state.courses);\r\n\r\n  const [number, setNumber] = useState(0);\r\n  const [stateMemberships, setStateMemberships] = useState([]);\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [userSelected, setUserSelected] = useState(false);\r\n  const [show, setShow] = useState(false);\r\n  const [changePages, setChangePages] = useState(true)\r\n  const [orderByState, setOrderByState] = useState(false)\r\n  \r\n  const [modalText, setModalText] = useState({\r\n    title: \"\",\r\n    action: \"\",\r\n    users: [],\r\n  });\r\n\r\n  const [orderState, setOrderState] = useState({\r\n    orderName: \"\",\r\n    asc: false\r\n  });\r\n\r\n  const [pageUsers, setPageUsers] = useState({\r\n    usersPerPage: 10,\r\n    values: [],\r\n    number: 1,\r\n    firstPage: 0,\r\n    lastPage: 1\r\n  });\r\n\r\n  // const removeAdminFromUsers = users.filter(user => {\r\n  //   return user.role !== \"admin\";\r\n  // })\r\n\r\n  useEffect(() => {\r\n    dispatch(getMemberships());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      setStateMemberships(memberships);\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    setStateMemberships(memberships);\r\n    setChangePages(false)\r\n    setOrderByState(true)\r\n  }, [memberships])\r\n\r\n  useEffect(() => {\r\n    // console.log(stateUsers);\r\n    \r\n    const findSelected = stateMemberships.find(user => {\r\n      // console.log(user);\r\n      return user.selected\r\n    });\r\n    console.log(findSelected);\r\n\r\n    setUserSelected(Boolean(findSelected));\r\n    \r\n    console.log(paginate(stateMemberships, pageUsers.usersPerPage, 1))\r\n\r\n    if( changePages ) {\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateMemberships, pageUsers.usersPerPage, 1),\r\n        number: pageUsers.number,\r\n        firstPage: pageUsers.firstPage,\r\n        // lastPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number + 1).length\r\n        lastPage: 1\r\n      });\r\n    } else if( orderByState ) {\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateMemberships, pageUsers.usersPerPage, 1),\r\n        number: 1,\r\n        firstPage: 0,\r\n        // lastPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number + 1).length\r\n        lastPage: 1\r\n      });\r\n    }\r\n\r\n    const numberActiveMemberships = stateMemberships.reduce((total, num) => {\r\n      return total + (num.status === 'Active' ? 1 : 0)\r\n    }, 0);\r\n  \r\n    setNumber(numberActiveMemberships);\r\n\r\n  }, [stateMemberships]);\r\n\r\n  function paginate(array, page_size, page_number) {\r\n    // human-readable page numbers usually start with 1, so we reduce 1 in the first argument\r\n    return array.slice((page_number - 1) * page_size, page_number * page_size);\r\n  }\r\n\r\n  const selectUsers = (usersSelected, event) => {\r\n    // console.log(stateUsers);\r\n    console.log(event.target.type)\r\n    if (usersSelected === \"all\") {\r\n      const selectAllUsers = stateMemberships.map((user, i) => {\r\n        // if () {\r\n        // console.log(user);\r\n        // console.log(selectAll)\r\n        return {\r\n          ...user,\r\n          selected: !selectAll,\r\n          key: i\r\n        }\r\n        // }\r\n      });\r\n\r\n      const filteredUsers = selectAllUsers.filter(user => {\r\n        return user.role !== \"admin\";\r\n      });\r\n\r\n      console.log(filteredUsers)\r\n      setChangePages(true);\r\n      setOrderByState(false);\r\n\r\n      setStateMemberships(filteredUsers);\r\n      setSelectAll(!selectAll);\r\n    } else {\r\n      const selectAllCopy = [...stateMemberships];\r\n      \r\n\r\n      const globalUserSelected = (pageUsers.number-1) * pageUsers.usersPerPage + usersSelected;\r\n      console.log(\"the user selected is:\", usersSelected);\r\n      console.log(selectAllCopy[globalUserSelected]);\r\n      // selectAllCopy[usersSelected].selected = !selectAllCopy[usersSelected].selected;\r\n      selectAllCopy[globalUserSelected].selected = event.target.checked;\r\n\r\n      setChangePages(false);\r\n      setOrderByState(false);\r\n      setStateMemberships(selectAllCopy);\r\n    }\r\n\r\n  }\r\n\r\n  const allUsers = pageUsers.values.map((user, i) => {\r\n    \r\n      const today = new Date();\r\n      const paidThrough = new Date(user.paidThrough);\r\n      const newPaidThrough = `${('0' + paidThrough.getDate()).slice(-2)}/${('0' + (paidThrough.getMonth() + 1)).slice(-2)}/${paidThrough.getFullYear()}`;\r\n      // console.log(\"Inside all Users\");\r\n      // console.log(user.selected)\r\n\r\n      const firstBill = new Date(user.firstBillDate);\r\n      console.log(firstBill.getDate())\r\n      const newfirstBill = `${('0' + firstBill.getDate()).slice(-2)}/${('0' + (firstBill.getMonth() + 1)).slice(-2)}/${firstBill.getFullYear()}`;\r\n      \r\n      const isActive = (active, paidDate) => {\r\n        if(active) return \"TRUE\"\r\n\r\n        const past = new Date(paidDate);\r\n        const today = new Date();\r\n\r\n        const dateInPast = function(past, today) {\r\n          if (past.setHours(0, 0, 0, 0) <= today.setHours(0, 0, 0, 0)) {\r\n            return true;\r\n          }\r\n        \r\n          return false;\r\n        };\r\n        console.log(dateInPast(past, today));\r\n\r\n        return dateInPast(past, today) ? \"TRUE\" : \"FALSE\"\r\n      }\r\n\r\n      const lastLogin = new Date(user.lastLogin);\r\n      const lastLoginDate = () => {\r\n        if (today.getDate() === lastLogin.getDate() &&\r\n          today.getMonth() === lastLogin.getMonth() &&\r\n          today.getFullYear() === lastLogin.getFullYear()\r\n        ) {\r\n          return `${('0' + lastLogin.getHours()).slice(-2)}:${('0' + lastLogin.getMinutes()).slice(-2)} - Today`\r\n        } else {\r\n          return `${('0' + lastLogin.getHours()).slice(-2)}:${('0' + lastLogin.getMinutes()).slice(-2)} - ${lastLogin.getDate()}/${('0' + lastLogin.getMonth()).slice(-2)}/${lastLogin.getFullYear()}`;\r\n        }\r\n      }\r\n      return (\r\n        <tr key={user._id}>\r\n          <td>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={user.selected == null ? false : user.selected}\r\n              value={user.selected}\r\n              onChange={(e) => { selectUsers(i, e) }}\r\n            />\r\n            <div className=\"allUsersTableDiv\"><Link to={`/admin/user/${user.userId}`}>{user.userName}</Link></div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{user.userEmail}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{newfirstBill}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{newPaidThrough}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{user.transactions}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{isActive(user.status, user.paidThrough)}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{user.status}</div>\r\n          </td>\r\n        </tr>\r\n      )\r\n    \r\n  })\r\n\r\n  const orderBy = (order) => {\r\n    console.log(\"ordering by date\");\r\n    memberships.sort(function (a, b) {\r\n      // Turn your strings into dates, and then subtract them\r\n      // to get a value that is either negative, positive, or zero.\r\n      if (order === \"date\") {\r\n        if (orderState.orderName === \"date\" && orderState.asc) {\r\n          return new Date(a.joined) - new Date(b.joined);\r\n        } else {\r\n          return new Date(b.joined) - new Date(a.joined);\r\n        }\r\n      } else if (order === \"purchases\") {\r\n        if (orderState.orderName === \"purchases\" && orderState.asc) {\r\n          return a.purchases - b.purchases;\r\n        } else {\r\n          return b.purchases - a.purchases;\r\n        }\r\n      } else if (order === \"email\") {\r\n        if (orderState.orderName === \"email\" && orderState.asc) {\r\n          if (a.email > b.email) { return -1; }\r\n          if (a.email < b.email) { return 1; }\r\n        } else {\r\n          if (a.email < b.email) { return -1; }\r\n          if (a.email > b.email) { return 1; }\r\n        }\r\n        return 0;\r\n      } else if (order === \"name\") {\r\n        let nameA = a.name.toLowerCase();\r\n        let nameB = b.name.toLowerCase();\r\n\r\n        if (orderState.orderName === \"name\" && orderState.asc) {\r\n          if (nameA > nameB) { return -1; }\r\n          if (nameA < nameB) { return 1; }\r\n        } else {\r\n          if (nameA < nameB) { return -1; }\r\n          if (nameA > nameB) { return 1; }\r\n        }\r\n\r\n        return 0;\r\n      } else if (order === \"active\") {\r\n        let activeA = a.active.toLowerCase();\r\n        let activeB = b.active.toLowerCase();\r\n\r\n        if (orderState.orderName === \"active\" && orderState.asc) {\r\n          if (activeA < activeB) { return -1; }\r\n          if (activeA > activeB) { return 1; }\r\n        } else {\r\n          if (activeA > activeB) { return -1; }\r\n          if (activeA < activeB) { return 1; }\r\n        }\r\n        return 0;\r\n      } else if (order === \"lastLogin\") {\r\n        if (orderState.lastLogin === \"date\" && orderState.asc) {\r\n          return new Date(a.lastLogin) - new Date(b.lastLogin);\r\n        } else {\r\n          return new Date(b.lastLogin) - new Date(a.lastLogin);\r\n        }\r\n      }\r\n      return 0;\r\n    });\r\n\r\n    setChangePages(false);\r\n    setOrderByState(true);\r\n    setStateMemberships(memberships);\r\n    // setTest({ loading: false })\r\n    setOrderState({\r\n      orderName: order,\r\n      asc: !orderState.asc\r\n    })\r\n  }\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleChange = (e) => {\r\n    console.log(e.target.value);\r\n\r\n    const selectedUsers = stateMemberships.filter((user) => {\r\n      return user.selected\r\n    });\r\n\r\n    console.log(selectedUsers)\r\n\r\n    if (selectedUsers.length > 0) {\r\n      let title = \"\";\r\n      // let users = selectedUsers.map(user => {\r\n      //   return user._id;\r\n      // })\r\n      if (e.target.value === \"activate\") {\r\n        title = \"Activate Users\"\r\n      } else if (e.target.value === \"delete\") {\r\n        title = \"Delete Users\"\r\n      }\r\n\r\n      setModalText({\r\n        title: title,\r\n        action: e.target.value,\r\n        users: selectedUsers\r\n      });\r\n      handleShow();\r\n    }\r\n  }\r\n\r\n  const saveChanges = () => {\r\n    console.log(\"inside save changes\");\r\n    if (modalText.action === \"activate\") {\r\n      dispatch(saveUsersAction(modalText));\r\n    } else if (modalText.action === \"delete\") {\r\n      dispatch(deleteUsersAction(modalText));\r\n    }\r\n    setShow(false);\r\n  }\r\n\r\n  const movePage = (direction) => {\r\n    if (direction === \"previous\") {\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateMemberships, pageUsers.usersPerPage, pageUsers.number - 1),\r\n        number: pageUsers.number - 1,\r\n        firstPage: paginate(stateMemberships, pageUsers.usersPerPage, pageUsers.number - 2).length,\r\n        lastPage: paginate(stateMemberships, pageUsers.usersPerPage, pageUsers.number).length\r\n      })\r\n    } else {\r\n      console.log(pageUsers.number);\r\n      console.log(paginate(stateMemberships, pageUsers.usersPerPage, pageUsers.number).length);\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateMemberships, pageUsers.usersPerPage, pageUsers.number + 1),\r\n        number: pageUsers.number + 1,\r\n        firstPage: paginate(stateMemberships, pageUsers.usersPerPage, pageUsers.number).length,\r\n        lastPage: paginate(stateMemberships, pageUsers.usersPerPage, pageUsers.number + 2).length\r\n      })\r\n    }\r\n  }\r\n\r\n  const findUser = (e) => {\r\n    console.log(\"find a user\");\r\n    // console.log(e.target.value);\r\n    const text = e.target.value.toLowerCase();\r\n    console.log(text);\r\n    const filteredusers = memberships.filter((user) => {\r\n      console.log(user.name)\r\n      return (user.name.toLowerCase().indexOf(text) > -1 || user.email.toLowerCase().indexOf(text) > -1);\r\n    })\r\n\r\n    console.log(filteredusers);\r\n    setStateMemberships(filteredusers);\r\n  }\r\n\r\n  console.log(pageUsers);\r\n  console.log(\"Change page is: \", changePages)\r\n\r\n  return (\r\n    <div className=\"allUsersCtn container\">\r\n      <div className=\"row\">\r\n        <div className=\"col allUsersTable\">\r\n          <h5 className=\"mb-4\">Showing 1 - 25 of {stateMemberships.length} Students</h5>\r\n          <h5>Active Memberships: {number}</h5>\r\n          <div className=\"row\">\r\n            <Col sm=\"5\">\r\n              <Form.Control className=\"my-3 input-md\" type=\"text\" placeholder=\"Find a user\" onChange={findUser} />\r\n            </Col>\r\n          </div>\r\n          <table style={{ width: \"100%\" }}>\r\n            <thead>\r\n              <tr>\r\n                <th>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    onChange={(e) => { selectUsers(\"all\", e) }}\r\n                  />\r\n                  {userSelected ? (\r\n                    <select defaultValue={'DEFAULT'} onChange={handleChange}>\r\n                      <option value=\"DEFAULT\" disabled>Bulk Actions</option>\r\n                      <option value=\"activate\">Activate</option>\r\n                      <option value=\"delete\">Delete</option>\r\n                    </select>\r\n                  ) : (\r\n                      <span onClick={() => orderBy(\"name\")}>Name</span>\r\n                    )}\r\n                </th>\r\n                <th onClick={() => orderBy(\"email\")}>Email</th>\r\n                <th onClick={() => orderBy(\"active\")}>First Bill</th>\r\n                <th onClick={() => orderBy(\"purchases\")}>Paid Through</th>\r\n                <th onClick={() => orderBy(\"purchases\")}>Cycles</th>\r\n                <th onClick={() => orderBy(\"date\")}>Valid</th>\r\n                <th onClick={() => orderBy(\"lastLogin\")}>Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {allUsers.length > 0 ? allUsers : <h3 className=\"my-3\">No Users found</h3>}\r\n            </tbody>\r\n            {/* <h1>{!test.loading ? \"Working\" : null}</h1> */}\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <nav aria-label=\"Page navigation example\" className=\"mt-3\">\r\n            <ul className=\"pagination justify-content-center\">\r\n              <li className={pageUsers.firstPage < 1 ? \"disabled page-item\" : \"page-item\"}>\r\n                <button onClick={() => movePage(\"previous\")} className=\"page-link\" href=\"#\">Previous</button>\r\n              </li>\r\n              <li className={pageUsers.lastPage < 1 ? \"disabled page-item\" : \"page-item\"}>\r\n                <button onClick={() => movePage(\"next\")}\r\n                  className=\"page-link\"\r\n                  >Next</button>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{modalText.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>Are you sure you want to {modalText.action} the following users?</p>\r\n          {modalText.users.map((user, i) => {\r\n            return <p key={i}><b>{user.name}</b></p>;\r\n          })}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={saveChanges}>\r\n            Save Changes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ActiveMemberships\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\private\\ProfileBilling.js",["378"],"import React, { useEffect } from 'react';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport { Link } from 'react-router-dom';\r\nimport { Table } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getCoursesOwned } from '../../actions/courses';\r\nimport {\r\n  checkMembership,\r\n  cancelMembership,\r\n  membershipResubscribe,\r\n} from '../../actions/membership';\r\nimport { getBilling } from '../../actions/payments';\r\nimport './Profile.css';\r\n\r\nfunction ProfileBilling() {\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector((state) => state.auth);\r\n  const { user, membership, buttonLoading } = auth;\r\n  const payment = useSelector((state) => state.payment);\r\n\r\n  useEffect(() => {\r\n    dispatch(getCoursesOwned(auth && auth.user && auth.user._id));\r\n    // console.log(auth.user.name);\r\n    // console.log(\"before check membership \");\r\n    if ( user && user.membership && user.membership.customerId\r\n    ) {\r\n      dispatch(checkMembership(auth.token));\r\n    }\r\n\r\n    dispatch(getBilling());\r\n\r\n    // console.log(auth);\r\n  }, [user]);\r\n\r\n  const userBilling =\r\n    payment &&\r\n    payment.billing &&\r\n    payment.billing.map((bill, i) => {\r\n      const date = new Date(bill.date);\r\n      const newDate = `${('0' + date.getDate()).slice(-2)}/${\r\n        ('0' + (date.getMonth() + 1)).slice(-2)\r\n      }/${date.getFullYear()}`;\r\n\r\n      return (\r\n        <tr key={bill._id}>\r\n          <td>{newDate}</td>\r\n\r\n          <td>{bill.productName.length > 1 ? (\r\n            bill.productName.map((product, i) => (\r\n              <span>{product}{(i === bill.productName.length - 1) ? \"\" : <br />}</span>\r\n            ))\r\n          ): bill.productName}</td>\r\n\r\n          <td>{bill._id}</td>\r\n\r\n          <td>${bill.price}</td>\r\n        </tr>\r\n      );\r\n    });\r\n\r\n  const billingDateParser = (dateToParse) => {\r\n    const untilDate = new Date(dateToParse);\r\n    return `${('0' + untilDate.getDate()).slice(-2)}/${('0' + (untilDate.getMonth() + 1)).slice(-2)}/${untilDate.getFullYear()}`\r\n  }\r\n\r\n  return (\r\n    <div className=\"col-lg-9 col-md-12 col-sm-12 billingCtn\">\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">Membership Details</div>\r\n        <div className=\"card-body\">\r\n          {auth && auth.membership && !auth.membership.active && (\r\n            <h3>\r\n              <b>Membership Status:</b> Not active\r\n            </h3>\r\n          )}\r\n          {membership && membership.active && (\r\n            <>\r\n              <h3>\r\n                <b>Membership Status:</b> {membership && membership.status}\r\n              </h3>\r\n              <h3>\r\n                { membership && membership.status === \"Active\" ? (\r\n                  <>\r\n                    <b>Next billing date: </b> \r\n                    {billingDateParser(membership && membership.nextBillingDate)}\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                  <b>Membership Valid Until: </b> \r\n                  {billingDateParser(membership && membership.paidThroughDate)}\r\n                  </>\r\n                )}\r\n              </h3>\r\n            </>\r\n          )}\r\n          {membership && membership.status === 'Active' && (\r\n            <>\r\n              {buttonLoading ? (\r\n                <button className=\"btn btn-info\">\r\n                  <div class=\"spinner-border spinner\" role=\"status\">\r\n                    <span class=\"sr-only\">Processing payment...</span>\r\n                  </div>\r\n                  Cancelling...\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  className=\"btn btn-info\"\r\n                  onClick={() => dispatch(cancelMembership(auth && auth.token))}\r\n                >\r\n                  Cancel Membership\r\n                </button>\r\n              )}\r\n            </>\r\n          )}\r\n          {auth &&\r\n            auth.membership.status === 'Canceled' &&\r\n            auth &&\r\n            auth.user &&\r\n            auth.user.membership &&\r\n            auth.user.membership.billingHistory &&\r\n            auth.user.membership.billingHistory.length > 0 && (\r\n              <button\r\n                onClick={() =>\r\n                  dispatch(membershipResubscribe(auth && auth.token))\r\n                }\r\n                className=\"actionButton\"\r\n              >\r\n                Resubscribe\r\n              </button>\r\n            )}\r\n          {auth && auth.membership && auth.membership.status === 'Failed' && (\r\n            <Link to=\"/membership\">Add a new payment method</Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <h2>\r\n        <b>Billing History</b>\r\n      </h2>\r\n      <div className=\"userBillingCtn\">\r\n        <Table striped bordered hover responsive size=\"sm\">\r\n          <thead className=\"thead-dark\">\r\n            <tr>\r\n              <th>Date</th>\r\n              <th className=\"productName\">Product Name</th>\r\n              <th>Order Number</th>\r\n              <th>Sale Price</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{userBilling}</tbody>\r\n        </Table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileBilling;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\FeatureCourses.js",["379","380","381"],"import React, {useRef, useState, useEffect} from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getCourses, saveFeaturedCoursesAction } from '../../actions/courses';\r\nimport './FeatureCourses.css';\r\n\r\nconst FeatureCourses = () => {\r\n  const dispatch = useDispatch();\r\n  \r\n  const auth = useSelector(state => state.auth);\r\n  const {loading, token} = auth;\r\n\r\n  \r\n  const courses = useSelector(state => state.courses);\r\n  const courseLoading = courses.loading;\r\n  const { message } = courses;\r\n\r\n  courses.all.length > 0 && courses.all.sort((a, b) => {\r\n    return a.featuredPosition - b.featuredPosition;\r\n  })\r\n  \r\n  const [data, setData] = useState(courses.all);\r\n\r\n  const [allItems, setAllItems] = useState([])\r\n\r\n  const updateCourses = () => {\r\n    const allupdatedCourses = courses.all.length > 0 && courses.all.map((course, i) => {\r\n      return {\r\n        id: course._id,\r\n        name: course.name,\r\n        tag: course.tag,\r\n        price: course.price,\r\n        newIndex: i + 1,\r\n        featured: course.featured,\r\n        featuredPosition: i + 1\r\n      }\r\n    });\r\n\r\n    console.log(allupdatedCourses);\r\n\r\n    setData(allupdatedCourses);\r\n  }\r\n  \r\n  useEffect(() => {\r\n    dispatch(getCourses());\r\n  }, [loading]);\r\n  \r\n  useEffect(() => {\r\n    if( !courseLoading ) {\r\n      updateCourses();\r\n    }\r\n\r\n\t}, [courseLoading]);\r\n\r\n  \r\n\r\n  let item = useRef();\r\n  let itemOver = useRef();\r\n  let dropzoneRef = useRef();\r\n\r\n  const onDragStart = (event) => {\r\n    console.log(\"---- ON DRAG START -------\");\r\n    item.current = event.target;\r\n    console.log(item.current);\r\n    event\r\n      .dataTransfer\r\n      .setData('text/plain', event.target.id);\r\n  \r\n    // event\r\n    //   .currentTarget\r\n    item.current\r\n      .style\r\n      .backgroundColor = 'yellow';\r\n  }\r\n\r\n  const onDrop = (event) => {\r\n    console.log(\"on drop starting\");\r\n    console.log(item.current);\r\n    console.log(itemOver.current);\r\n    let currenTarget = itemOver.current;\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    // const id = event\r\n    //   .dataTransfer\r\n    //   .getData('text');\r\n\r\n    //   console.log(id);\r\n    //   const draggableElement = document.getElementById(id);\r\n    //   console.log(draggableElement);\r\n\r\n      const dropzone = event.target;\r\n      // dropzone.appendChild(draggableElement);\r\n      dropzone.appendChild(itemOver.current);\r\n\r\n      const test = [...allItems, itemOver.current]\r\n\r\n      setAllItems(test);\r\n      console.log(currenTarget.dataset.item);\r\n      // setFeatureCourses([...featureCourses, JSON.parse(dropzone.querySelector(\".example-draggable\").dataset.item) ]);\r\n      // console.log(JSON.parse(dropzone.querySelector(\".example-draggable\").dataset.item));\r\n\r\n      // const allFeatureCourses = [];\r\n      // let featureCourseNodes = dropzoneRef.current.querySelectorAll(\".example-draggable\");\r\n      // for(let i=0; i < featureCourseNodes.length; i++) {\r\n      //   allFeatureCourses.push(featureCourseNodes[i].dataset.item);\r\n      // }\r\n\r\n      // console.log(featureCourses);\r\n      \r\n\r\n    //   event\r\n    // .dataTransfer\r\n    // .clearData();\r\n  }\r\n\r\n  const onDragOver = (event) => {\r\n    // event.stopPropagation();\r\n    console.log(\"calling OnDragOver\");\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n  }\r\n\r\n  const onDragEnd = (e) => {\r\n    console.log(\"----ON DRAG END---------\");\r\n    console.log(item.current);\r\n    item.current.style.display = 'block';\r\n\r\n    e.target.classList.remove(\"drag-up\");\r\n    itemOver.current.classList.remove(\"drag-up\");\r\n\r\n    e.target.classList.remove(\"drag-down\");\r\n    itemOver.current.classList.remove(\"drag-down\");\r\n    \r\n    let newData = [...data];\r\n    let from = Number(item.current.dataset.id);\r\n    let to = Number(itemOver.current.dataset.id);\r\n\r\n    console.log(from);\r\n    console.log(to);\r\n    newData.splice(to, 0, newData.splice(from, 1)[0]);\r\n\r\n    // console.log(newData);\r\n    // console.log(newData.splice(from, 1)[0])\r\n\r\n    // //set newIndex to judge direction of drag and drop\r\n    newData = newData.map((doc, index)=> {\r\n      doc.newIndex = index + 1;\r\n      return doc;\r\n    })\r\n\r\n    console.log(newData);\r\n\r\n    setData(newData);\r\n\r\n    // console.log(dropzoneRef.current.dataset.id);\r\n    // console.log(dropzoneRef.current.querySelectorAll(\".example-draggable\")[0]);\r\n    // console.log(dropzoneRef.current.querySelectorAll(\".example-draggable\"));\r\n\r\n    // const allFeatureCourses = [];\r\n    //   let featureCourseNodes = dropzoneRef.current.querySelectorAll(\".example-draggable\");\r\n    //   console.log(featureCourseNodes);\r\n    //   for(let i=0; i < featureCourseNodes.length; i++) {\r\n    //     console.log(\"THIS IS\");\r\n    //     console.log(featureCourseNodes[i]);\r\n    //     console.log(JSON.parse(featureCourseNodes[i].dataset.item));\r\n    //     allFeatureCourses.push(JSON.parse(featureCourseNodes[i].dataset.item));\r\n    //   }\r\n\r\n    // console.log(allFeatureCourses);\r\n  }\r\n\r\n  const dragOverItem = (e) => {\r\n    console.log(\"------ DRAG OVER ITEM -----\");\r\n    console.log(item.current);\r\n    \r\n\r\n      let featureCourseNodes = document.querySelectorAll(\".example-draggable\");\r\n      for(let i=0; i < featureCourseNodes.length; i++) {\r\n        featureCourseNodes[i].classList.remove(\"drag-up\", \"drag-down\");\r\n      }\r\n\r\n\r\n    \r\n    //itemOver.current = e.target;\r\n    itemOver.current = e.target;\r\n    // item.current = e.target;\r\n    console.log(\"ITEM OVER \");\r\n    console.log(itemOver.current);\r\n\r\n    console.log(\"EVENT TARGET \");\r\n    console.log(item.current);\r\n\r\n    item.current.style.display = \"none\";\r\n    //itemOver.current.style.display = \"none\";\r\n\r\n    if (e.target.tagName !== \"DIV\") {\r\n      return;\r\n    }\r\n\r\n    const fromIndex = JSON.parse(item.current.dataset.item).newIndex;\r\n    console.log(\"fromIndex \" + fromIndex);\r\n\r\n    const toIndex = JSON.parse(itemOver.current.dataset.item).newIndex;\r\n    console.log(\"toIndex \" + toIndex);\r\n\r\n    const animateName = fromIndex > toIndex ? \"drag-up\" : \"drag-down\";\r\n    console.log(\"animateName \" + animateName);\r\n\r\n\r\n    if (itemOver.current && item.current.dataset.item !== itemOver.current.dataset.item) {\r\n      itemOver.current.classList.remove(\"drag-up\", \"drag-down\");\r\n      // itemOver.current.classList.remove(\"drag-up\", \"drag-down\");\r\n      // itemOver.current = e.target\r\n    }\r\n\r\n    if(!itemOver.current.classList.contains(animateName)) {\r\n      itemOver.current.classList.add(animateName);\r\n      // itemOver.current = e.target;\r\n    }\r\n\r\n  }\r\n\r\n  // const allData = data.map((item, i) => {\r\n  //   return (\r\n  //     <div\r\n  //         className=\"example-draggable\"\r\n  //         draggable=\"true\"\r\n  //         onDragStart={onDragStart}\r\n  //         onDragEnd={onDragEnd}\r\n  //         onDragOver={dragOverItem}\r\n  //         data-id={i}\r\n  //         data-item={JSON.stringify(item)}\r\n         \r\n  //     >{item.name}</div>\r\n  //   )\r\n  // })\r\n\r\n  const updateFeatureCourses = (i) => {\r\n    console.log(\"Updating!!!\");\r\n    let copyFeature = [...data];\r\n    \r\n    console.log(copyFeature[i]);\r\n    console.log(copyFeature[i].featured)\r\n    copyFeature[i] = {\r\n      ...copyFeature[i],\r\n      featured: !copyFeature[i].featured\r\n    }\r\n\r\n    console.log(copyFeature[i].featured);\r\n    setData(copyFeature)\r\n  }\r\n\r\n  const allCourses = data.length > 0 && data.map((course, i) => {\r\n    // if(course.name === \"css animation\") {\r\n    //   console.log(course.name);\r\n    //   console.log(course.featured)\r\n    // }\r\n    return (\r\n      <div key={i}>\r\n        <div className=\"example-draggable\"\r\n            draggable=\"true\"\r\n            onDragStart={onDragStart}\r\n            onDragEnd={onDragEnd}\r\n            onDragOver={dragOverItem}\r\n            data-id={i}\r\n            data-item={JSON.stringify(course)}\r\n        >{course.name}</div>\r\n        <input type=\"checkBox\" value={course.featured} checked={course.featured ? \"checked\" : false} onChange={() => updateFeatureCourses(i)}/>\r\n      </div>\r\n    )\r\n\t\t\r\n  })\r\n\r\n  // const allFeatureCourses = featureCourses.length > 0 && featureCourses.map((course, i) => {\r\n\r\n  //   return (\r\n  //     <div className=\"example-draggable\"\r\n  //         draggable=\"true\"\r\n  //         onDragStart={onDragStart}\r\n  //         onDragEnd={onDragEnd}\r\n  //         onDragOver={dragOverItem}\r\n  //         data-id={i}\r\n  //         data-item={course}\r\n  //     >{course.name}</div>\r\n  //   )\r\n\t\t\r\n  // })\r\n\r\n  const saveFeaturedCourses = (e) => {\r\n    // const filteredData = data.filter((course) => {\r\n    //   return course.featured;\r\n    // })\r\n    e.preventDefault();\r\n    console.log(data);\r\n    dispatch(saveFeaturedCoursesAction(data, token));\r\n  }\r\n\r\n  console.log(data)\r\n  return (\r\n    <div>\r\n    <div className=\"example-parent\">\r\n      <h1>To-do list</h1>\r\n      <div className=\"example-origin\">\r\n        To-do\r\n        {allCourses}\r\n        <button onClick={saveFeaturedCourses}>Save Feature courses</button>\r\n        { message ? ( \r\n          <h3>{message}</h3> \r\n        ) : null}\r\n      </div>\r\n      <div>\r\n        <h2>Featured Courses</h2>\r\n        <div\r\n          className=\"example-dropzone\"\r\n          onDrop={e => onDrop(e)}\r\n          onDragOver={e => onDragOver(e)}\r\n          data-id={5}\r\n        >\r\n        </div>\r\n        \r\n      </div>\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FeatureCourses\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\AllUsers.js",["382","383","384","385","386"],"import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { allUsersAction } from '../../actions/admin';\r\nimport { saveUsersAction, deleteUsersAction } from '../../actions/admin';\r\n// import ModalWindow from '../utils/ModalWindow';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { Form, Col } from 'react-bootstrap';\r\nimport './AllUsers.css'\r\n\r\nconst AllUsers = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const admin = useSelector(state => state.admin);\r\n  const { users, loading } = admin;\r\n  // const courses = useSelector(state => state.courses);\r\n\r\n  const [stateUsers, setStateUsers] = useState([]);\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [userSelected, setUserSelected] = useState(false);\r\n  const [show, setShow] = useState(false);\r\n  const [changePages, setChangePages] = useState(true)\r\n  const [orderByState, setOrderByState] = useState(false)\r\n  \r\n  const [modalText, setModalText] = useState({\r\n    title: \"\",\r\n    action: \"\",\r\n    users: [],\r\n  });\r\n\r\n  const [orderState, setOrderState] = useState({\r\n    orderName: \"\",\r\n    asc: false\r\n  });\r\n\r\n  const [pageUsers, setPageUsers] = useState({\r\n    usersPerPage: 3,\r\n    values: [],\r\n    number: 1,\r\n    firstPage: 0,\r\n    lastPage: 1\r\n  });\r\n\r\n  const removeAdminFromUsers = users.filter(user => {\r\n    return user.role !== \"admin\";\r\n  })\r\n\r\n  useEffect(() => {\r\n    dispatch(allUsersAction());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      setStateUsers(removeAdminFromUsers);\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    setStateUsers(removeAdminFromUsers);\r\n    setChangePages(false)\r\n    setOrderByState(true)\r\n  }, [users])\r\n\r\n  useEffect(() => {\r\n    // console.log(stateUsers);\r\n    \r\n    const findSelected = stateUsers.find(user => {\r\n      // console.log(user);\r\n      return user.selected\r\n    });\r\n    console.log(findSelected);\r\n\r\n    setUserSelected(Boolean(findSelected));\r\n    \r\n    console.log(paginate(stateUsers, pageUsers.usersPerPage, 1))\r\n\r\n    if( changePages ) {\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateUsers, pageUsers.usersPerPage, 1),\r\n        number: pageUsers.number,\r\n        firstPage: pageUsers.firstPage,\r\n        // lastPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number + 1).length\r\n        lastPage: 1\r\n      });\r\n    } else if( orderByState ) {\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateUsers, pageUsers.usersPerPage, 1),\r\n        number: 1,\r\n        firstPage: 0,\r\n        // lastPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number + 1).length\r\n        lastPage: 1\r\n      });\r\n    }\r\n  }, [stateUsers]);\r\n\r\n  function paginate(array, page_size, page_number) {\r\n    // human-readable page numbers usually start with 1, so we reduce 1 in the first argument\r\n    return array.slice((page_number - 1) * page_size, page_number * page_size);\r\n  }\r\n\r\n  const selectUsers = (usersSelected, event) => {\r\n    // console.log(stateUsers);\r\n    console.log(event.target.type)\r\n    if (usersSelected === \"all\") {\r\n      const selectAllUsers = stateUsers.map((user, i) => {\r\n        // if () {\r\n        // console.log(user);\r\n        // console.log(selectAll)\r\n        return {\r\n          ...user,\r\n          selected: !selectAll,\r\n          key: i\r\n        }\r\n        // }\r\n      });\r\n\r\n      const filteredUsers = selectAllUsers.filter(user => {\r\n        return user.role !== \"admin\";\r\n      });\r\n\r\n      console.log(filteredUsers)\r\n      setChangePages(true);\r\n      setOrderByState(false);\r\n\r\n      setStateUsers(filteredUsers);\r\n      setSelectAll(!selectAll);\r\n    } else {\r\n      const selectAllCopy = [...stateUsers];\r\n      \r\n\r\n      const globalUserSelected = (pageUsers.number-1) * pageUsers.usersPerPage + usersSelected;\r\n      console.log(\"the user selected is:\", usersSelected);\r\n      console.log(selectAllCopy[globalUserSelected]);\r\n      // selectAllCopy[usersSelected].selected = !selectAllCopy[usersSelected].selected;\r\n      selectAllCopy[globalUserSelected].selected = event.target.checked;\r\n\r\n      setChangePages(false);\r\n      setOrderByState(false);\r\n      setStateUsers(selectAllCopy);\r\n    }\r\n\r\n  }\r\n\r\n  const allUsers = pageUsers.values.map((user, i) => {\r\n    if (user.role !== \"admin\") {\r\n      const today = new Date();\r\n      const joinedDate = new Date(user.joined);\r\n      const newJoinedDate = `${('0' + joinedDate.getDate()).slice(-2)}/${('0' + (joinedDate.getMonth() + 1)).slice(-2)}/${joinedDate.getFullYear()}`;\r\n      // console.log(\"Inside all Users\");\r\n      // console.log(user.selected)\r\n      const lastLogin = new Date(user.lastLogin);\r\n      const lastLoginDate = () => {\r\n        if (today.getDate() === lastLogin.getDate() &&\r\n          today.getMonth() === lastLogin.getMonth() &&\r\n          today.getFullYear() === lastLogin.getFullYear()\r\n        ) {\r\n          return `${('0' + lastLogin.getHours()).slice(-2)}:${('0' + lastLogin.getMinutes()).slice(-2)} - Today`\r\n        } else {\r\n          return `${('0' + lastLogin.getHours()).slice(-2)}:${('0' + lastLogin.getMinutes()).slice(-2)} - ${lastLogin.getDate()}/${('0' + lastLogin.getMonth()).slice(-2)}/${lastLogin.getFullYear()}`;\r\n        }\r\n      }\r\n      return (\r\n        <tr key={user._id}>\r\n          <td>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={user.selected == null ? false : user.selected}\r\n              value={user.selected}\r\n              onChange={(e) => { selectUsers(i, e) }}\r\n            />\r\n            <div className=\"allUsersTableDiv\"><Link to={`/admin/user/${user._id}`}>{user.name}</Link></div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{user.email}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{user.active}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">${user.purchases} USD</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{newJoinedDate}</div>\r\n          </td>\r\n          <td>\r\n            <div className=\"allUsersTableDiv\">{lastLoginDate()}</div>\r\n          </td>\r\n        </tr>\r\n      )\r\n    }\r\n  })\r\n\r\n  const orderBy = (order) => {\r\n    console.log(\"ordering by date\");\r\n    removeAdminFromUsers.sort(function (a, b) {\r\n      // Turn your strings into dates, and then subtract them\r\n      // to get a value that is either negative, positive, or zero.\r\n      if (order === \"date\") {\r\n        if (orderState.orderName === \"date\" && orderState.asc) {\r\n          return new Date(a.joined) - new Date(b.joined);\r\n        } else {\r\n          return new Date(b.joined) - new Date(a.joined);\r\n        }\r\n      } else if (order === \"purchases\") {\r\n        if (orderState.orderName === \"purchases\" && orderState.asc) {\r\n          return a.purchases - b.purchases;\r\n        } else {\r\n          return b.purchases - a.purchases;\r\n        }\r\n      } else if (order === \"email\") {\r\n        if (orderState.orderName === \"email\" && orderState.asc) {\r\n          if (a.email > b.email) { return -1; }\r\n          if (a.email < b.email) { return 1; }\r\n        } else {\r\n          if (a.email < b.email) { return -1; }\r\n          if (a.email > b.email) { return 1; }\r\n        }\r\n        return 0;\r\n      } else if (order === \"name\") {\r\n        let nameA = a.name.toLowerCase();\r\n        let nameB = b.name.toLowerCase();\r\n\r\n        if (orderState.orderName === \"name\" && orderState.asc) {\r\n          if (nameA > nameB) { return -1; }\r\n          if (nameA < nameB) { return 1; }\r\n        } else {\r\n          if (nameA < nameB) { return -1; }\r\n          if (nameA > nameB) { return 1; }\r\n        }\r\n\r\n        return 0;\r\n      } else if (order === \"active\") {\r\n        let activeA = a.active.toLowerCase();\r\n        let activeB = b.active.toLowerCase();\r\n\r\n        if (orderState.orderName === \"active\" && orderState.asc) {\r\n          if (activeA < activeB) { return -1; }\r\n          if (activeA > activeB) { return 1; }\r\n        } else {\r\n          if (activeA > activeB) { return -1; }\r\n          if (activeA < activeB) { return 1; }\r\n        }\r\n        return 0;\r\n      } else if (order === \"lastLogin\") {\r\n        if (orderState.lastLogin === \"date\" && orderState.asc) {\r\n          return new Date(a.lastLogin) - new Date(b.lastLogin);\r\n        } else {\r\n          return new Date(b.lastLogin) - new Date(a.lastLogin);\r\n        }\r\n      }\r\n      return 0;\r\n    });\r\n\r\n    setChangePages(false);\r\n    setOrderByState(true);\r\n    setStateUsers(removeAdminFromUsers);\r\n    // setTest({ loading: false })\r\n    setOrderState({\r\n      orderName: order,\r\n      asc: !orderState.asc\r\n    })\r\n  }\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleChange = (e) => {\r\n    console.log(e.target.value);\r\n\r\n    const selectedUsers = stateUsers.filter((user) => {\r\n      return user.selected\r\n    });\r\n\r\n    console.log(selectedUsers)\r\n\r\n    if (selectedUsers.length > 0) {\r\n      let title = \"\";\r\n      // let users = selectedUsers.map(user => {\r\n      //   return user._id;\r\n      // })\r\n      if (e.target.value === \"activate\") {\r\n        title = \"Activate Users\"\r\n      } else if (e.target.value === \"delete\") {\r\n        title = \"Delete Users\"\r\n      }\r\n\r\n      setModalText({\r\n        title: title,\r\n        action: e.target.value,\r\n        users: selectedUsers\r\n      });\r\n      handleShow();\r\n    }\r\n  }\r\n\r\n  const saveChanges = () => {\r\n    console.log(\"inside save changes\");\r\n    if (modalText.action === \"activate\") {\r\n      dispatch(saveUsersAction(modalText));\r\n    } else if (modalText.action === \"delete\") {\r\n      dispatch(deleteUsersAction(modalText));\r\n    }\r\n    setShow(false);\r\n  }\r\n\r\n  const movePage = (direction) => {\r\n    if (direction === \"previous\") {\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number - 1),\r\n        number: pageUsers.number - 1,\r\n        firstPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number - 2).length,\r\n        lastPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number).length\r\n      })\r\n    } else {\r\n      console.log(pageUsers.number);\r\n      console.log(paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number).length);\r\n      setPageUsers({\r\n        ...pageUsers,\r\n        values: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number + 1),\r\n        number: pageUsers.number + 1,\r\n        firstPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number).length,\r\n        lastPage: paginate(stateUsers, pageUsers.usersPerPage, pageUsers.number + 2).length\r\n      })\r\n    }\r\n  }\r\n\r\n  const findUser = (e) => {\r\n    console.log(\"find a user\");\r\n    // console.log(e.target.value);\r\n    const text = e.target.value.toLowerCase();\r\n    console.log(text);\r\n    const filteredusers = removeAdminFromUsers.filter((user) => {\r\n      console.log(user.name)\r\n      return (user.name.toLowerCase().indexOf(text) > -1 || user.email.toLowerCase().indexOf(text) > -1);\r\n    })\r\n\r\n    setChangePages(false);\r\n    setOrderByState(true);\r\n\r\n    console.log(filteredusers);\r\n    setStateUsers(filteredusers);\r\n  }\r\n\r\n  console.log(pageUsers);\r\n  console.log(\"Change page is: \", changePages)\r\n\r\n  return (\r\n    <div className=\"allUsersCtn container\">\r\n      <div className=\"row\">\r\n        <div className=\"col allUsersTable\">\r\n          <h5 className=\"mb-4\">Showing 1 - 25 of {stateUsers.length} Students</h5>\r\n          <div className=\"row\">\r\n            <Col sm=\"5\">\r\n              <Form.Control className=\"my-3 input-md\" type=\"text\" placeholder=\"Find a user\" onChange={findUser} />\r\n            </Col>\r\n          </div>\r\n          <table style={{ width: \"100%\" }}>\r\n            <thead>\r\n              <tr>\r\n                <th>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    onChange={(e) => { selectUsers(\"all\", e) }}\r\n                  />\r\n                  {userSelected ? (\r\n                    <select defaultValue={'DEFAULT'} onChange={handleChange}>\r\n                      <option value=\"DEFAULT\" disabled>Bulk Actions</option>\r\n                      <option value=\"activate\">Activate</option>\r\n                      <option value=\"delete\">Delete</option>\r\n                    </select>\r\n                  ) : (\r\n                      <span onClick={() => orderBy(\"name\")}>Name</span>\r\n                    )}\r\n                </th>\r\n                <th onClick={() => orderBy(\"email\")}>Email</th>\r\n                <th onClick={() => orderBy(\"active\")}>Active</th>\r\n                <th onClick={() => orderBy(\"purchases\")}>Purchases</th>\r\n                <th onClick={() => orderBy(\"date\")}>Joined</th>\r\n                <th onClick={() => orderBy(\"lastLogin\")}>Last login</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {allUsers.length > 0 ? allUsers : <h3 className=\"my-3\">No Users found</h3>}\r\n            </tbody>\r\n            {/* <h1>{!test.loading ? \"Working\" : null}</h1> */}\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <nav aria-label=\"Page navigation example\" className=\"mt-3\">\r\n            <ul className=\"pagination justify-content-center\">\r\n              <li className={pageUsers.firstPage < 1 ? \"disabled page-item\" : \"page-item\"}>\r\n                <button onClick={() => movePage(\"previous\")} className=\"page-link\" href=\"#\">Previous</button>\r\n              </li>\r\n              <li className={pageUsers.lastPage < 1 ? \"disabled page-item\" : \"page-item\"}>\r\n                <button onClick={() => movePage(\"next\")}\r\n                  className=\"page-link\"\r\n                  >Next</button>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{modalText.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>Are you sure you want to {modalText.action} the following users?</p>\r\n          {modalText.users.map((user, i) => {\r\n            return <p key={i}><b>{user.name}</b></p>;\r\n          })}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={saveChanges}>\r\n            Save Changes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AllUsers\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\CourseUpdate.js",["387","388","389","390","391","392","393"],"import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport store from '../../store';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getCourse } from '../../actions/courses';\r\nimport axios from 'axios';\r\nimport {\r\n  updateCourseAction,\r\n  deleteVideoClassAction,\r\n} from '../../actions/courses';\r\nimport { EditorState, convertToRaw } from 'draft-js';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport { stateFromHTML } from 'draft-js-import-html';\r\n\r\nimport './Admin.css';\r\nimport './CourseUpdate.css';\r\n\r\nconst CourseUpdate = () => {\r\n  // console.log(auth);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const course = useSelector((state) => state.courses);\r\n  const { data } = course;\r\n\r\n  const auth = useSelector((state) => state.auth);\r\n  const { user, token } = auth;\r\n\r\n  const [image, setImage] = useState('');\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const [courseState, setCourseState] = useState({\r\n    id: '',\r\n    courseName: '',\r\n    courseIntro: '',\r\n    courseTag: '',\r\n    courseDescription: ' ',\r\n    coursePrice: '',\r\n    courseLevel: 'DEFAULT',\r\n    classes: [\r\n      {\r\n        id: '',\r\n        lecture: '',\r\n        title: '',\r\n        url: '',\r\n        duration: 0,\r\n      },\r\n    ],\r\n    loaded: false,\r\n  });\r\n\r\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\r\n  const [saveCourse, setSaveCourse] = useState(false);\r\n\r\n  const { courseTag } = useParams();\r\n\r\n  useEffect(() => {\r\n    setCourseValues();\r\n  }, [courseState.loaded, course.loading, auth]);\r\n\r\n  useEffect(() => {\r\n    if (courseState.courseDescription) {\r\n      setEditorState(\r\n        EditorState.createWithContent(\r\n          stateFromHTML(courseState.courseDescription)\r\n        )\r\n      );\r\n    }\r\n  }, [courseState.courseDescription]);\r\n\r\n  useEffect(() => {\r\n    if (saveCourse) {\r\n      dispatch(updateCourseAction(courseState));\r\n    }\r\n  }, [saveCourse]);\r\n\r\n  const setCourseValues = async () => {\r\n    await dispatch(getCourse(courseTag, user && user._id));\r\n\r\n    // if (course && course.data && course.data._id) {\r\n    // \tfor (let i = 0; i < course.data.classes.length; i++) {\r\n    // \t\tdelete course.data.classes[i]._id\r\n    // \t}\r\n    // }\r\n\r\n    setCourseState({\r\n      ...courseState,\r\n      id: course && course.data && course.data._id,\r\n      courseName: course && course.data && course.data.name,\r\n      courseIntro: course && course.data && course.data.intro,\r\n      courseTag: course && course.data && course.data.tag,\r\n      courseDescription: course && course.data && course.data.description,\r\n      coursePrice: parseInt(course && course.data && course.data.price),\r\n      classes: course && course.data && course.data.classes,\r\n      loaded: true,\r\n      courseLevel: course && course.data && course.data.courseLevel,\r\n    });\r\n  };\r\n\r\n  const addClass = () => {\r\n    setCourseState({\r\n      ...courseState,\r\n      classes: [\r\n        ...courseState.classes,\r\n        {\r\n          lecture: '',\r\n          title: '',\r\n          url: '',\r\n          duration: 0,\r\n        },\r\n      ],\r\n    });\r\n  };\r\n\r\n  const updateCourse = (e) => {\r\n    setCourseState({\r\n      ...courseState,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const updateClass = (e) => {\r\n    const index = e.target.parentElement.parentElement.firstChild.value;\r\n    console.log('current index is ' + index);\r\n    const stateRef = { ...courseState };\r\n    console.log(e.target.value);\r\n    if (e.target.name === ('duration' || 'lecture')) {\r\n      stateRef.classes[index][e.target.name] = parseInt(e.target.value);\r\n    } else {\r\n      stateRef.classes[index][e.target.name] = e.target.value;\r\n    }\r\n    setCourseState(stateRef);\r\n  };\r\n\r\n  const allClasses =\r\n    courseState.classes &&\r\n    courseState.classes.length > 0 &&\r\n    courseState.classes.map((theClass, i) => {\r\n      return (\r\n        <div key={i} className=\"card singleClassCtn\">\r\n          <input type=\"hidden\" value={i} />\r\n          <div className=\"card-body\">\r\n            <label htmlFor=\"classNumber\" className=\"col-2\">\r\n              Class Number\r\n            </label>\r\n            <input\r\n              id=\"classNumber\"\r\n              type=\"number\"\r\n              name=\"lecture\"\r\n              placeholder=\"lecture\"\r\n              onChange={updateClass}\r\n              value={\r\n                courseState.classes[i].lecture\r\n                  ? courseState.classes[i].lecture\r\n                  : ''\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <label htmlFor=\"classTitle\" className=\"col-2\">\r\n              Class Title\r\n            </label>\r\n            <input\r\n              id=\"classTitle\"\r\n              type=\"text\"\r\n              name=\"title\"\r\n              placeholder=\"title\"\r\n              onChange={updateClass}\r\n              value={\r\n                courseState.classes[i].title ? courseState.classes[i].title : ''\r\n              }\r\n              size=\"50\"\r\n            />\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <label htmlFor=\"classVideoUrl\" className=\"col-2\">\r\n              Class Video Url\r\n            </label>\r\n            <input\r\n              id=\"classVideoDuration\"\r\n              type=\"text\"\r\n              name=\"url\"\r\n              placeholder=\"url\"\r\n              onChange={updateClass}\r\n              value={\r\n                courseState.classes[i].url ? courseState.classes[i].url : ''\r\n              }\r\n              size=\"50\"\r\n            />\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <label htmlFor=\"classVideoDuration\" className=\"col-2\">\r\n              Class Video Duration\r\n            </label>\r\n            <input\r\n              id=\"classVideoDuration\"\r\n              type=\"number\"\r\n              name=\"duration\"\r\n              placeholder=\"duration\"\r\n              onChange={updateClass}\r\n              value={\r\n                courseState.classes[i].duration\r\n                  ? courseState.classes[i].duration\r\n                  : ''\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <button\r\n              onClick={() =>\r\n                dispatch(\r\n                  deleteVideoClassAction(\r\n                    courseState.id,\r\n                    courseState.classes[i]._id\r\n                  )\r\n                )\r\n              }\r\n            >\r\n              <i className=\"fas fa-trash-alt\"></i> Delete Video\r\n            </button>\r\n          </div>\r\n        </div>\r\n        // value={courseState.classes[i].lecture}\r\n      );\r\n    });\r\n\r\n  // console.log(course);\r\n  // console.log(courseState);\r\n\r\n  const onEditorStateChange = (editorState) => {\r\n    setEditorState(editorState);\r\n    // setCourseState({\r\n    // \t...courseState,\r\n    // \tcourseDescription: draftToHtml(convertToRaw(editorState.getCurrentContent()))\r\n    // })\r\n  };\r\n\r\n  const updateDescription = () => {\r\n    setCourseState({\r\n      ...courseState,\r\n      courseDescription: draftToHtml(\r\n        convertToRaw(editorState.getCurrentContent())\r\n      ),\r\n    });\r\n    setSaveCourse(true);\r\n  };\r\n\r\n  const uploadFileHandler = async (e) => {\r\n    const file = e.target.files[0];\r\n    console.log(file);\r\n    const formData = new FormData();\r\n    formData.append('course', file);\r\n\r\n    // for (let [key, value] of formData) {\r\n    //   console.log(`${key}: ${value.name}`)\r\n    // }\r\n    setUploading(true);\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      };\r\n\r\n      const res = await axios.post(\r\n        `/api/coursePic/${data.tag}`,\r\n        formData,\r\n        config\r\n      );\r\n      console.log(res.data);\r\n      setImage(res.data);\r\n      setUploading(false);\r\n    } catch (error) {\r\n      console.log(error.data);\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const images = require.context('../../../../uploads/courses/', true);\r\n  let img = '';\r\n  try {\r\n    img = images(`./${data && data.tag}.jpg`);\r\n  } catch (error) {\r\n    img = images(`./default-course.jpg`);\r\n  }\r\n  // if( data && data.tag ) {\r\n  //   img = images(`./${data && data.tag}.jpg`);\r\n  // } else {\r\n  //   img = images(`./default-course.jpg`);\r\n  // }\r\n  let userPic = <img src={img.default} alt=\"my sf\" className=\"courseCover\" />;\r\n\r\n  // console.log(draftToHtml(convertToRaw(editorState.getCurrentContent())));\r\n  // console.log(courseState);\r\n  console.log(courseState);\r\n  // console.log(data && data.tag);\r\n  return (\r\n    <>\r\n      <div className=\"adminCtn\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <div className=\"col-10\">\r\n              <div>\r\n                <h1>Update the Course</h1>\r\n                {userPic}\r\n                <Form.Group controlId=\"image\">\r\n                  <Form.Label>Image</Form.Label>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    placeholder=\"Enter image url\"\r\n                    value={image ? image : ''}\r\n                    onChange={(e) => setImage(e.target.value)}\r\n                  ></Form.Control>\r\n                  <Form.File\r\n                    id=\"image-file\"\r\n                    label=\"Choose File\"\r\n                    custom\r\n                    onChange={uploadFileHandler}\r\n                  ></Form.File>\r\n                </Form.Group>\r\n                <label>Name</label>\r\n                <input\r\n                  required\r\n                  type=\"text\"\r\n                  name=\"courseName\"\r\n                  onChange={updateCourse}\r\n                  value={courseState.loaded ? courseState.courseName : ''}\r\n                  size=\"50\"\r\n                />\r\n                <br />\r\n                <label>Course Intro</label>\r\n                <input\r\n                  required\r\n                  type=\"text\"\r\n                  name=\"courseIntro\"\r\n                  onChange={updateCourse}\r\n                  value={courseState.loaded ? courseState.courseIntro : ''}\r\n                  size=\"70\"\r\n                />\r\n                <br />\r\n                <label>Course Tag</label>\r\n                <input\r\n                  required\r\n                  type=\"text\"\r\n                  name=\"courseTag\"\r\n                  onChange={updateCourse}\r\n                  value={courseState.loaded ? courseState.courseTag : ''}\r\n                  size=\"50\"\r\n                />\r\n                <br />\r\n                <label>Course Level</label>\r\n                <select name=\"courseLevel\" onChange={updateCourse} value={courseState.courseLevel}>\r\n                  <option value=\"DEFAULT\" disabled>\r\n                    Level\r\n                  </option>\r\n                  <option value=\"beginner\">Beginner</option>\r\n                  <option value=\"intermediate\">Intermediate</option>\r\n                  <option value=\"advanced\">Advanced</option>\r\n                </select>\r\n                <br />\r\n\r\n                <label>Course Description</label>\r\n                <br />\r\n                {/* <textarea required type=\"text\" name=\"courseDescription\" onChange={updateCourse} rows=\"15\" cols=\"80\" value={courseState.loaded ? courseState.courseDescription : \"\"} /><br/> */}\r\n\r\n                <Editor\r\n                  editorState={editorState}\r\n                  toolbarClassName=\"toolbarClassName\"\r\n                  wrapperClassName=\"wrapperClassName\"\r\n                  editorClassName=\"editorClassName\"\r\n                  onEditorStateChange={onEditorStateChange}\r\n                />\r\n\r\n                <label>Course Price</label>\r\n                <input\r\n                  required\r\n                  type=\"number\"\r\n                  name=\"coursePrice\"\r\n                  onChange={updateCourse}\r\n                  value={courseState.loaded ? courseState.coursePrice : ''}\r\n                />\r\n                <br />\r\n                <div className=\"card\">\r\n                  <div className=\"card-header\">Course Classes</div>\r\n                </div>\r\n                {allClasses}\r\n\r\n                <button onClick={addClass}>Add Class</button>\r\n                <button onClick={updateDescription}>Update Course</button>\r\n                {course && course.message ? <h1>{course.message}</h1> : null}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CourseUpdate;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\Sales.js",["394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411"],"import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { allUsersAction } from '../../actions/admin';\r\nimport { getSalesAction } from '../../actions/admin';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport './AllUsers.css'\r\n\r\nconst Sales = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const auth = useSelector(state => state.auth);\r\n  const { token } = auth;\r\n\r\n  const admin = useSelector(state => state.admin);\r\n  const { sales } = admin;\r\n\r\n  const [stateUsers, setStateUsers] = useState([]);\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [userSelected, setUserSelected] = useState(false);\r\n  const [show, setShow] = useState(false);\r\n  const [modalText, setModalText] = useState({\r\n    title: \"\",\r\n    action: \"\",\r\n    users: [],\r\n  });\r\n\r\n  const [salesState, setSalesState] = useState([]);\r\n  const [pageSales, setPageSales] = useState({\r\n    salesPerPage: 2,\r\n    values: [],\r\n    number: 1,\r\n    firstPage: 0,\r\n    lastPage: 1\r\n  });\r\n\r\n  // const [orderState, setOrderState] = useState({\r\n  //   orderName: \"\",\r\n  //   asc: false\r\n  // })\r\n\r\n  useEffect(() => {\r\n    dispatch(getSalesAction());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setSalesState(sales);\r\n\r\n  }, [sales])\r\n\r\n  useEffect(() => {\r\n    setPageSales({\r\n      ...pageSales,\r\n      values: paginate(salesState, pageSales.salesPerPage, 1),\r\n      lastPage: paginate(salesState, pageSales.salesPerPage, pageSales.number + 1).length\r\n    });\r\n\r\n  }, [salesState]);\r\n\r\n  const allSales = pageSales.values.map((sale, i) => {\r\n    const saleDate = new Date(sale.date);\r\n    const newSaleDate = `${saleDate.getDate()}/${saleDate.getMonth() + 1}/${saleDate.getFullYear()}`;\r\n    return (\r\n      <tr key={i}>\r\n        <td>{newSaleDate}</td>\r\n        <td>\r\n          <Link to={`/admin/user/${sale.user}`}>{sale.userEmail}</Link>\r\n        </td>\r\n        {/* <td>{sale.productName}</td> */}\r\n        <td>\r\n          {sale.productName.map((name, i) => {\r\n            let comma =\", \";\r\n            if(i + 1 === sale.productName.length) {\r\n              comma = \"\";\r\n            }\r\n            return <div key={i}>{name + comma}</div> ;\r\n          }) }\r\n        </td>\r\n        <td>{sale.coupon ? sale.coupon : \"-\"}</td>\r\n        <td>{sale.price}</td>\r\n      </tr>\r\n    )\r\n  });\r\n\r\n  function paginate(array, page_size, page_number) {\r\n    // human-readable page numbers usually start with 1, so we reduce 1 in the first argument\r\n    return array.slice((page_number - 1) * page_size, page_number * page_size);\r\n  }\r\n\r\n  console.log(paginate(salesState, 1, 0));\r\n  // console.log(paginate([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], 4, 1));\r\n\r\n  // const paginationButtons = salesState.map((sale, i) => {\r\n  //   return <li key={i} class=\"page-item\"><a onClick={() => setPageSales(paginate(salesState, 1, i + 1))} class=\"page-link\" href=\"#\">{i+1}</a></li>\r\n  // })\r\n\r\n  // useEffect(() => {\r\n  //   if (!loading) {\r\n  //     setStateUsers(users);\r\n  //   }\r\n  // }, [loading]);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(stateUsers);\r\n  //   const findSelected = stateUsers.find(user => {\r\n  //     console.log(user);\r\n  //     return user.selected\r\n  //   });\r\n  //   console.log(findSelected);\r\n\r\n  //   setUserSelected(Boolean(findSelected));\r\n  // }, [stateUsers])\r\n\r\n  // const selectUsers = (usersSelected, event) => {\r\n  //   // console.log(stateUsers);\r\n  //   console.log(event.target.type)\r\n  //   if (usersSelected === \"all\") {\r\n  //     const selectAllUsers = stateUsers.map((user, i) => {\r\n  //       // if () {\r\n  //         // console.log(user);\r\n  //         // console.log(selectAll)\r\n  //         return {\r\n  //           ...user,\r\n  //           selected: !selectAll,\r\n  //           key: i\r\n  //         }\r\n  //       // }\r\n  //     });\r\n\r\n  //     const filteredUsers = selectAllUsers.filter(user => {\r\n  //       return user.role != \"admin\";\r\n  //     });\r\n\r\n  //     console.log(filteredUsers)\r\n  //     setStateUsers(filteredUsers);\r\n  //     setSelectAll(!selectAll);\r\n  //   } else {\r\n  //     const selectAllCopy = [...stateUsers];\r\n  //     // selectAllCopy[usersSelected].selected = !selectAllCopy[usersSelected].selected;\r\n  //     selectAllCopy[usersSelected].selected =  event.target.checked;\r\n\r\n  //     setStateUsers(selectAllCopy);\r\n  //   }\r\n\r\n  // }\r\n\r\n  // const allUsers = stateUsers.map((user, i) => {\r\n  //   if (user.role !== \"admin\") {\r\n  //     const joinedDate = new Date(user.joined);\r\n  //     const newJoinedDate = `${joinedDate.getDate()}/${joinedDate.getMonth() + 1}/${joinedDate.getFullYear()}`;\r\n  //     // console.log(\"Inside all Users\");\r\n  //     // console.log(user.selected)\r\n  //     return (\r\n  //       <tr key={user._id}>\r\n  //         <td>\r\n  //           <input\r\n  //             type=\"checkbox\"\r\n  //             checked={user.selected == null ? false : user.selected}\r\n  //             value={user.selected}\r\n  //             onChange={(e) => { selectUsers(i, e) }}\r\n  //           />\r\n  //           <div className=\"allUsersTableDiv\"><Link to={`/admin/user/${user._id}`}>{user.name}</Link></div>\r\n  //         </td>\r\n  //         <td>\r\n  //           <div className=\"allUsersTableDiv\">{user.email}</div>\r\n  //         </td>\r\n  //         <td>\r\n  //           <div className=\"allUsersTableDiv\">{user.active}</div>\r\n  //         </td>\r\n  //         <td>\r\n  //           <div className=\"allUsersTableDiv\">${user.purchases} USD</div>\r\n  //         </td>\r\n  //         <td>\r\n  //           <div className=\"allUsersTableDiv\">{newJoinedDate}</div>\r\n  //         </td>\r\n  //       </tr>\r\n  //     )\r\n  //   }\r\n  // })\r\n\r\n  // const orderBy = (order) => {\r\n  //   console.log(\"ordering by date\");\r\n  //   users.sort(function (a, b) {\r\n  //     // Turn your strings into dates, and then subtract them\r\n  //     // to get a value that is either negative, positive, or zero.\r\n  //     if (order === \"date\") {\r\n  //       if (orderState.orderName === \"date\" && orderState.asc) {\r\n  //         return new Date(a.joined) - new Date(b.joined);\r\n  //       } else {\r\n  //         return new Date(b.joined) - new Date(a.joined);\r\n  //       }\r\n  //     } else if (order === \"purchases\") {\r\n  //       if (orderState.orderName === \"purchases\" && orderState.asc) {\r\n  //         return a.purchases - b.purchases;\r\n  //       } else {\r\n  //         return b.purchases - a.purchases;\r\n  //       }\r\n  //     } else if (order === \"email\") {\r\n  //       if (orderState.orderName === \"email\" && orderState.asc) {\r\n  //         if (a.email > b.email) { return -1; }\r\n  //         if (a.email < b.email) { return 1; }\r\n  //       } else {\r\n  //         if (a.email < b.email) { return -1; }\r\n  //         if (a.email > b.email) { return 1; }\r\n  //       }\r\n  //       return 0;\r\n  //     } else if (order === \"name\") {\r\n  //       let nameA = a.name.toLowerCase();\r\n  //       let nameB = b.name.toLowerCase();\r\n\r\n  //       if (orderState.orderName === \"name\" && orderState.asc) {\r\n  //         if (nameA > nameB) { return -1; }\r\n  //         if (nameA < nameB) { return 1; }\r\n  //       } else {\r\n  //         if (nameA < nameB) { return -1; }\r\n  //         if (nameA > nameB) { return 1; }\r\n  //       }\r\n\r\n  //       return 0;\r\n  //     } else if (order === \"active\") {\r\n  //       let activeA = a.active.toLowerCase();\r\n  //       let activeB = b.active.toLowerCase();\r\n\r\n  //       if (orderState.orderName === \"active\" && orderState.asc) {\r\n  //         if (activeA < activeB) { return -1; }\r\n  //         if (activeA > activeB) { return 1; }\r\n  //       } else {\r\n  //         if (activeA > activeB) { return -1; }\r\n  //         if (activeA < activeB) { return 1; }\r\n  //       }\r\n  //       return 0;\r\n  //     }\r\n\r\n  //   });\r\n\r\n  //   setStateUsers(users);\r\n  //   // setTest({ loading: false })\r\n  //   setOrderState({\r\n  //     orderName: order,\r\n  //     asc: !orderState.asc\r\n  //   })\r\n  // }\r\n\r\n  // const handleClose = () => setShow(false);\r\n  // const handleShow = () => setShow(true);\r\n\r\n  // const handleChange = (e) => {\r\n  //   console.log(e.target.value);\r\n\r\n  //   const selectedUsers = stateUsers.filter((user) => {\r\n  //     return user.selected\r\n  //   });\r\n\r\n  //   console.log(selectedUsers)\r\n\r\n  //   if (selectedUsers.length > 0) {\r\n  //     let title = \"\";\r\n  //     // let users = selectedUsers.map(user => {\r\n  //     //   return user._id;\r\n  //     // })\r\n  //     if (e.target.value === \"activate\") {\r\n  //       title = \"Activate Users\"\r\n  //     } else if (e.target.value === \"delete\") {\r\n  //       title = \"Delete Users\"\r\n  //     }\r\n\r\n  //     setModalText({\r\n  //       title: title,\r\n  //       action: e.target.value,\r\n  //       users: selectedUsers\r\n  //     });\r\n  //     handleShow();\r\n  //   }\r\n  // }\r\n\r\n  // const saveChanges = () => {\r\n  //   console.log(\"inside save changes\");\r\n  //   if (modalText.action === \"activate\") {\r\n  //     dispatch(saveUsersAction(modalText));\r\n  //   } else if (modalText.action === \"delete\") {\r\n  //     dispatch(deleteUsersAction(modalText));\r\n  //   }\r\n  //   setShow(false);\r\n  // }\r\n\r\n  // console.log(selectAll);\r\n  // console.log(modalText);\r\n  // console.log(stateUsers)\r\n  const movePage = (direction) => {\r\n    if (direction === \"previous\") {\r\n      setPageSales({\r\n        ...pageSales,\r\n        values: paginate(salesState, pageSales.salesPerPage, pageSales.number - 1),\r\n        number: pageSales.number - 1,\r\n        firstPage: paginate(salesState, pageSales.salesPerPage, pageSales.number - 2).length,\r\n        lastPage: paginate(salesState, pageSales.salesPerPage, pageSales.number).length\r\n      })\r\n    } else {\r\n      console.log(pageSales.number);\r\n      console.log(paginate(salesState, pageSales.salesPerPage, pageSales.number).length);\r\n      setPageSales({\r\n        ...pageSales,\r\n        values: paginate(salesState, pageSales.salesPerPage, pageSales.number + 1),\r\n        number: pageSales.number + 1,\r\n        firstPage: paginate(salesState, pageSales.salesPerPage, pageSales.number).length,\r\n        lastPage: paginate(salesState, pageSales.salesPerPage, pageSales.number + 2).length\r\n      })\r\n    }\r\n  }\r\n\r\n  // console.log(salesState);\r\n  console.log(pageSales);\r\n\r\n  // const checkEndPages = () => {\r\n  //   return paginate(salesState, 1, pageSales.number + 1).length\r\n  // }\r\n\r\n  return (\r\n    <div className=\"allUsersCtn container\">\r\n      <div className=\"row\">\r\n        <div className=\"col allUsersTable\">\r\n          <h5 className=\"mb-5\">Showing {pageSales.number === 1 ? 1 : pageSales.number * pageSales.salesPerPage - 1} {(salesState.length <= pageSales.number * pageSales.salesPerPage) ? \"\" : \" - \" + pageSales.number * pageSales.salesPerPage } of {salesState.length} Transactions</h5>\r\n          <table style={{ width: \"100%\" }}>\r\n            <thead>\r\n              <tr>\r\n                <th>Date</th>\r\n                <th>Student</th>\r\n                <th>Product</th>\r\n                <th>Discount</th>\r\n                <th>Price</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {/* {allUsers} */}\r\n              {allSales}\r\n            </tbody>\r\n            {/* <h1>{!test.loading ? \"Working\" : null}</h1> */}\r\n          </table>\r\n        </div>\r\n\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <nav aria-label=\"Page navigation example\" className=\"mt-3\">\r\n            <ul className=\"pagination justify-content-center\">\r\n              <li className={pageSales.firstPage < 1 ? \"disabled page-item\" : \"page-item\"}>\r\n                <a onClick={() => movePage(\"previous\")} className=\"page-link\" href=\"#\">Previous</a>\r\n              </li>\r\n              <li className={pageSales.lastPage < 1 ? \"disabled page-item\" : \"page-item\"}>\r\n                <a onClick={() => movePage(\"next\")} \r\n                  className=\"page-link\" \r\n                  href=\"#\">Next</a>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      {/* <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{modalText.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>Are you sure you want to {modalText.action} the following users?</p>\r\n          {modalText.users.map((user,i) => {\r\n            return <p key={i}><b>{user.name}</b></p>;\r\n          })}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={saveChanges}>\r\n            Save Changes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal> */}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Sales;","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\CourseCreate.js",["412","413","414"],"import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { EditorState, convertToRaw } from 'draft-js';\r\n\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport draftToHtml from 'draftjs-to-html';\r\n\r\nimport { createCourseAction } from '../../actions/courses';\r\nimport './Admin.css'\r\n\r\nconst CourseCreate = () => {\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst auth = useSelector(state => state.auth);\r\n\tconst course = useSelector(state => state.courses);\r\n\r\n\tconst [courseState, setCourseState] = useState({\r\n\t\tcourseName: \"\",\r\n\t\tcourseIntro: \"\",\r\n\t\tcourseTag: \"\",\r\n\t\tcourseDescription: [],\r\n\t\tcoursePrice: \"\",\r\n\t\tclasses: [{\r\n\t\t\tlecture: \"\",\r\n\t\t\ttitle: \"\",\r\n\t\t\turl: \"\",\r\n\t\t\tduration: 0\r\n\t\t}],\r\n\t\timage: null\r\n\t});\r\n\tconst [editorState, setEditorState] = useState(EditorState.createEmpty());\r\n\r\n\tconst addClass = () => {\r\n\t\tsetCourseState({\r\n\t\t\t...courseState,\r\n\t\t\tclasses: [...courseState.classes, {\r\n\t\t\t\tlecture: \"\",\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\turl: \"\",\r\n\t\t\t\tduration: 0\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tconst updateCourse = (e) => {\r\n\t\tsetCourseState({\r\n\t\t\t...courseState,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t})\r\n\t}\r\n\r\n\tconst updateClass = (e) => {\r\n\r\n\t\tconst index = e.target.parentElement.firstChild.value;\r\n\t\tconsole.log(\"current index is \" + index);\r\n\t\tconst stateRef = { ...courseState };\r\n\r\n\t\tstateRef.classes[index][e.target.name] = e.target.value;\r\n\t\tsetCourseState(stateRef);\r\n\t}\r\n\r\n\tconst allClasses = courseState.classes.map((theClass, i) => {\r\n\r\n\t\treturn (\r\n\t\t\t<div key={i}>\r\n\t\t\t\t<input type=\"hidden\" value={i} />\r\n\t\t\t\t<input type=\"text\" name=\"lecture\" placeholder=\"lecture\" onChange={updateClass} />\r\n\t\t\t\t<input type=\"text\" name=\"title\" placeholder=\"title\" onChange={updateClass} />\r\n\t\t\t\t<input type=\"text\" name=\"url\" placeholder=\"url\" onChange={updateClass} />\r\n\t\t\t\t<input type=\"text\" name=\"duration\" placeholder=\"duration\" onChange={updateClass} />\r\n\t\t\t</div>\r\n\t\t)\r\n\t});\r\n\r\n\tconst createCourse = () => {\r\n\t\t// editor.save().then((outputData) => {\r\n\t\t// \tconsole.log(outputData);\r\n\t\t// \tsetCourseState({\r\n\t\t// \t\t...courseState,\r\n\t\t// \t\tcourseDescription: outputData\r\n\t\t// \t})\r\n\t\t// })\r\n\t\tconsole.log(courseState);\r\n\t\tdispatch(createCourseAction(courseState));\r\n\t}\r\n\r\n\t// useEffect(() => {\r\n\t// \tif (courseState.courseDescription.length > 0) {\r\n\t// \t\tdispatch(createCourseAction(courseState));\r\n\t// \t}\r\n\t// }, [courseState.courseDescription]);\r\n\r\n\tconst onEditorStateChange = (editorState) => {\r\n\t\tsetEditorState(editorState);\r\n\t\tsetCourseState({\r\n\t\t\t...courseState,\r\n\t\t\tcourseDescription: draftToHtml(convertToRaw(editorState.getCurrentContent()))\r\n\t\t})\r\n\t}\r\n\r\n\tconsole.log(draftToHtml(convertToRaw(editorState.getCurrentContent())));\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"adminCtn\">\r\n\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\r\n\t\t\t\t\t\t<div className=\"col-10\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h1>Create your Course</h1>\r\n\t\t\t\t\t\t\t\t<label>Name</label><input required type=\"text\" name=\"courseName\" onChange={updateCourse} /><br />\r\n\t\t\t\t\t\t\t\t<label>Course Intro</label><input required type=\"text\" name=\"courseIntro\" onChange={updateCourse} /><br />\r\n\t\t\t\t\t\t\t\t<label>Course Tag</label><input required type=\"text\" name=\"courseTag\" onChange={updateCourse} /><br />\r\n\r\n\t\t\t\t\t\t\t\t<label>Course Description</label><br />\r\n\t\t\t\t\t\t\t\t{/* <textarea id=\"editorjs\" required type=\"text\" name=\"courseDescription\" onChange={updateCourse} rows=\"15\" cols=\"80\" /><br /> */}\r\n\t\t\t\t\t\t\t\t<Editor\r\n\t\t\t\t\t\t\t\t\teditorState={editorState}\r\n\t\t\t\t\t\t\t\t\ttoolbarClassName=\"toolbarClassName\"\r\n\t\t\t\t\t\t\t\t\twrapperClassName=\"wrapperClassName\"\r\n\t\t\t\t\t\t\t\t\teditorClassName=\"editorClassName\"\r\n\t\t\t\t\t\t\t\t\tonEditorStateChange={onEditorStateChange}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<label>Course Price</label><input required type=\"text\" name=\"coursePrice\" onChange={updateCourse} /><br />\r\n\t\t\t\t\t\t\t\t<label>Course Classes</label>\r\n\t\t\t\t\t\t\t\t{allClasses}\r\n\t\t\t\t\t\t\t\t<button onClick={addClass}>Add Class</button>\r\n\t\t\t\t\t\t\t\t<button onClick={createCourse}>Create Course</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default CourseCreate;","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\UserProfile.js",["415","416"],"import React, { useEffect, useState } from 'react';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams, withRouter  } from 'react-router-dom';\r\nimport { getUserDetails } from '../../actions/auth';\r\nimport { getCourses } from '../../actions/courses';\r\nimport { enrollUserInCourse, removeCourseAction, getUserPurchases, deleteUsersAction } from '../../actions/admin';\r\n// import './Courses.css'\r\nimport './UserProfile.css'\r\n\r\nconst Courses = ({ match, history }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const admin = useSelector(state => state.admin);\r\n  const { userPurchases } = admin;\r\n  const { _id, name, email, joined, active, purchases, courses, lastLogin } = admin.userDetails;\r\n  // console.log(_id)\r\n  const { subPage } = useParams();\r\n  // console.log(subPage);\r\n\r\n  const gettingCourses = useSelector(state => state.courses);\r\n  const { all } = gettingCourses;\r\n\r\n  const [courseSelected, setCourseSelected] = useState({\r\n    id: \"\",\r\n    name: \"\"\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [modalText, setModalText] = useState({\r\n    title: \"\",\r\n    body: \"\",\r\n    action: \"\",\r\n    users: [],\r\n  });\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const [userCourses, setUserCourses] = useState([]);\r\n  const [userCoursesDetails, setUserCoursesDetails] = useState([]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserDetails(subPage));\r\n    dispatch(getUserPurchases(subPage));\r\n    dispatch(getCourses());\r\n    // theUserCoursesFunc();\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setUserCourses(courses);\r\n  }, [courses]);\r\n\r\n  useEffect(() => {\r\n    theUserCoursesFunc();\r\n  }, [userCourses, all])\r\n\r\n  // const images = require.context('../../images/', true);\r\n  const images = require.context('../../../../uploads/users/', true);\r\n  let img;\r\n  try {\r\n    img = images(`./${subPage}.jpg`);\r\n  } catch (error) {\r\n    img = images(`./default.png`);\r\n  }\r\n\r\n  const date = new Date(joined);\r\n  const userJoined = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;\r\n\r\n  const allPurchases = userPurchases.map((purchase, i) => {\r\n    const date = new Date(purchase.date);\r\n    const newDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;\r\n    const products = purchase.productName.map((product, i) => {\r\n      console.log(product)\r\n      return <><span>{product}</span>{purchase.productName.length - 1 !== i ? <hr /> : \"\"}</>\r\n    })\r\n\r\n    return (\r\n      <tr key={i}>\r\n        <td>{newDate}</td>\r\n        <td>{purchase.price}</td>\r\n        <td>None</td>\r\n        <td>{purchase.price}</td>\r\n        <td>{products}</td>\r\n      </tr>\r\n    )\r\n  });\r\n\r\n  const allCourses = all.map((course, i) => {\r\n    return <option key={i} value={`${course._id},${course.name}`}>{course.name}</option>\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const valueSplit = e.target.value.split(\",\")\r\n    setCourseSelected({\r\n      id: valueSplit[0],\r\n      name: valueSplit[1]\r\n    });\r\n    setModalText({\r\n      ...modalText,\r\n      title: \"Enroll user in course\",\r\n      body: `Are you sure you want to enrol <b>${name}</b> in the following course?`,\r\n      action: \"adding\"\r\n    });\r\n\r\n    handleShow();\r\n  }\r\n\r\n  const modalAction = () => {\r\n    if (modalText.action === \"adding\") {\r\n      dispatch(enrollUserInCourse(courseSelected.id, _id));\r\n    } else if (modalText.action === \"removing\") {\r\n      dispatch(removeCourseAction(courseSelected.id, _id));\r\n    } else if(modalText.action === \"deleteUser\" ) {\r\n      dispatch(deleteUsersAction(modalText));\r\n      history.push(\"/admin/users\");\r\n    }\r\n    setShow(false);\r\n  }\r\n\r\n  const theUserCoursesFunc = () => {\r\n    console.log(\"calling theUserCoursesFunc\");\r\n    console.log(userCourses);\r\n    console.log(all);\r\n    let courses = [];\r\n    if (userCourses && userCourses.length > 0) {\r\n      for (let i = 0; i < all.length; i++) {\r\n        for (let j = 0; j < userCourses.length; j++) {\r\n          if (all[i]._id == userCourses[j]) {\r\n            courses = [...courses, all[i]]\r\n          }\r\n        }\r\n      }\r\n    }\r\n    console.log(\"THE COURSES ARE\");\r\n    console.log(courses);\r\n    setUserCoursesDetails(courses);\r\n  }\r\n\r\n  const removeCourse = (courseId, courseName) => {\r\n    // dispatch(removeCourseAction(courseId, userId));\r\n    setCourseSelected({\r\n      id: courseId,\r\n      name: courseName\r\n    });\r\n    setModalText({\r\n      ...modalText,\r\n      title: \"Delete course from user\",\r\n      body: \"Are you sure you want to delete the course \" + courseName + \"?\",\r\n      action: \"removing\"\r\n    });\r\n    handleShow();\r\n  }\r\n\r\n  const displayUserCourses = userCoursesDetails.map((course, i) => {\r\n    return (\r\n      <tr key={i}>\r\n        <td>{course.name}</td>\r\n        <td onClick={() => removeCourse(course._id, course.name)}><i className=\"fas fa-trash-alt\"></i></td>\r\n      </tr>\r\n    )\r\n  });\r\n\r\n  const deleteUser = () => {\r\n    setModalText({\r\n      title: \"Delete user\",\r\n      action: \"deleteUser\",\r\n      body: \"Are you sure you want to delete the user \" + name,\r\n      users: [admin.userDetails]\r\n    });\r\n    handleShow();\r\n  }\r\n\r\n  const userLastLogin = new Date(lastLogin);\r\n  const userLastLoginDate = `${userLastLogin.getDate()}/${userLastLogin.getMonth() + 1}/${userLastLogin.getFullYear()}`;\r\n\r\n  console.log(userCoursesDetails);\r\n  console.log(userCourses);\r\n  return (\r\n    <>\r\n      <div className=\"adminCtn col-xl-10\">\r\n        <div className=\"row\">\r\n          <div className=\"col-2\">\r\n            <img className=\"userAvatar\" src={img.default} style={{ width: \"100%\" }} alt=\"user avatar\" />\r\n          </div>\r\n          <div className=\"col-10\">\r\n            <div className=\"card userCard\">\r\n              <div className=\"userColDivider\">\r\n                <h6>Name</h6>\r\n                <h4>{name}</h4>\r\n              </div>\r\n              <div className=\"userColDivider\">\r\n                <h6>Email</h6>\r\n                <h4>{email}</h4>\r\n              </div>\r\n              <div className=\"userColDivider\">\r\n                <h6>Profile Status</h6>\r\n                <h4>{active}</h4>\r\n              </div>\r\n              <div className=\"userColDivider\">\r\n                <h6>Account Created</h6>\r\n                <h4>{userJoined}</h4>\r\n              </div>\r\n              <div className=\"userColDivider\">\r\n                <h6>Last Login</h6>\r\n                <h4>{userLastLoginDate}</h4>\r\n              </div>\r\n              <div className=\"userColDivider\">\r\n                <h6>Total Purchases</h6>\r\n                <h4>${purchases} USD</h4>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col-2\">\r\n            <h4>Purchase History</h4>\r\n          </div>\r\n          <div className=\"col-10\">\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th>DATE</th>\r\n                  <th>FULL PRICE</th>\r\n                  <th>DISCOUNTS</th>\r\n                  <th>SALE PRICE</th>\r\n                  <th>PRODUCT</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {allPurchases.reverse()}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col-2\">\r\n            <h4>User Courses</h4>\r\n          </div>\r\n          <div className=\"col-10\">\r\n            <div className=\"card userCard\">\r\n              <table>\r\n                <tbody>\r\n                  {displayUserCourses}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col-2\">\r\n            <h4>Enroll In Course</h4>\r\n            <p>Manually enroll this user in a new course. Users are not charged for manual enrollments.</p>\r\n          </div>\r\n          <div className=\"col-10\">\r\n            <div className=\"card userCard\">\r\n\r\n              <select defaultValue={'DEFAULT'} onChange={handleChange}>\r\n                <option value=\"DEFAULT\" disabled>Select course</option>\r\n                {allCourses}\r\n              </select>\r\n              {/* <button onClick={enrollUser}>Enroll</button> */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"offset-md-2 col-10\">\r\n            <button onClick={deleteUser} className=\"btn btn-danger\">Delete User</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{modalText.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>{modalText.body}</p>\r\n\r\n          <p><b>{courseSelected.name}</b></p>\r\n\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={modalAction}>\r\n            Save Changes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default withRouter(Courses);","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\AdminSidebar.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\admin\\Courses.js",["417","418"],"import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Col, Button } from 'react-bootstrap';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { getCourses } from '../../actions/courses';\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { saveFeaturedCoursesAction } from '../../actions/courses';\r\nimport './Courses.css';\r\n\r\nconst Courses = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const auth = useSelector((state) => state.auth);\r\n  const { token } = auth;\r\n  const courses = useSelector((state) => state.courses);\r\n  const { coursesLoaded } = courses;\r\n\r\n  const [courseState, setCourseSate] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if(!coursesLoaded) {\r\n      dispatch(getCourses());\r\n    }\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    const sortedCourses = [...courses.all];\r\n\r\n    sortedCourses.length > 0 &&\r\n      sortedCourses.sort((a, b) => {\r\n        return a.position - b.position;\r\n      });\r\n\r\n    setCourseSate(sortedCourses);\r\n  }, [courses]);\r\n\r\n  const images = require.context('../../../../uploads/courses/', true);\r\n\r\n  const updateFeatureCourses = (i) => {\r\n    console.log('Updating!!!');\r\n    let copyFeature = [...courseState];\r\n\r\n    console.log(copyFeature[i]);\r\n    console.log(copyFeature[i].featured);\r\n    copyFeature[i] = {\r\n      ...copyFeature[i],\r\n      featured: !copyFeature[i].featured,\r\n    };\r\n\r\n    console.log(copyFeature[i].featured);\r\n    setCourseSate(copyFeature);\r\n  };\r\n\r\n  const allCourses = courseState.map((course, index) => {\r\n    let img = '';\r\n    try {\r\n      img = images(`./${course.tag}.jpg`);\r\n    } catch (error) {\r\n      img = images(`./default-course.jpg`);\r\n    }\r\n\r\n    return (\r\n      <Draggable\r\n        draggableId={`draggable-${index}`}\r\n        key={`draggable-${index}`}\r\n        index={index}\r\n      >\r\n        {(provided) => (\r\n          <Col\r\n            md={4}\r\n            xl={3}\r\n            className=\"my-3\"\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n            ref={provided.innerRef}\r\n          >\r\n            <div className=\"cardBorder\">\r\n              <div className=\"courseThumbnail courseFeatured1\">\r\n                <Link to={`/admin/courses/update/${course.tag}`}>\r\n                  <img src={img.default} alt=\"javascript\" />\r\n                </Link>\r\n              </div>\r\n              <div className=\"courseTitleCtn\">\r\n                <Link to={`/admin/courses/update/${course.tag}`}>\r\n                  {course.name}\r\n                </Link>\r\n              </div>\r\n              <div className=\"separator\"></div>\r\n              <div className=\"priceCtn\">\r\n                {/* <span className=\"studentNumbers\">\r\n                    <i className=\"fas fa-user\"></i> Telmo Sampaio\r\n                  </span>\r\n                  <span className=\"price\">${course.price}</span> */}\r\n                <input\r\n                  type=\"checkbox\"\r\n                  value={course.featured}\r\n                  checked={course.featured ? 'checked' : false}\r\n                  onChange={() => updateFeatureCourses(index)}\r\n                />\r\n                <span>Featured</span>\r\n              </div>\r\n            </div>\r\n          </Col>\r\n        )}\r\n      </Draggable>\r\n    );\r\n  });\r\n\r\n  // if (auth && auth.user && auth.user.role !== 'admin') {\r\n  //   return <Redirect to=\"/\" />;\r\n  // }\r\n\r\n  const handleOnDragEnd = (result) => {\r\n    console.log(result);\r\n    if (!result.destination) return;\r\n    const items = Array.from(courseState);\r\n    const [reorderedItem] = items.splice(result.source.index, 1);\r\n    items.splice(result.destination.index, 0, reorderedItem);\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n      delete items[i].featuredPosition; \r\n      items[i].position = i;\r\n    }\r\n    setCourseSate(items);\r\n  };\r\n\r\n  const saveFeaturedCourses = (e) => {\r\n    // const filteredData = data.filter((course) => {\r\n    //   return course.featured;\r\n    // })\r\n    // e.preventDefault();\r\n    // console.log(data);\r\n    dispatch(saveFeaturedCoursesAction(courseState, token));\r\n  };\r\n\r\n  console.log(courseState);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"adminCtn\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12\">\r\n              {/* <div className=\"adminCourseTop\"> */}\r\n                <h1>Courses</h1>\r\n                <div>\r\n                  <Button variant=\"outline-primary\" onClick={saveFeaturedCourses} className=\"mr-4\">\r\n                    Save Feature courses\r\n                  </Button>\r\n                  {/* {message ? <h3>{message}</h3> : null} */}\r\n                  <Button>\r\n                    <Link to=\"/admin/courses/create\">New Course</Link>\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n                <DragDropContext onDragEnd={handleOnDragEnd}>\r\n                  <Droppable\r\n                    droppableId=\"coursesSequence\"\r\n                    direction=\"horizontal\"\r\n                    type=\"column\"\r\n                  >\r\n                    {(provided) => (\r\n                      <div\r\n                        className=\"row\"\r\n                        {...provided.droppableProps}\r\n                        ref={provided.innerRef}\r\n                      >\r\n                        {allCourses}\r\n                        {provided.placeholder}\r\n                      </div>\r\n                    )}\r\n                  </Droppable>\r\n                </DragDropContext>\r\n              {/* </div> */}\r\n            {/* </div> */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Courses;\r\n","D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\utils\\Loader.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\partials\\Header.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\partials\\SecondHeader.js",["419","420","421","422","423"],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\couponConstants.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\payments.js",["424","425"],"import axios from 'axios';\r\nimport { GET_COUPON_BY_ID_FAIL, GET_COUPON_BY_ID_REQUEST, GET_COUPON_BY_ID_SUCCESS } from '../contants/couponConstants';\r\nimport {\r\n  PAY_COURSE,\r\n  PAY_ERROR,\r\n  GET_PAYMENT_TOKEN,\r\n  PAY_MEMBERSHIP_REQUEST,\r\n  PAY_MEMBERSHIP,\r\n  RESET_PAYMENT_RESULT,\r\n  GET_USER_BILLING\r\n} from './types';\r\n\r\nimport { PAY_COURSE_REQUEST, PAY_BUTTON_LOAD_REQUEST, PAY_BUTTON_LOAD_SUCCESS } from '../contants/paymentConstants';\r\nimport { CHECK_MEMBERSHIP, CHECK_MEMBERSHIP_REQUEST } from '../contants/membershipConstants';\r\n\r\nexport const payAction = (userId, token) => async dispatch => {\r\n  // console.log(\"pay action\");\r\n  // console.log(\"userId\", userId);\r\n  // console.log(\"token\", token);\r\n  try {\r\n    console.log(\"inside actions\");\r\n    console.log(`/api/braintree/getToken/${userId}`);\r\n    const res = await axios(`/api/braintree/getToken/${userId}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: 'application/json',\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${userId}`\r\n      }\r\n    });\r\n    console.log(res.data);\r\n    dispatch({\r\n      type: GET_PAYMENT_TOKEN,\r\n      payload: res.data\r\n    });\r\n  } catch (err) {\r\n    // const errors = err.response.data.message;\r\n    console.log(err);\r\n  }\r\n}\r\n\r\nexport const processPayment = (paymentData, code, courses) => async dispatch => {\r\n  console.log(\"processPayment action\");\r\n  console.log(paymentData);\r\n  try {\r\n    dispatch({\r\n      type: PAY_COURSE_REQUEST\r\n    });\r\n\r\n    dispatch({\r\n      type: PAY_BUTTON_LOAD_REQUEST \r\n    });\r\n\r\n    console.log(\"inside processPayment actions\");\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    }\r\n    // paymentData.courseTag = courseTag\r\n\r\n    const body = {\r\n      paymentData,\r\n      code,\r\n      courses\r\n    }\r\n\r\n    const res = await axios.post(`/api/braintree/payment`, body, config);\r\n\r\n    console.log(res.data);\r\n\r\n    let res2 = \"\";\r\n\r\n    if (res.data.success) {\r\n      const body2 = {\r\n       transactionId: res.data.transactionId\r\n      }\r\n      res2 = await axios.post(`/api/braintree/checkout/success`, body2, config);\r\n      console.log(\"email response\");\r\n      console.log(res2.data.message);\r\n\r\n      dispatch({\r\n        type: PAY_BUTTON_LOAD_SUCCESS\r\n      });\r\n\r\n      dispatch({\r\n        type: PAY_COURSE,\r\n        payload: res2.data\r\n      });\r\n    } else {\r\n      throw new Error(\"Error\");\r\n    }\r\n\r\n  } catch (err) {\r\n    const errors = err.response.data\r\n    dispatch({\r\n      type: PAY_ERROR,\r\n      payload: errors\r\n    });\r\n  }\r\n}\r\n\r\nexport const membershipPayment = (user, token, paymentData, duration) => async dispatch => {\r\n  console.log(\"this is payment data\");\r\n  // console.log(paymentData);\r\n  // console.log(duration);\r\n  // console.log(user.membership.customerID);\r\n  try {\r\n    console.log(\"inside subscriptionPayment actions\");\r\n    const config = {\r\n      headers: {\r\n        Accept: 'application/json',\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    }\r\n\r\n    // const body = JSON.stringify(paymentData);\r\n    const body = JSON.stringify({\r\n      ...paymentData,\r\n      name: user.name,\r\n      email: user.email,\r\n      membershipDuration: duration\r\n    });\r\n\r\n    dispatch({\r\n      type: PAY_MEMBERSHIP_REQUEST,\r\n    });\r\n\r\n    const res = await axios.post(`/api/braintree/membership/${user._id}`, body, config);\r\n\r\n    console.log(res.data);\r\n    dispatch({\r\n      type: PAY_MEMBERSHIP,\r\n      payload: res.data\r\n    });\r\n\r\n  } catch (err) {\r\n    // const errors = err.response.data.message;\r\n    console.log(err);\r\n  }\r\n}\r\n\r\nexport const resetPaymentResult = () => async dispatch => {\r\n  try {\r\n    dispatch({\r\n      type: RESET_PAYMENT_RESULT,\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nexport const getBilling = () => async dispatch => {\r\n\r\n  try {\r\n    console.log(\"inside getUser billing\")\r\n    const res = await axios.post(\"/api/braintree/getUserBilling\");\r\n\r\n    console.log(res.data)\r\n\r\n    dispatch({\r\n      type: GET_USER_BILLING,\r\n      payload: res.data\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const findCouponIdAction = (couponCode) => async dispatch => {\r\n  try {\r\n    console.log(couponCode);\r\n\r\n    dispatch({\r\n      type: GET_COUPON_BY_ID_REQUEST\r\n    });\r\n\r\n    const {data} = await axios.get(`/api/getCouponId/${couponCode}`);\r\n    console.log(\"THE COUPON IS\");\r\n    console.log(data.coupon);\r\n\r\n    dispatch({\r\n      type: GET_COUPON_BY_ID_SUCCESS,\r\n      payload: data\r\n    });\r\n\r\n  } catch (error) {\r\n    console.log(error);\r\n    const errors = error.response.data;\r\n    console.log(errors.message);\r\n\r\n    dispatch({\r\n      type: GET_COUPON_BY_ID_FAIL,\r\n      payload: errors\r\n    });\r\n  \r\n  }\r\n}","D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\index.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\courseConstants.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\membership.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\actions\\admin.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\membershipConstants.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\paymentConstants.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\admin.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\auth.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\courses.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\reducers\\payment.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\contants\\adminConstants.js",[],"D:\\dev-projects\\telmo-academy-v3\\client\\src\\components\\pages\\Terms.js",[],{"ruleId":"426","replacedBy":"427"},{"ruleId":"428","replacedBy":"429"},{"ruleId":"430","severity":1,"message":"431","line":19,"column":6,"nodeType":"432","endLine":19,"endColumn":8,"suggestions":"433"},{"ruleId":"434","severity":1,"message":"435","line":28,"column":13,"nodeType":"436","endLine":28,"endColumn":25},{"ruleId":"434","severity":1,"message":"435","line":29,"column":13,"nodeType":"436","endLine":29,"endColumn":25},{"ruleId":"437","severity":1,"message":"438","line":71,"column":19,"nodeType":"439","messageId":"440","endLine":71,"endColumn":21},{"ruleId":"437","severity":1,"message":"438","line":95,"column":25,"nodeType":"439","messageId":"440","endLine":95,"endColumn":27},{"ruleId":"441","severity":1,"message":"442","line":6,"column":21,"nodeType":"443","messageId":"444","endLine":6,"endColumn":36},{"ruleId":"441","severity":1,"message":"445","line":14,"column":10,"nodeType":"443","messageId":"444","endLine":14,"endColumn":17},{"ruleId":"441","severity":1,"message":"446","line":16,"column":15,"nodeType":"443","messageId":"444","endLine":16,"endColumn":22},{"ruleId":"430","severity":1,"message":"447","line":31,"column":5,"nodeType":"432","endLine":31,"endColumn":34,"suggestions":"448"},{"ruleId":"430","severity":1,"message":"449","line":31,"column":17,"nodeType":"450","endLine":31,"endColumn":33},{"ruleId":"430","severity":1,"message":"449","line":41,"column":6,"nodeType":"450","endLine":41,"endColumn":40},{"ruleId":"430","severity":1,"message":"451","line":49,"column":5,"nodeType":"432","endLine":49,"endColumn":24,"suggestions":"452"},{"ruleId":"441","severity":1,"message":"453","line":4,"column":10,"nodeType":"443","messageId":"444","endLine":4,"endColumn":14},{"ruleId":"430","severity":1,"message":"431","line":23,"column":6,"nodeType":"432","endLine":23,"endColumn":8,"suggestions":"454"},{"ruleId":"430","severity":1,"message":"455","line":36,"column":6,"nodeType":"432","endLine":36,"endColumn":15,"suggestions":"456"},{"ruleId":"457","severity":1,"message":"458","line":41,"column":55,"nodeType":"459","messageId":"460","endLine":41,"endColumn":57},{"ruleId":"441","severity":1,"message":"461","line":46,"column":7,"nodeType":"443","messageId":"444","endLine":46,"endColumn":10},{"ruleId":"441","severity":1,"message":"462","line":2,"column":10,"nodeType":"443","messageId":"444","endLine":2,"endColumn":18},{"ruleId":"430","severity":1,"message":"463","line":12,"column":6,"nodeType":"432","endLine":12,"endColumn":8,"suggestions":"464"},{"ruleId":"441","severity":1,"message":"465","line":1,"column":26,"nodeType":"443","messageId":"444","endLine":1,"endColumn":35},{"ruleId":"441","severity":1,"message":"442","line":3,"column":10,"nodeType":"443","messageId":"444","endLine":3,"endColumn":25},{"ruleId":"441","severity":1,"message":"466","line":4,"column":10,"nodeType":"443","messageId":"444","endLine":4,"endColumn":28},{"ruleId":"441","severity":1,"message":"467","line":6,"column":8,"nodeType":"443","messageId":"444","endLine":6,"endColumn":13},{"ruleId":"441","severity":1,"message":"468","line":10,"column":8,"nodeType":"443","messageId":"444","endLine":10,"endColumn":16},{"ruleId":"430","severity":1,"message":"469","line":34,"column":5,"nodeType":"432","endLine":34,"endColumn":14,"suggestions":"470"},{"ruleId":"441","severity":1,"message":"471","line":36,"column":8,"nodeType":"443","messageId":"444","endLine":36,"endColumn":16},{"ruleId":"441","severity":1,"message":"472","line":38,"column":8,"nodeType":"443","messageId":"444","endLine":38,"endColumn":16},{"ruleId":"441","severity":1,"message":"473","line":62,"column":8,"nodeType":"443","messageId":"444","endLine":62,"endColumn":19},{"ruleId":"441","severity":1,"message":"474","line":1,"column":17,"nodeType":"443","messageId":"444","endLine":1,"endColumn":25},{"ruleId":"441","severity":1,"message":"442","line":4,"column":10,"nodeType":"443","messageId":"444","endLine":4,"endColumn":25},{"ruleId":"441","severity":1,"message":"462","line":6,"column":10,"nodeType":"443","messageId":"444","endLine":6,"endColumn":18},{"ruleId":"430","severity":1,"message":"475","line":36,"column":6,"nodeType":"432","endLine":36,"endColumn":8,"suggestions":"476"},{"ruleId":"441","severity":1,"message":"477","line":5,"column":16,"nodeType":"443","messageId":"444","endLine":5,"endColumn":19},{"ruleId":"441","severity":1,"message":"478","line":34,"column":16,"nodeType":"443","messageId":"444","endLine":34,"endColumn":23},{"ruleId":"430","severity":1,"message":"479","line":53,"column":6,"nodeType":"432","endLine":53,"endColumn":12,"suggestions":"480"},{"ruleId":"430","severity":1,"message":"481","line":69,"column":6,"nodeType":"432","endLine":69,"endColumn":31,"suggestions":"482"},{"ruleId":"430","severity":1,"message":"483","line":123,"column":6,"nodeType":"432","endLine":123,"endColumn":14,"suggestions":"484"},{"ruleId":"430","severity":1,"message":"463","line":150,"column":6,"nodeType":"432","endLine":150,"endColumn":14,"suggestions":"485"},{"ruleId":"441","severity":1,"message":"486","line":159,"column":9,"nodeType":"443","messageId":"444","endLine":159,"endColumn":17},{"ruleId":"437","severity":1,"message":"487","line":231,"column":44,"nodeType":"439","messageId":"440","endLine":231,"endColumn":46},{"ruleId":"441","severity":1,"message":"465","line":1,"column":37,"nodeType":"443","messageId":"444","endLine":1,"endColumn":46},{"ruleId":"441","severity":1,"message":"488","line":19,"column":10,"nodeType":"443","messageId":"444","endLine":19,"endColumn":17},{"ruleId":"441","severity":1,"message":"489","line":19,"column":19,"nodeType":"443","messageId":"444","endLine":19,"endColumn":29},{"ruleId":"441","severity":1,"message":"462","line":3,"column":21,"nodeType":"443","messageId":"444","endLine":3,"endColumn":29},{"ruleId":"441","severity":1,"message":"453","line":7,"column":10,"nodeType":"443","messageId":"444","endLine":7,"endColumn":14},{"ruleId":"441","severity":1,"message":"490","line":21,"column":11,"nodeType":"443","messageId":"444","endLine":21,"endColumn":26},{"ruleId":"441","severity":1,"message":"491","line":13,"column":11,"nodeType":"443","messageId":"444","endLine":13,"endColumn":15},{"ruleId":"441","severity":1,"message":"492","line":13,"column":26,"nodeType":"443","messageId":"444","endLine":13,"endColumn":32},{"ruleId":"430","severity":1,"message":"493","line":20,"column":6,"nodeType":"432","endLine":20,"endColumn":8,"suggestions":"494"},{"ruleId":"441","severity":1,"message":"490","line":16,"column":11,"nodeType":"443","messageId":"444","endLine":16,"endColumn":26},{"ruleId":"441","severity":1,"message":"488","line":16,"column":34,"nodeType":"443","messageId":"444","endLine":16,"endColumn":41},{"ruleId":"430","severity":1,"message":"495","line":30,"column":6,"nodeType":"432","endLine":30,"endColumn":21,"suggestions":"496"},{"ruleId":"430","severity":1,"message":"463","line":30,"column":6,"nodeType":"432","endLine":30,"endColumn":20,"suggestions":"497"},{"ruleId":"430","severity":1,"message":"463","line":22,"column":6,"nodeType":"432","endLine":22,"endColumn":20,"suggestions":"498"},{"ruleId":"441","severity":1,"message":"499","line":7,"column":16,"nodeType":"443","messageId":"444","endLine":7,"endColumn":20},{"ruleId":"441","severity":1,"message":"500","line":7,"column":22,"nodeType":"443","messageId":"444","endLine":7,"endColumn":28},{"ruleId":"441","severity":1,"message":"478","line":19,"column":16,"nodeType":"443","messageId":"444","endLine":19,"endColumn":23},{"ruleId":"430","severity":1,"message":"479","line":27,"column":6,"nodeType":"432","endLine":27,"endColumn":8,"suggestions":"501"},{"ruleId":"441","severity":1,"message":"486","line":39,"column":9,"nodeType":"443","messageId":"444","endLine":39,"endColumn":17},{"ruleId":"441","severity":1,"message":"502","line":5,"column":42,"nodeType":"443","messageId":"444","endLine":5,"endColumn":57},{"ruleId":"441","severity":1,"message":"468","line":13,"column":9,"nodeType":"443","messageId":"444","endLine":13,"endColumn":17},{"ruleId":"430","severity":1,"message":"503","line":39,"column":6,"nodeType":"432","endLine":39,"endColumn":12,"suggestions":"504"},{"ruleId":"441","severity":1,"message":"505","line":41,"column":9,"nodeType":"443","messageId":"444","endLine":41,"endColumn":21},{"ruleId":"430","severity":1,"message":"479","line":62,"column":6,"nodeType":"432","endLine":62,"endColumn":8,"suggestions":"506"},{"ruleId":"430","severity":1,"message":"479","line":68,"column":6,"nodeType":"432","endLine":68,"endColumn":27,"suggestions":"507"},{"ruleId":"430","severity":1,"message":"508","line":79,"column":6,"nodeType":"432","endLine":79,"endColumn":42,"suggestions":"509"},{"ruleId":"430","severity":1,"message":"449","line":79,"column":7,"nodeType":"450","endLine":79,"endColumn":41},{"ruleId":"430","severity":1,"message":"510","line":44,"column":6,"nodeType":"432","endLine":44,"endColumn":8,"suggestions":"511"},{"ruleId":"430","severity":1,"message":"512","line":82,"column":6,"nodeType":"432","endLine":82,"endColumn":17,"suggestions":"513"},{"ruleId":"441","severity":1,"message":"514","line":16,"column":9,"nodeType":"443","messageId":"444","endLine":16,"endColumn":13},{"ruleId":"430","severity":1,"message":"479","line":51,"column":6,"nodeType":"432","endLine":51,"endColumn":8,"suggestions":"515"},{"ruleId":"430","severity":1,"message":"516","line":57,"column":6,"nodeType":"432","endLine":57,"endColumn":15,"suggestions":"517"},{"ruleId":"430","severity":1,"message":"518","line":77,"column":6,"nodeType":"432","endLine":77,"endColumn":18,"suggestions":"519"},{"ruleId":"437","severity":1,"message":"487","line":102,"column":26,"nodeType":"439","messageId":"440","endLine":102,"endColumn":28},{"ruleId":"441","severity":1,"message":"520","line":118,"column":9,"nodeType":"443","messageId":"444","endLine":118,"endColumn":17},{"ruleId":"457","severity":1,"message":"458","line":118,"column":51,"nodeType":"459","messageId":"460","endLine":118,"endColumn":53},{"ruleId":"457","severity":1,"message":"521","line":169,"column":31,"nodeType":"522","messageId":"460","endLine":169,"endColumn":40},{"ruleId":"441","severity":1,"message":"523","line":353,"column":11,"nodeType":"443","messageId":"444","endLine":353,"endColumn":24},{"ruleId":"430","severity":1,"message":"479","line":35,"column":6,"nodeType":"432","endLine":35,"endColumn":8,"suggestions":"524"},{"ruleId":"434","severity":1,"message":"435","line":55,"column":5,"nodeType":"436","endLine":63,"endColumn":6},{"ruleId":"525","severity":1,"message":"526","line":193,"column":21,"nodeType":"527","endLine":193,"endColumn":48},{"ruleId":"441","severity":1,"message":"528","line":3,"column":10,"nodeType":"443","messageId":"444","endLine":3,"endColumn":24},{"ruleId":"441","severity":1,"message":"529","line":16,"column":11,"nodeType":"443","messageId":"444","endLine":16,"endColumn":16},{"ruleId":"430","severity":1,"message":"479","line":52,"column":6,"nodeType":"432","endLine":52,"endColumn":8,"suggestions":"530"},{"ruleId":"430","severity":1,"message":"531","line":58,"column":6,"nodeType":"432","endLine":58,"endColumn":15,"suggestions":"532"},{"ruleId":"430","severity":1,"message":"533","line":105,"column":6,"nodeType":"432","endLine":105,"endColumn":24,"suggestions":"534"},{"ruleId":"441","severity":1,"message":"523","line":186,"column":13,"nodeType":"443","messageId":"444","endLine":186,"endColumn":26},{"ruleId":"430","severity":1,"message":"535","line":33,"column":6,"nodeType":"432","endLine":33,"endColumn":12,"suggestions":"536"},{"ruleId":"430","severity":1,"message":"479","line":45,"column":6,"nodeType":"432","endLine":45,"endColumn":15,"suggestions":"537"},{"ruleId":"430","severity":1,"message":"538","line":52,"column":5,"nodeType":"432","endLine":52,"endColumn":20,"suggestions":"539"},{"ruleId":"441","severity":1,"message":"540","line":58,"column":7,"nodeType":"443","messageId":"444","endLine":58,"endColumn":18},{"ruleId":"430","severity":1,"message":"479","line":51,"column":6,"nodeType":"432","endLine":51,"endColumn":8,"suggestions":"541"},{"ruleId":"430","severity":1,"message":"516","line":57,"column":6,"nodeType":"432","endLine":57,"endColumn":15,"suggestions":"542"},{"ruleId":"430","severity":1,"message":"516","line":63,"column":6,"nodeType":"432","endLine":63,"endColumn":13,"suggestions":"543"},{"ruleId":"430","severity":1,"message":"533","line":97,"column":6,"nodeType":"432","endLine":97,"endColumn":18,"suggestions":"544"},{"ruleId":"457","severity":1,"message":"458","line":147,"column":51,"nodeType":"459","messageId":"460","endLine":147,"endColumn":53},{"ruleId":"441","severity":1,"message":"500","line":3,"column":16,"nodeType":"443","messageId":"444","endLine":3,"endColumn":22},{"ruleId":"441","severity":1,"message":"467","line":4,"column":8,"nodeType":"443","messageId":"444","endLine":4,"endColumn":13},{"ruleId":"441","severity":1,"message":"545","line":16,"column":8,"nodeType":"443","messageId":"444","endLine":16,"endColumn":19},{"ruleId":"441","severity":1,"message":"546","line":31,"column":17,"nodeType":"443","messageId":"444","endLine":31,"endColumn":22},{"ruleId":"441","severity":1,"message":"547","line":34,"column":10,"nodeType":"443","messageId":"444","endLine":34,"endColumn":19},{"ruleId":"430","severity":1,"message":"548","line":63,"column":6,"nodeType":"432","endLine":63,"endColumn":48,"suggestions":"549"},{"ruleId":"430","severity":1,"message":"550","line":79,"column":6,"nodeType":"432","endLine":79,"endColumn":18,"suggestions":"551"},{"ruleId":"441","severity":1,"message":"528","line":3,"column":10,"nodeType":"443","messageId":"444","endLine":3,"endColumn":24},{"ruleId":"441","severity":1,"message":"500","line":5,"column":10,"nodeType":"443","messageId":"444","endLine":5,"endColumn":16},{"ruleId":"441","severity":1,"message":"552","line":5,"column":18,"nodeType":"443","messageId":"444","endLine":5,"endColumn":23},{"ruleId":"441","severity":1,"message":"546","line":14,"column":11,"nodeType":"443","messageId":"444","endLine":14,"endColumn":16},{"ruleId":"441","severity":1,"message":"553","line":19,"column":10,"nodeType":"443","messageId":"444","endLine":19,"endColumn":20},{"ruleId":"441","severity":1,"message":"554","line":19,"column":22,"nodeType":"443","messageId":"444","endLine":19,"endColumn":35},{"ruleId":"441","severity":1,"message":"555","line":20,"column":10,"nodeType":"443","messageId":"444","endLine":20,"endColumn":19},{"ruleId":"441","severity":1,"message":"556","line":20,"column":21,"nodeType":"443","messageId":"444","endLine":20,"endColumn":33},{"ruleId":"441","severity":1,"message":"557","line":21,"column":10,"nodeType":"443","messageId":"444","endLine":21,"endColumn":22},{"ruleId":"441","severity":1,"message":"558","line":21,"column":24,"nodeType":"443","messageId":"444","endLine":21,"endColumn":39},{"ruleId":"441","severity":1,"message":"559","line":22,"column":10,"nodeType":"443","messageId":"444","endLine":22,"endColumn":14},{"ruleId":"441","severity":1,"message":"560","line":22,"column":16,"nodeType":"443","messageId":"444","endLine":22,"endColumn":23},{"ruleId":"441","severity":1,"message":"561","line":23,"column":10,"nodeType":"443","messageId":"444","endLine":23,"endColumn":19},{"ruleId":"441","severity":1,"message":"562","line":23,"column":21,"nodeType":"443","messageId":"444","endLine":23,"endColumn":33},{"ruleId":"430","severity":1,"message":"479","line":45,"column":6,"nodeType":"432","endLine":45,"endColumn":8,"suggestions":"563"},{"ruleId":"430","severity":1,"message":"564","line":59,"column":6,"nodeType":"432","endLine":59,"endColumn":18,"suggestions":"565"},{"ruleId":"434","severity":1,"message":"435","line":348,"column":17,"nodeType":"436","endLine":348,"endColumn":88},{"ruleId":"434","severity":1,"message":"435","line":351,"column":17,"nodeType":"436","endLine":353,"endColumn":28},{"ruleId":"441","severity":1,"message":"465","line":1,"column":27,"nodeType":"443","messageId":"444","endLine":1,"endColumn":36},{"ruleId":"441","severity":1,"message":"514","line":16,"column":8,"nodeType":"443","messageId":"444","endLine":16,"endColumn":12},{"ruleId":"441","severity":1,"message":"566","line":17,"column":8,"nodeType":"443","messageId":"444","endLine":17,"endColumn":14},{"ruleId":"430","severity":1,"message":"567","line":56,"column":6,"nodeType":"432","endLine":56,"endColumn":24,"suggestions":"568"},{"ruleId":"437","severity":1,"message":"438","line":129,"column":26,"nodeType":"439","messageId":"440","endLine":129,"endColumn":28},{"ruleId":"441","severity":1,"message":"462","line":4,"column":16,"nodeType":"443","messageId":"444","endLine":4,"endColumn":24},{"ruleId":"430","severity":1,"message":"569","line":24,"column":6,"nodeType":"432","endLine":24,"endColumn":16,"suggestions":"570"},{"ruleId":"441","severity":1,"message":"571","line":14,"column":46,"nodeType":"443","messageId":"444","endLine":14,"endColumn":58},{"ruleId":"430","severity":1,"message":"572","line":87,"column":6,"nodeType":"432","endLine":87,"endColumn":71,"suggestions":"573"},{"ruleId":"430","severity":1,"message":"449","line":87,"column":7,"nodeType":"450","endLine":87,"endColumn":70},{"ruleId":"430","severity":1,"message":"574","line":98,"column":6,"nodeType":"432","endLine":98,"endColumn":36,"suggestions":"575"},{"ruleId":"430","severity":1,"message":"449","line":98,"column":7,"nodeType":"450","endLine":98,"endColumn":35},{"ruleId":"441","severity":1,"message":"576","line":14,"column":10,"nodeType":"443","messageId":"444","endLine":14,"endColumn":26},{"ruleId":"441","severity":1,"message":"577","line":14,"column":28,"nodeType":"443","messageId":"444","endLine":14,"endColumn":52},"no-native-reassign",["578"],"no-negated-in-lhs",["579"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'coursesLoaded' and 'dispatch'. Either include them or remove the dependency array.","ArrayExpression",["580"],"jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-unused-vars","'getCoursesOwned' is defined but never used.","Identifier","unusedVar","'loading' is assigned a value but never used.","'setPage' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'dispatch', 'token', and 'user'. Either include them or remove the dependency array.",["581"],"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","LogicalExpression","React Hook useEffect has a missing dependency: 'redirectUser'. Either include it or remove the dependency array.",["582"],"'Link' is defined but never used.",["583"],"React Hook useEffect has a missing dependency: 'all'. Either include it or remove the dependency array.",["584"],"array-callback-return","Array.prototype.map() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","'img' is assigned a value but never used.","'Redirect' is defined but never used.","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["585"],"'useEffect' is defined but never used.","'resetPaymentResult' is defined but never used.","'store' is defined but never used.","'dispatch' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'formData'. Either include it or remove the dependency array. You can also do a functional update 'setFormData(f => ...)' if you only need 'formData' in the 'setFormData' call.",["586"],"'onChange' is assigned a value but never used.","'onSubmit' is assigned a value but never used.","'checkResult' is assigned a value but never used.","'useState' is defined but never used.","React Hook useEffect has missing dependencies: 'dispatch', 'history', and 'result'. Either include them or remove the dependency array.",["587"],"'Col' is defined but never used.","'setData' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.",["588"],"React Hook useEffect has a missing dependency: 'paymentState'. Either include it or remove the dependency array. You can also do a functional update 'setPaymentState(p => ...)' if you only need 'paymentState' in the 'setPaymentState' call.",["589"],"React Hook useEffect has missing dependencies: 'checkout', 'checkoutPrice', 'couponIsValid', and 'paymentState'. Either include them or remove the dependency array. You can also do a functional update 'setPaymentState(p => ...)' if you only need 'paymentState' in the 'setPaymentState' call.",["590"],["591"],"'getNonce' is assigned a value but never used.","Expected '!==' and instead saw '!='.","'message' is assigned a value but never used.","'setMessage' is assigned a value but never used.","'isAuthenticated' is assigned a value but never used.","'user' is assigned a value but never used.","'active' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'dispatch', 'message', and 'token'. Either include them or remove the dependency array.",["592"],"React Hook useEffect has missing dependencies: 'dispatch' and 'history'. Either include them or remove the dependency array.",["593"],["594"],["595"],"'Form' is defined but never used.","'Button' is defined but never used.",["596"],"'RiVipCrown2Fill' is defined but never used.","React Hook useEffect has missing dependencies: 'coursesOwnedLoaded', 'dispatch', and 'loading'. Either include them or remove the dependency array.",["597"],"'coursesimage' is assigned a value but never used.",["598"],["599"],"React Hook useEffect has missing dependencies: 'auth' and 'userDetails'. Either include them or remove the dependency array. You can also do a functional update 'setUserDetails(u => ...)' if you only need 'userDetails' in the 'setUserDetails' call.",["600"],"React Hook useEffect has missing dependencies: 'couponId' and 'dispatch'. Either include them or remove the dependency array.",["601"],"React Hook useEffect has missing dependencies: 'coupon' and 'coursesState'. Either include them or remove the dependency array. You can also do a functional update 'setCoupon(c => ...)' if you only need 'coupon' in the 'setCoupon' call.",["602"],"'auth' is assigned a value but never used.",["603"],"React Hook useEffect has a missing dependency: 'removeAdminFromUsers'. Either include it or remove the dependency array.",["604"],"React Hook useEffect has a missing dependency: 'pageUsers'. Either include it or remove the dependency array. You can also do a functional update 'setPageUsers(p => ...)' if you only need 'pageUsers' in the 'setPageUsers' call.",["605"],"'allUsers' is assigned a value but never used.","Array.prototype.sort() expects a value to be returned at the end of function.","FunctionExpression","'lastLoginDate' is assigned a value but never used.",["606"],"react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","'allUsersAction' is defined but never used.","'users' is assigned a value but never used.",["607"],"React Hook useEffect has a missing dependency: 'memberships'. Either include it or remove the dependency array.",["608"],"React Hook useEffect has missing dependencies: 'changePages', 'orderByState', and 'pageUsers'. Either include them or remove the dependency array. You can also do a functional update 'setPageUsers(p => ...)' if you only need 'pageUsers' in the 'setPageUsers' call.",["609"],"React Hook useEffect has missing dependencies: 'auth' and 'dispatch'. Either include them or remove the dependency array.",["610"],["611"],"React Hook useEffect has a missing dependency: 'updateCourses'. Either include it or remove the dependency array.",["612"],"'dropzoneRef' is assigned a value but never used.",["613"],["614"],["615"],["616"],"'htmlToDraft' is defined but never used.","'token' is assigned a value but never used.","'uploading' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'setCourseValues'. Either include it or remove the dependency array.",["617"],"React Hook useEffect has missing dependencies: 'courseState' and 'dispatch'. Either include them or remove the dependency array.",["618"],"'Modal' is defined but never used.","'stateUsers' is assigned a value but never used.","'setStateUsers' is assigned a value but never used.","'selectAll' is assigned a value but never used.","'setSelectAll' is assigned a value but never used.","'userSelected' is assigned a value but never used.","'setUserSelected' is assigned a value but never used.","'show' is assigned a value but never used.","'setShow' is assigned a value but never used.","'modalText' is assigned a value but never used.","'setModalText' is assigned a value but never used.",["619"],"React Hook useEffect has a missing dependency: 'pageSales'. Either include it or remove the dependency array. You can also do a functional update 'setPageSales(p => ...)' if you only need 'pageSales' in the 'setPageSales' call.",["620"],"'course' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'theUserCoursesFunc'. Either include it or remove the dependency array.",["621"],"React Hook useEffect has a missing dependency: 'coursesLoaded'. Either include it or remove the dependency array.",["622"],"'notification' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'auth', 'checkoutLoaded', and 'dispatch'. Either include them or remove the dependency array.",["623"],"React Hook useEffect has missing dependencies: 'auth', 'dispatch', and 'membershipLoaded'. Either include them or remove the dependency array.",["624"],"'CHECK_MEMBERSHIP' is defined but never used.","'CHECK_MEMBERSHIP_REQUEST' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"625","fix":"626"},{"desc":"627","fix":"628"},{"desc":"629","fix":"630"},{"desc":"625","fix":"631"},{"desc":"632","fix":"633"},{"desc":"634","fix":"635"},{"desc":"636","fix":"637"},{"desc":"638","fix":"639"},{"desc":"640","fix":"641"},{"desc":"642","fix":"643"},{"desc":"644","fix":"645"},{"desc":"646","fix":"647"},{"desc":"648","fix":"649"},{"desc":"650","fix":"651"},{"desc":"652","fix":"653"},{"desc":"652","fix":"654"},{"desc":"655","fix":"656"},{"desc":"657","fix":"658"},{"desc":"655","fix":"659"},{"desc":"660","fix":"661"},{"desc":"662","fix":"663"},{"desc":"664","fix":"665"},{"desc":"666","fix":"667"},{"desc":"655","fix":"668"},{"desc":"669","fix":"670"},{"desc":"671","fix":"672"},{"desc":"655","fix":"673"},{"desc":"655","fix":"674"},{"desc":"675","fix":"676"},{"desc":"677","fix":"678"},{"desc":"679","fix":"680"},{"desc":"681","fix":"682"},{"desc":"683","fix":"684"},{"desc":"655","fix":"685"},{"desc":"669","fix":"686"},{"desc":"687","fix":"688"},{"desc":"689","fix":"690"},{"desc":"691","fix":"692"},{"desc":"693","fix":"694"},{"desc":"655","fix":"695"},{"desc":"696","fix":"697"},{"desc":"698","fix":"699"},{"desc":"625","fix":"700"},{"desc":"701","fix":"702"},{"desc":"703","fix":"704"},"Update the dependencies array to be: [coursesLoaded, dispatch]",{"range":"705","text":"706"},"Update the dependencies array to be: [courseTag, dispatch, token, user]",{"range":"707","text":"708"},"Update the dependencies array to be: [auth.coursesOwned, redirectUser]",{"range":"709","text":"710"},{"range":"711","text":"706"},"Update the dependencies array to be: [all, loading]",{"range":"712","text":"713"},"Update the dependencies array to be: [history]",{"range":"714","text":"715"},"Update the dependencies array to be: [formData, message]",{"range":"716","text":"717"},"Update the dependencies array to be: [dispatch, history, result]",{"range":"718","text":"719"},"Update the dependencies array to be: [dispatch, user]",{"range":"720","text":"721"},"Update the dependencies array to be: [checkoutPrice, checkout, paymentState]",{"range":"722","text":"723"},"Update the dependencies array to be: [checkout, checkoutPrice, coupon, couponIsValid, paymentState]",{"range":"724","text":"725"},"Update the dependencies array to be: [history, result]",{"range":"726","text":"727"},"Update the dependencies array to be: [dispatch, message, token]",{"range":"728","text":"729"},"Update the dependencies array to be: [user, loading, dispatch, history]",{"range":"730","text":"731"},"Update the dependencies array to be: [auth, active, history]",{"range":"732","text":"733"},{"range":"734","text":"733"},"Update the dependencies array to be: [dispatch]",{"range":"735","text":"736"},"Update the dependencies array to be: [auth, coursesOwnedLoaded, dispatch, loading]",{"range":"737","text":"738"},{"range":"739","text":"736"},"Update the dependencies array to be: [dispatch, notification.status]",{"range":"740","text":"741"},"Update the dependencies array to be: [auth, userDetails]",{"range":"742","text":"743"},"Update the dependencies array to be: [couponId, dispatch]",{"range":"744","text":"745"},"Update the dependencies array to be: [coupon, coursesState, theCoupon]",{"range":"746","text":"747"},{"range":"748","text":"736"},"Update the dependencies array to be: [loading, removeAdminFromUsers]",{"range":"749","text":"750"},"Update the dependencies array to be: [pageUsers, stateUsers]",{"range":"751","text":"752"},{"range":"753","text":"736"},{"range":"754","text":"736"},"Update the dependencies array to be: [loading, memberships]",{"range":"755","text":"756"},"Update the dependencies array to be: [changePages, orderByState, pageUsers, stateMemberships]",{"range":"757","text":"758"},"Update the dependencies array to be: [auth, dispatch, user]",{"range":"759","text":"760"},"Update the dependencies array to be: [dispatch, loading]",{"range":"761","text":"762"},"Update the dependencies array to be: [courseLoading, updateCourses]",{"range":"763","text":"764"},{"range":"765","text":"736"},{"range":"766","text":"750"},"Update the dependencies array to be: [removeAdminFromUsers, users]",{"range":"767","text":"768"},"Update the dependencies array to be: [changePages, orderByState, pageUsers, stateUsers]",{"range":"769","text":"770"},"Update the dependencies array to be: [courseState.loaded, course.loading, auth, setCourseValues]",{"range":"771","text":"772"},"Update the dependencies array to be: [courseState, dispatch, saveCourse]",{"range":"773","text":"774"},{"range":"775","text":"736"},"Update the dependencies array to be: [pageSales, salesState]",{"range":"776","text":"777"},"Update the dependencies array to be: [userCourses, all, theUserCoursesFunc]",{"range":"778","text":"779"},{"range":"780","text":"706"},"Update the dependencies array to be: [auth, checkoutLoaded, dispatch]",{"range":"781","text":"782"},"Update the dependencies array to be: [auth, dispatch, membershipLoaded]",{"range":"783","text":"784"},[586,588],"[coursesLoaded, dispatch]",[962,991],"[courseTag, dispatch, token, user]",[1329,1348],"[auth.coursesOwned, redirectUser]",[778,780],[1053,1062],"[all, loading]",[331,333],"[history]",[1006,1015],"[formData, message]",[1021,1023],"[dispatch, history, result]",[1460,1466],"[dispatch, user]",[1857,1882],"[checkoutPrice, checkout, paymentState]",[3742,3750],"[checkout, checkoutPrice, coupon, couponIsValid, paymentState]",[4451,4459],"[history, result]",[710,712],"[dispatch, message, token]",[938,953],"[user, loading, dispatch, history]",[1041,1055],"[auth, active, history]",[730,744],[924,926],"[dispatch]",[1191,1197],"[auth, coursesOwnedLoaded, dispatch, loading]",[1562,1564],[1678,1699],"[dispatch, notification.status]",[1912,1948],"[auth, userDetails]",[1209,1211],"[couponId, dispatch]",[2391,2402],"[coupon, coursesState, theCoupon]",[1478,1480],[1584,1593],"[loading, removeAdminFromUsers]",[2126,2138],"[pageUsers, stateUsers]",[947,949],[1612,1614],[1715,1724],"[loading, memberships]",[3085,3103],"[changePages, orderByState, pageUsers, stateMemberships]",[1078,1084],"[auth, dispatch, user]",[1245,1254],"[dispatch, loading]",[1348,1363],"[courseLoading, updateCourses]",[1508,1510],[1614,1623],[1751,1758],"[removeAdminFromUsers, users]",[2761,2773],"[changePages, orderByState, pageUsers, stateUsers]",[1747,1789],"[courseState.loaded, course.loading, auth, setCourseValues]",[2153,2165],"[courseState, dispatch, saveCourse]",[1245,1247],[1553,1565],"[pageSales, salesState]",[1786,1804],"[userCourses, all, theUserCoursesFunc]",[821,831],[2565,2630],"[auth, checkoutLoaded, dispatch]",[2910,2940],"[auth, dispatch, membershipLoaded]"]